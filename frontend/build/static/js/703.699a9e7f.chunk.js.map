{"version":3,"file":"static/js/703.699a9e7f.chunk.js","mappings":"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","sources":["hooks/useListQueries.js","components/ui/Button.jsx","pages/ProfilePage.jsx"],"sourcesContent":["import { useQuery } from \"@tanstack/react-query\";\r\nimport { api } from \"../api\";\r\n\r\nconst DEFAULT_QUERY_OPTIONS = {\r\n  staleTime: 60_000,\r\n};\r\n\r\nexport function useListCountries(options = {}) {\r\n  return useQuery({\r\n    queryKey: [\"countries\"],\r\n    queryFn: () => api.listCountries(),\r\n    ...DEFAULT_QUERY_OPTIONS,\r\n    ...options,\r\n  });\r\n}\r\n\r\nexport function useListSchools(params = {}, options = {}) {\r\n  return useQuery({\r\n    queryKey: [\"schools\", params],\r\n    queryFn: () => api.listSchools(params),\r\n    ...DEFAULT_QUERY_OPTIONS,\r\n    ...options,\r\n  });\r\n}\r\n\r\nexport function useAdminUsers(params = {}, options = {}) {\r\n  return useQuery({\r\n    queryKey: [\"adminUsers\", params],\r\n    queryFn: () => api.listUsers(params),\r\n    ...DEFAULT_QUERY_OPTIONS,\r\n    ...options,\r\n  });\r\n}\r\n\r\nexport function useManagerUsers(params = {}, options = {}) {\r\n  return useQuery({\r\n    queryKey: [\"managerUsers\", params],\r\n    queryFn: () => api.managerListUsers(params),\r\n    ...DEFAULT_QUERY_OPTIONS,\r\n    ...options,\r\n  });\r\n}\r\n","// frontend/src/components/ui/Button.jsx\n\nimport React from \"react\";\n\nconst Button = React.forwardRef(\n  (\n    {\n      variant = \"primary\",\n      size = \"md\",\n      loading = false,\n      disabled = false,\n      className = \"\",\n      as: Component = \"button\",\n      onClick,\n      type,\n      children,\n      ...rest\n    },\n    ref\n  ) => {\n    const isButton = Component === \"button\";\n    const isDisabled = disabled || loading;\n    const classes = [\"btn\", `btn-${variant}`, `btn-${size}`, className]\n      .filter(Boolean)\n      .join(\" \");\n    const content = loading ? \"Yukleniyor...\" : children;\n\n    if (isButton) {\n      return (\n        <Component\n          ref={ref}\n          type={type || \"button\"}\n          className={classes}\n          disabled={isDisabled}\n          onClick={onClick}\n          {...rest}\n        >\n          {content}\n        </Component>\n      );\n    }\n\n    return (\n      <Component\n        ref={ref}\n        className={classes}\n        aria-disabled={isDisabled ? true : undefined}\n        onClick={(event) => {\n          if (isDisabled) {\n            event.preventDefault();\n            event.stopPropagation();\n            return;\n          }\n          onClick?.(event);\n        }}\n        {...rest}\n      >\n        {content}\n      </Component>\n    );\n  }\n);\n\nButton.displayName = \"Button\";\n\nexport default Button;\n","//frontend/src/pages/ProfilePage.jsx\r\n\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport { useNavigate, useOutletContext } from \"react-router-dom\";\r\nimport { api } from \"../api\";\r\nimport { useListSchools } from \"../hooks/useListQueries\";\r\nimport { useAuth } from \"../auth/AuthContext\";\r\nimport Button from \"../components/ui/Button\";\r\n\r\nexport default function ProfilePage() {\r\n  const auth = useAuth();\r\n  const navigate = useNavigate();\r\n  const outlet = useOutletContext();\r\n  const [currentPassword, setCurrentPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [status, setStatus] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // List of schools accessible to the current user.  This will be used\r\n  // to display the schools the user is responsible for.  We fetch it\r\n  // once on mount.  For principal users, this list will include only\r\n  // the schools they have been assigned to; for other roles, it lists\r\n  // all schools they can access (typically all schools in their country).\r\n  const [assignedSchools, setAssignedSchools] = useState([]);\r\n  const schoolsQuery = useListSchools({\r\n    limit: 50,\r\n    offset: 0,\r\n    fields: \"brief\",\r\n    order: \"name:asc\",\r\n  });\r\n\r\n  // Compute the list of schools to display.  Principals should see only\r\n  // the schools they have been assigned to (via principalSchoolIds).  Other\r\n  // roles see all accessible schools.  The list is derived from\r\n  // assignedSchools fetched from the API.\r\n  const schoolsToShow = useMemo(() => {\r\n    const list = Array.isArray(assignedSchools) ? assignedSchools : [];\r\n    const principalIds = auth.user?.principalSchoolIds;\r\n    if (auth.user?.role === \"principal\" && Array.isArray(principalIds) && principalIds.length > 0) {\r\n      // Filter by principalSchoolIds\r\n      const idSet = new Set(principalIds.map((n) => Number(n)));\r\n      return list.filter((s) => idSet.has(Number(s.id)));\r\n    }\r\n    return list;\r\n  }, [assignedSchools, auth.user?.role, auth.user?.principalSchoolIds]);\r\n\r\n  const permissionRows = useMemo(() => {\r\n    const perms = Array.isArray(auth.user?.permissions) ? auth.user.permissions : [];\r\n    const map = new Map();\r\n    perms.forEach((p) => {\r\n      const resource = String(p.resource || \"\");\r\n      const action = String(p.action || \"\").toLowerCase();\r\n      const scopeSchoolId = p.scope_school_id != null ? Number(p.scope_school_id) : null;\r\n      const scopeCountryId = p.scope_country_id != null ? Number(p.scope_country_id) : null;\r\n      const key = `${resource}::${scopeSchoolId ?? \"null\"}::${scopeCountryId ?? \"null\"}`;\r\n      if (!map.has(key)) {\r\n        map.set(key, {\r\n          resource,\r\n          scope_school_id: scopeSchoolId,\r\n          scope_country_id: scopeCountryId,\r\n          read: false,\r\n          write: false,\r\n        });\r\n      }\r\n      const entry = map.get(key);\r\n      if (action === \"read\") entry.read = true;\r\n      if (action === \"write\") entry.write = true;\r\n    });\r\n    const list = Array.from(map.values());\r\n    list.sort((a, b) => {\r\n      if (a.resource !== b.resource) {\r\n        return a.resource.localeCompare(b.resource, \"tr\", { sensitivity: \"base\" });\r\n      }\r\n      const as = a.scope_school_id ?? -1;\r\n      const bs = b.scope_school_id ?? -1;\r\n      if (as !== bs) return as - bs;\r\n      const ac = a.scope_country_id ?? -1;\r\n      const bc = b.scope_country_id ?? -1;\r\n      return ac - bc;\r\n    });\r\n    return list;\r\n  }, [auth.user?.permissions]);\r\n\r\n  const schoolNameById = useMemo(() => {\r\n    const map = new Map();\r\n    const list = Array.isArray(assignedSchools) ? assignedSchools : [];\r\n    list.forEach((s) => {\r\n      if (s && s.id != null) map.set(Number(s.id), s.name);\r\n    });\r\n    return map;\r\n  }, [assignedSchools]);\r\n\r\n  useEffect(() => {\r\n    document.title = \"Profile · Feasibility Studio\";\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!outlet?.setHeaderMeta) return;\r\n    // Pass centered flag to align the \"Okul / Senaryo Değiştir\" button consistently with other pages.\r\n    outlet.setHeaderMeta({ title: \"Profil\", subtitle: \"Şifre ve hesap bilgileri\", centered: true });\r\n    return () => outlet.clearHeaderMeta?.();\r\n  }, [outlet]);\r\n\r\n  // Keep assigned schools in sync with the cached query.\r\n  useEffect(() => {\r\n    const rows = schoolsQuery.data?.items;\r\n    if (Array.isArray(rows)) {\r\n      setAssignedSchools(rows);\r\n    }\r\n  }, [schoolsQuery.data]);\r\n\r\n  const mustReset = useMemo(() => Boolean(auth.user?.must_reset_password), [auth.user?.must_reset_password]);\r\n\r\n  const renderPermMark = (enabled) => (\r\n    <span\r\n      className={`perm-mark ${enabled ? \"is-yes\" : \"is-no\"}`}\r\n      role=\"img\"\r\n      aria-label={enabled ? \"Allowed\" : \"Not allowed\"}\r\n      title={enabled ? \"Allowed\" : \"Not allowed\"}\r\n    >\r\n      {enabled ? (\r\n        <svg viewBox=\"0 0 24 24\" aria-hidden=\"true\" className=\"perm-mark-icon\">\r\n          <path d=\"M5 13l4 4L19 7\" />\r\n        </svg>\r\n      ) : (\r\n        <svg viewBox=\"0 0 24 24\" aria-hidden=\"true\" className=\"perm-mark-icon\">\r\n          <path d=\"M6 6l12 12M18 6l-12 12\" />\r\n        </svg>\r\n      )}\r\n    </span>\r\n  );\r\n\r\n  async function handleChangePassword(e) {\r\n    e.preventDefault();\r\n    setStatus(null);\r\n\r\n    if (!currentPassword || !newPassword) {\r\n      setStatus({ type: \"error\", message: \"Current and new password are required.\" });\r\n      return;\r\n    }\r\n    if (newPassword.length < 8) {\r\n      setStatus({ type: \"error\", message: \"New password must be at least 8 characters.\" });\r\n      return;\r\n    }\r\n    if (newPassword !== confirmPassword) {\r\n      setStatus({ type: \"error\", message: \"New password and confirmation do not match.\" });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    const wasForced = mustReset;\r\n    try {\r\n      const data = await api.changePassword({ currentPassword, newPassword });\r\n      auth.setSession(data);\r\n      setCurrentPassword(\"\");\r\n      setNewPassword(\"\");\r\n      setConfirmPassword(\"\");\r\n      setStatus({ type: \"success\", message: \"Password updated successfully.\" });\r\n      if (wasForced) navigate(\"/schools\", { replace: true });\r\n    } catch (e2) {\r\n      setStatus({ type: \"error\", message: e2.message || \"Password update failed.\" });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      {mustReset ? (\r\n        <div className=\"card\" style={{ marginTop: 12, borderColor: \"#f59e0b\", background: \"#fffbeb\" }}>\r\n          <div style={{ fontWeight: 700 }}>Şifre değiştirme gerekli</div>\r\n          <div className=\"small\" style={{ marginTop: 6 }}>\r\n            Bu ilk girişiniz. Devam etmek için yeni bir şifre belirleyin.\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n\r\n      {status ? (\r\n        <div\r\n          className=\"card\"\r\n          style={{\r\n            marginTop: 12,\r\n            borderColor: status.type === \"error\" ? \"#fecaca\" : \"#bbf7d0\",\r\n            background: status.type === \"error\" ? \"#fff1f2\" : \"#f0fdf4\",\r\n          }}\r\n        >\r\n          {status.message}\r\n        </div>\r\n      ) : null}\r\n\r\n      <div className=\"card\" style={{ marginTop: 12 }}>\r\n        <div style={{ fontWeight: 700, marginBottom: 8 }}>Hesap</div>\r\n        <div className=\"row\">\r\n          <input className=\"input\" value={auth.user?.full_name || \"\"} disabled placeholder=\"Full name\" />\r\n          <input className=\"input\" value={auth.user?.email || \"\"} disabled placeholder=\"Email\" />\r\n          <input className=\"input sm\" value={auth.user?.role || \"\"} disabled placeholder=\"Role\" />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Card to display the country and schools assigned to the user */}\r\n      <div className=\"card\" style={{ marginTop: 12 }}>\r\n        <div style={{ fontWeight: 700, marginBottom: 8 }}>Assignments</div>\r\n        <div className=\"row\" style={{ marginBottom: 8 }}>\r\n          <div style={{ flex: 1 }}>\r\n            <div className=\"small\" style={{ fontWeight: 600 }}>Country</div>\r\n            <div>{auth.user?.country_name || auth.user?.country_code || \"-\"}</div>\r\n          </div>\r\n          <div style={{ flex: 2 }}>\r\n            <div className=\"small\" style={{ fontWeight: 600 }}>Responsible Schools</div>\r\n            {schoolsToShow && schoolsToShow.length > 0 ? (\r\n              <ul style={{ margin: 0, paddingLeft: 16 }}>\r\n                {schoolsToShow.map((s) => (\r\n                  <li key={s.id}>{s.name}</li>\r\n                ))}\r\n              </ul>\r\n            ) : (\r\n              <div>-</div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"card\" style={{ marginTop: 12 }}>\r\n        <div style={{ fontWeight: 700, marginBottom: 8 }}>Permissions</div>\r\n        {permissionRows.length === 0 ? (\r\n          <div className=\"small\">No permissions assigned.</div>\r\n        ) : (\r\n          <table className=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Resource</th>\r\n                <th style={{ textAlign: \"center\" }}>Read</th>\r\n                <th style={{ textAlign: \"center\" }}>Write</th>\r\n                <th>Scope</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {permissionRows.map((row, idx) => {\r\n                const schoolId = row.scope_school_id != null ? Number(row.scope_school_id) : null;\r\n                const countryId = row.scope_country_id != null ? Number(row.scope_country_id) : null;\r\n                let scopeLabel = \"Global\";\r\n                if (schoolId != null && Number.isFinite(schoolId)) {\r\n                  const name = schoolNameById.get(schoolId);\r\n                  scopeLabel = name ? `School: ${name}` : `School: #${schoolId}`;\r\n                } else if (countryId != null && Number.isFinite(countryId)) {\r\n                  const code = auth.user?.country_code || auth.user?.country_name || \"\";\r\n                  scopeLabel = code ? `Country: ${code}` : `Country: #${countryId}`;\r\n                }\r\n                return (\r\n                  <tr key={`${row.resource}-${schoolId ?? \"global\"}-${countryId ?? \"global\"}-${idx}`}>\r\n                    <td>{row.resource}</td>\r\n                    <td style={{ textAlign: \"center\" }}>{renderPermMark(row.read)}</td>\r\n                    <td style={{ textAlign: \"center\" }}>{renderPermMark(row.write)}</td>\r\n                    <td>{scopeLabel}</td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"card\" style={{ marginTop: 12 }}>\r\n        <div style={{ fontWeight: 700, marginBottom: 8 }}>Şifre Değiştir</div>\r\n        <form onSubmit={handleChangePassword}>\r\n          <div className=\"row\">\r\n            <input\r\n              className=\"input\"\r\n              type=\"password\"\r\n              placeholder=\"Current password\"\r\n              value={currentPassword}\r\n              onChange={(e) => setCurrentPassword(e.target.value)}\r\n            />\r\n            <input\r\n              className=\"input\"\r\n              type=\"password\"\r\n              placeholder=\"New password\"\r\n              value={newPassword}\r\n              onChange={(e) => setNewPassword(e.target.value)}\r\n            />\r\n            <input\r\n              className=\"input\"\r\n              type=\"password\"\r\n              placeholder=\"Confirm new password\"\r\n              value={confirmPassword}\r\n              onChange={(e) => setConfirmPassword(e.target.value)}\r\n            />\r\n            <Button type=\"submit\" variant=\"primary\" loading={loading}>\r\n              Update Password\r\n            </Button>\r\n          </div>\r\n          <div className=\"small\" style={{ marginTop: 8 }}>\r\n            En az 8 karakter kullanın. Bu işlemi daha sonra herhangi bir zamanda değiştirebilirsiniz.\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["DEFAULT_QUERY_OPTIONS","staleTime","useListCountries","options","arguments","length","undefined","useQuery","_objectSpread","queryKey","queryFn","api","listCountries","useListSchools","params","listSchools","useAdminUsers","listUsers","useManagerUsers","managerListUsers","Button","React","_ref","ref","variant","size","loading","disabled","className","as","Component","onClick","type","children","rest","_objectWithoutProperties","_excluded","isButton","isDisabled","classes","concat","filter","Boolean","join","content","_jsx","event","preventDefault","stopPropagation","displayName","ProfilePage","_auth$user3","_auth$user4","_auth$user6","_auth$user8","_auth$user9","_auth$user0","_auth$user1","_auth$user10","_auth$user11","auth","useAuth","navigate","useNavigate","outlet","useOutletContext","currentPassword","setCurrentPassword","useState","newPassword","setNewPassword","confirmPassword","setConfirmPassword","status","setStatus","setLoading","assignedSchools","setAssignedSchools","schoolsQuery","limit","offset","fields","order","schoolsToShow","useMemo","_auth$user","_auth$user2","list","Array","isArray","principalIds","user","principalSchoolIds","role","idSet","Set","map","n","Number","s","has","id","permissionRows","_auth$user5","perms","permissions","Map","forEach","p","resource","String","action","toLowerCase","scopeSchoolId","scope_school_id","scopeCountryId","scope_country_id","key","set","read","write","entry","get","from","values","sort","a","b","_a$scope_school_id","_b$scope_school_id","_a$scope_country_id","_b$scope_country_id","localeCompare","sensitivity","bs","schoolNameById","name","useEffect","document","title","setHeaderMeta","subtitle","centered","_outlet$clearHeaderMe","clearHeaderMeta","call","_schoolsQuery$data","rows","data","items","mustReset","_auth$user7","must_reset_password","renderPermMark","enabled","viewBox","d","_jsxs","style","marginTop","borderColor","background","fontWeight","message","marginBottom","value","full_name","placeholder","email","flex","country_name","country_code","margin","paddingLeft","textAlign","row","idx","schoolId","countryId","scopeLabel","isFinite","_auth$user12","_auth$user13","code","onSubmit","async","e","wasForced","changePassword","setSession","replace","e2","onChange","target"],"ignoreList":[],"sourceRoot":""}