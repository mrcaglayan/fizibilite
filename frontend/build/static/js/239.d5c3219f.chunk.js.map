{"version":3,"file":"static/js/239.d5c3219f.chunk.js","mappings":"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","sources":["utils/kademe.js","utils/buildDetailedReportModel.js","components/DetailedReportView.jsx","pages/school/DetayliRaporPage.jsx","utils/programType.js"],"sourcesContent":["const GRADES = [\"KG\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"];\r\n\r\nconst KADEME_DEFS = [\r\n  { key: \"okulOncesi\", label: \"Okul ncesi\", defaultFrom: \"KG\", defaultTo: \"KG\" },\r\n  { key: \"ilkokul\", label: \"lkokul\", defaultFrom: \"1\", defaultTo: \"5\" },\r\n  { key: \"ortaokul\", label: \"Ortaokul\", defaultFrom: \"6\", defaultTo: \"9\" },\r\n  { key: \"lise\", label: \"Lise\", defaultFrom: \"10\", defaultTo: \"12\" },\r\n];\r\n\r\nfunction normalizeGrade(value) {\r\n  const v = String(value || \"\").trim().toUpperCase();\r\n  if (v === \"KG\") return \"KG\";\r\n  if (!/^\\d{1,2}$/.test(v)) return null;\r\n  const n = Number(v);\r\n  if (!Number.isFinite(n) || n < 1 || n > 12) return null;\r\n  return String(n);\r\n}\r\n\r\nfunction gradeIndex(value) {\r\n  const g = normalizeGrade(value);\r\n  if (!g) return -1;\r\n  return GRADES.indexOf(g);\r\n}\r\n\r\nfunction normalizeRange(fromValue, toValue, def) {\r\n  const from = normalizeGrade(fromValue) ?? def.defaultFrom;\r\n  const to = normalizeGrade(toValue) ?? def.defaultTo;\r\n  const fromIdx = gradeIndex(from);\r\n  const toIdx = gradeIndex(to);\r\n  if (fromIdx < 0 || toIdx < 0) return { from: def.defaultFrom, to: def.defaultTo };\r\n  if (fromIdx <= toIdx) return { from, to };\r\n  return { from: to, to: from };\r\n}\r\n\r\nexport function getKademeDefinitions() {\r\n  return KADEME_DEFS.map((d) => ({ ...d }));\r\n}\r\n\r\nexport function getDefaultKademeConfig() {\r\n  const out = {};\r\n  KADEME_DEFS.forEach((d) => {\r\n    out[d.key] = { enabled: true, from: d.defaultFrom, to: d.defaultTo };\r\n  });\r\n  return out;\r\n}\r\n\r\nexport function normalizeKademeConfig(config) {\r\n  const cfg = config && typeof config === \"object\" ? config : {};\r\n  const out = {};\r\n  KADEME_DEFS.forEach((d) => {\r\n    const row = cfg[d.key] && typeof cfg[d.key] === \"object\" ? cfg[d.key] : {};\r\n    const enabled = row.enabled !== false;\r\n    const range = normalizeRange(row.from, row.to, d);\r\n    out[d.key] = { enabled, ...range };\r\n  });\r\n  return out;\r\n}\r\n\r\nexport function getKademeRangeLabel(config, key) {\r\n  const def = KADEME_DEFS.find((d) => d.key === key);\r\n  if (!def) return \"\";\r\n  const cfg = normalizeKademeConfig(config)[key];\r\n  if (!cfg?.enabled) return \"\";\r\n  return cfg.from === cfg.to ? cfg.from : `${cfg.from}-${cfg.to}`;\r\n}\r\n\r\nexport function formatKademeLabel(label, config, key) {\r\n  const range = getKademeRangeLabel(config, key);\r\n  if (!range) return label;\r\n  return `${label} (${range})`;\r\n}\r\n\r\nexport function getKademeForGrade(grade, config) {\r\n  const idx = gradeIndex(grade);\r\n  if (idx < 0) return null;\r\n  const cfg = normalizeKademeConfig(config);\r\n  for (const def of KADEME_DEFS) {\r\n    const row = cfg[def.key];\r\n    if (!row?.enabled) continue;\r\n    const fromIdx = gradeIndex(row.from);\r\n    const toIdx = gradeIndex(row.to);\r\n    if (fromIdx <= idx && idx <= toIdx) return def.key;\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function summarizeGradesByKademe(grades, config) {\r\n  const rows = Array.isArray(grades) ? grades : [];\r\n  const out = { okulOncesi: 0, ilkokul: 0, ortaokul: 0, lise: 0, total: 0 };\r\n\r\n  for (const r of rows) {\r\n    // studentsPerBranch now represents TOTAL students for the grade (not per-branch).\r\n    const students = Number(r?.studentsPerBranch || 0);\r\n    if (!Number.isFinite(students)) continue;\r\n    out.total += students;\r\n    const key = getKademeForGrade(r?.grade, config);\r\n    if (key && Object.prototype.hasOwnProperty.call(out, key)) out[key] += students;\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\nexport function getGradeOptions() {\r\n  return GRADES.map((g) => g);\r\n}\r\n","import { getProgramType, isKademeKeyVisible } from \"./programType\";\r\nimport { formatKademeLabel, normalizeKademeConfig } from \"./kademe\";\r\n\r\nconst DISCOUNT_DEFS = [\r\n  { key: \"magisBasariBursu\", name: \"MAGIS BASARI BURSU\" },\r\n  { key: \"maarifYetenekBursu\", name: \"MAARIF YETENEK BURSU\" },\r\n  { key: \"ihtiyacBursu\", name: \"IHTIYAC BURSU\" },\r\n  { key: \"okulBasariBursu\", name: \"OKUL BASARI BURSU\" },\r\n  { key: \"tamEgitimBursu\", name: \"TAM EGITIM BURSU\" },\r\n  { key: \"barinmaBursu\", name: \"BARINMA BURSU\" },\r\n  { key: \"turkceBasariBursu\", name: \"TURKCE BASARI BURSU\" },\r\n  {\r\n    key: \"uluslararasiYukumlulukIndirimi\",\r\n    name: \"VAKFIN ULUSLARARASI YUKUMLULUKLERINDEN KAYNAKLI INDIRIM\",\r\n  },\r\n  { key: \"vakifCalisaniIndirimi\", name: \"VAKIF CALISANI INDIRIMI\" },\r\n  { key: \"kardesIndirimi\", name: \"KARDES INDIRIMI\" },\r\n  { key: \"erkenKayitIndirimi\", name: \"ERKEN KAYIT INDIRIMI\" },\r\n  { key: \"pesinOdemeIndirimi\", name: \"PESIN ODEME INDIRIMI\" },\r\n  { key: \"kademeGecisIndirimi\", name: \"KADEME GECIS INDIRIMI\" },\r\n  { key: \"temsilIndirimi\", name: \"TEMSIL INDIRIMI\" },\r\n  { key: \"kurumIndirimi\", name: \"KURUM INDIRIMI\" },\r\n  { key: \"istisnaiIndirim\", name: \"ISTISNAI INDIRIM\" },\r\n  { key: \"yerelMevzuatIndirimi\", name: \"YEREL MEVZUATIN SART KOSTUGU INDIRIM\" },\r\n];\r\n\r\nconst SCHOLARSHIP_DEFS = DISCOUNT_DEFS.slice(0, 7);\r\nconst OTHER_DISCOUNT_DEFS = DISCOUNT_DEFS.slice(7);\r\n\r\nfunction safeNum(value) {\r\n  const n = Number(value);\r\n  return Number.isFinite(n) ? n : 0;\r\n}\r\n\r\nfunction clamp(value, min, max) {\r\n  const n = safeNum(value);\r\n  return Math.min(max, Math.max(min, n));\r\n}\r\n\r\nfunction clamp0(value) {\r\n  return Math.max(0, safeNum(value));\r\n}\r\n\r\nfunction safeDiv(numerator, denominator) {\r\n  const num = Number(numerator);\r\n  const denom = Number(denominator);\r\n  if (!Number.isFinite(num) || !Number.isFinite(denom) || denom === 0) {\r\n    return null;\r\n  }\r\n  return num / denom;\r\n}\r\n\r\nfunction normalizeText(value) {\r\n  const map = {\r\n    : \"s\",\r\n    : \"s\",\r\n    : \"i\",\r\n    : \"i\",\r\n    : \"g\",\r\n    : \"g\",\r\n    : \"u\",\r\n    : \"u\",\r\n    : \"o\",\r\n    : \"o\",\r\n    : \"c\",\r\n    : \"c\",\r\n  };\r\n  const replaced = String(value || \"\")\r\n    .normalize(\"NFD\")\r\n    .replace(/[\\u0300-\\u036f]/g, \"\")\r\n    .split(\"\")\r\n    .map((ch) => map[ch] ?? ch)\r\n    .join(\"\");\r\n  return replaced\r\n    .toLowerCase()\r\n    .replace(/\\([^)]*\\)/g, \" \")\r\n    .replace(/[^\\w\\s]/g, \" \")\r\n    .replace(/\\s+/g, \" \")\r\n    .trim();\r\n}\r\n\r\nfunction getRowLabel(row) {\r\n  return (\r\n    row?.key ||\r\n    row?.code ||\r\n    row?.name ||\r\n    row?.title ||\r\n    row?.label ||\r\n    row?.description ||\r\n    row?.item_name ||\r\n    \"\"\r\n  );\r\n}\r\n\r\nfunction getRowCount(row) {\r\n  return safeNum(\r\n    row?.studentCount ||\r\n    row?.count ||\r\n    row?.students ||\r\n    row?.qty ||\r\n    row?.quantity ||\r\n    0\r\n  );\r\n}\r\n\r\nfunction scoreMatch(normLabel, aliases) {\r\n  let best = 0;\r\n  for (const alias of aliases) {\r\n    if (!alias) continue;\r\n    if (normLabel === alias) best = Math.max(best, 100);\r\n    else if (normLabel.startsWith(alias)) best = Math.max(best, 80);\r\n    else if (normLabel.includes(alias)) best = Math.max(best, 60);\r\n    else if (new RegExp(`(^|\\\\s)${alias}(\\\\s|$)`).test(normLabel))\r\n      best = Math.max(best, 70);\r\n  }\r\n  return best;\r\n}\r\n\r\nfunction findBestCount(rows, aliases) {\r\n  const normalizedAliases = aliases.map(normalizeText);\r\n  let best = { score: 0, count: 0 };\r\n  for (const row of rows || []) {\r\n    const normLabel = normalizeText(getRowLabel(row));\r\n    const score = scoreMatch(normLabel, normalizedAliases);\r\n    const count = getRowCount(row);\r\n    if (\r\n      score > best.score ||\r\n      (score === best.score && count > best.count)\r\n    ) {\r\n      best = { score, count };\r\n    }\r\n  }\r\n  return best.count;\r\n}\r\n\r\nconst numOrNull = (value) => {\r\n  const n = Number(value);\r\n  return Number.isFinite(n) ? n : null;\r\n};\r\n\r\nfunction parseAcademicStartYear(academicYear) {\r\n  const raw = String(academicYear || \"\").trim();\r\n  const range = raw.match(/(\\d{4})\\s*-\\s*(\\d{4})/);\r\n  if (range) {\r\n    const start = Number(range[1]);\r\n    if (Number.isFinite(start)) return start;\r\n  }\r\n  const single = raw.match(/^(\\d{4})$/);\r\n  if (single) {\r\n    const start = Number(single[1]);\r\n    if (Number.isFinite(start)) return start;\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction normalizeName(value) {\r\n  return String(value || \"\")\r\n    .normalize(\"NFD\")\r\n    .replace(/[\\u0300-\\u036f]/g, \"\")\r\n    .replace(/[^a-z0-9 ]/gi, \" \")\r\n    .trim()\r\n    .toUpperCase();\r\n}\r\n\r\nfunction buildDiscountLookup(list) {\r\n  const map = new Map();\r\n  for (const row of list || []) {\r\n    const key = normalizeName(row?.name);\r\n    if (!key) continue;\r\n    map.set(key, row);\r\n  }\r\n  return map;\r\n}\r\n\r\nconst TUITION_VARIANT_BASE = {\r\n  okuloncesi: \"okulOncesi\",\r\n  ilkokul: \"ilkokul\",\r\n  ilkokulyerel: \"ilkokul\",\r\n  ilkokulint: \"ilkokul\",\r\n  ortaokul: \"ortaokul\",\r\n  ortaokulyerel: \"ortaokul\",\r\n  ortaokulint: \"ortaokul\",\r\n  lise: \"lise\",\r\n  liseyerel: \"lise\",\r\n  liseint: \"lise\",\r\n};\r\n\r\nfunction normalizeTuitionVariant(value) {\r\n  if (value == null) return \"\";\r\n  return String(value)\r\n    .normalize(\"NFD\")\r\n    .replace(/[\\u0300-\\u036f]/g, \"\")\r\n    .replace(/[^a-z0-9]/gi, \"\")\r\n    .toLowerCase();\r\n}\r\n\r\nfunction getTuitionBaseKey(row) {\r\n  const normalized = normalizeTuitionVariant(row?.key ?? row?.label ?? row?.level);\r\n  if (!normalized) return null;\r\n  return TUITION_VARIANT_BASE[normalized] || null;\r\n}\r\n\r\nfunction collectTuitionStudents(rows) {\r\n  return rows.reduce((sum, row) => sum + safeNum(row.studentCount), 0);\r\n}\r\n\r\nfunction buildTuitionRowCosts(row, uniformFee, booksFee, transportFee, mealFee, raisePct, toUsd) {\r\n  const eduFeeUsd = toUsd(row?.unitFee);\r\n  const uniformUsd = uniformFee;\r\n  const booksUsd = booksFee;\r\n  const transportUsd = transportFee;\r\n  const mealUsd = mealFee;\r\n  const totalUsd = eduFeeUsd + uniformUsd + booksUsd + transportUsd + mealUsd;\r\n  return {\r\n    key: String(row?.key || row?.level || row?.label || \"\"),\r\n    level: row?.label || row?.level || row?.key || \"\",\r\n    edu: eduFeeUsd,\r\n    uniform: uniformUsd,\r\n    books: booksUsd,\r\n    transport: transportUsd,\r\n    meal: mealUsd,\r\n    raisePct,\r\n    total: totalUsd,\r\n    studentCount: safeNum(row?.studentCount),\r\n  };\r\n}\r\n\r\nfunction buildDiscountPlanRowY1({ name, key, tuitionStudents, avgTuition, toUsd, inputDiscounts, currentCount }) {\r\n  const normalized = normalizeName(name);\r\n  const entry = inputDiscounts.get(normalized);\r\n  const row = entry || { name, mode: \"percent\", value: 0, ratio: 0 };\r\n\r\n  const hasCount = row.studentCount != null && row.studentCount !== \"\";\r\n  const count = hasCount ? Math.max(0, Math.round(safeNum(row.studentCount))) : null;\r\n  const ratio = clamp(row.ratio, 0, 1);\r\n  const derived = tuitionStudents > 0 ? Math.round((count != null ? count : ratio * tuitionStudents)) : 0;\r\n  const plannedCount = tuitionStudents > 0 ? Math.min(derived, tuitionStudents) : count != null ? count : 0;\r\n\r\n  const mode = String(row.mode || \"percent\").trim().toLowerCase();\r\n  const value = safeNum(row.value);\r\n  const pct = clamp(value, 0, 1);\r\n  const fixedValueUsd = Math.max(0, toUsd(value));\r\n  const fixedRate =\r\n    Number.isFinite(avgTuition) && avgTuition > 0 ? clamp(fixedValueUsd / avgTuition, 0, 1) : null;\r\n  const rate = mode === \"fixed\" ? fixedRate : pct;\r\n  const cost =\r\n    mode === \"fixed\"\r\n      ? plannedCount * fixedValueUsd\r\n      : safeNum(avgTuition) * plannedCount * pct;\r\n\r\n  return {\r\n    name,\r\n    planned: plannedCount,\r\n    cost,\r\n    cur: currentCount ?? null,\r\n    key,\r\n    rate,\r\n  };\r\n}\r\n\r\nexport function buildDetailedReportModel({\r\n  school,\r\n  scenario,\r\n  inputs,\r\n  report,\r\n  prevReport,\r\n  prevCurrencyMeta,\r\n  currencyMeta,\r\n  programType,\r\n} = {}) {\r\n  const normKey = (k) => String(k || \"\").trim().toLowerCase();\r\n  const resolvedProgramType = programType || getProgramType(inputs, scenario);\r\n  const inputCurrency = String(scenario?.input_currency || \"USD\").toUpperCase();\r\n  const fx = Number(scenario?.fx_usd_to_local || 0);\r\n  const shouldConvertLocal = inputCurrency === \"LOCAL\" && fx > 0;\r\n  const toUsd = (value) => {\r\n    const n = Number(value);\r\n    if (!Number.isFinite(n)) return 0;\r\n    if (shouldConvertLocal) {\r\n      return n / fx;\r\n    }\r\n    return n;\r\n  };\r\n  const prevFx = Number(prevCurrencyMeta?.fx_usd_to_local || 0);\r\n  const perfRealizedFx = Number(\r\n    inputs?.temelBilgiler?.performans?.prevYearRealizedFxUsdToLocal || 0,\r\n  );\r\n  const perfRealizedFxValid = perfRealizedFx > 0;\r\n  const plannedFxForLocal = prevFx > 0 ? prevFx : perfRealizedFxValid ? perfRealizedFx : null;\r\n  const toUsdPerf = (value) => {\r\n    const raw = numOrNull(value);\r\n    if (raw == null) return null;\r\n    if (inputCurrency === \"LOCAL\") {\r\n      return perfRealizedFxValid ? raw / perfRealizedFx : null;\r\n    }\r\n    return raw;\r\n  };\r\n\r\n  const headerParts = [\r\n    school?.name || school?.school_name || \"Okul\",\r\n    scenario?.name || \"\",\r\n    scenario?.academic_year || \"\",\r\n  ].filter(Boolean);\r\n  const headerLabel = headerParts.join(\" > \");\r\n\r\n  const temel = inputs?.temelBilgiler || {};\r\n  const kademeConfig = normalizeKademeConfig(temel?.kademeler);\r\n  const okulEgitim = temel?.okulEgitimBilgileri || {};\r\n  const ucretArtisOranlari = temel?.ucretArtisOranlari || {};\r\n  const ikMevcut = temel?.ikMevcut || {};\r\n  const performans = temel?.performans?.gerceklesen || {};\r\n  const rakipAnalizi = temel?.rakipAnalizi || {};\r\n  const inflation = temel?.inflation || {};\r\n  const bursIndirimCounts = temel?.bursIndirimOgrenciSayilari || {};\r\n\r\n  const kapasite = inputs?.kapasite || {};\r\n  const byKademe = kapasite?.byKademe || {};\r\n  const derivedCapacity =\r\n    safeNum(kapasite?.totals?.cur) ||\r\n    Object.values(byKademe).reduce((sum, row) => sum + safeNum(row?.caps?.cur), 0);\r\n  const schoolCapacity = derivedCapacity || safeNum(kapasite?.currentStudents);\r\n  const derivedCapacityY1 =\r\n    safeNum(kapasite?.years?.y1) ||\r\n    safeNum(kapasite?.totals?.y1) ||\r\n    Object.values(byKademe).reduce((sum, row) => sum + safeNum(row?.caps?.y1), 0);\r\n  const capacityYear1 = derivedCapacityY1 || schoolCapacity;\r\n\r\n  const gradesCurrent = Array.isArray(inputs?.gradesCurrent) ? inputs?.gradesCurrent : [];\r\n  const currentStudentsFromGrades = gradesCurrent.reduce((sum, row) => sum + safeNum(row?.studentsPerBranch), 0);\r\n  const currentStudents = safeNum(kapasite?.currentStudents) || currentStudentsFromGrades;\r\n  const totalBranchesCurrent = gradesCurrent.reduce((sum, row) => sum + safeNum(row?.branchCount), 0);\r\n  const classroomUtilization = safeDiv(currentStudents, totalBranchesCurrent);\r\n\r\n  const gradesYearsY1 = Array.isArray(inputs?.gradesYears?.y1) ? inputs?.gradesYears.y1 : [];\r\n  const plannedStudents = gradesYearsY1.reduce((sum, row) => sum + safeNum(row?.studentsPerBranch), 0);\r\n  const plannedBranches = gradesYearsY1.reduce((sum, row) => sum + safeNum(row?.branchCount), 0);\r\n  const plannedUtilization = safeDiv(plannedStudents, schoolCapacity);\r\n  const avgStudentsPerClassPlanned = safeDiv(plannedStudents, plannedBranches);\r\n\r\n  const shiftSystem = okulEgitim?.sabahciOglenci || \"\";\r\n  const programTypeLabel = okulEgitim?.uygulananProgram ||\r\n    (resolvedProgramType === \"international\" ? \"Uluslararasi\" : \"Ulusal\");\r\n\r\n  const tuitionInputRows = Array.isArray(inputs?.gelirler?.tuition?.rows)\r\n    ? inputs.gelirler.tuition.rows\r\n    : [];\r\n  const nonEducationRows = Array.isArray(inputs?.gelirler?.nonEducationFees?.rows)\r\n    ? inputs.gelirler.nonEducationFees.rows\r\n    : [];\r\n  const dormRows = Array.isArray(inputs?.gelirler?.dormitory?.rows)\r\n    ? inputs.gelirler.dormitory.rows\r\n    : [];\r\n  const otherIncomeRows = Array.isArray(inputs?.gelirler?.otherInstitutionIncome?.rows)\r\n    ? inputs.gelirler.otherInstitutionIncome.rows\r\n    : [];\r\n  const dormIncomeRows = Array.isArray(inputs?.gelirler?.dormitory?.rows)\r\n    ? inputs.gelirler.dormitory.rows\r\n    : [];\r\n  const dormByKey = new Map(dormIncomeRows.map((r) => [normKey(r?.key), r]));\r\n  const yurtCount = safeNum(dormByKey.get(\"yurt\")?.studentCount);\r\n  const yazOkuluCount = safeNum(dormByKey.get(\"yazokulu\")?.studentCount);\r\n\r\n  const tuitionVisibleRows = tuitionInputRows.filter((row) => {\r\n    const baseKey = getTuitionBaseKey(row);\r\n    if (baseKey && kademeConfig[baseKey]?.enabled === false) return false;\r\n    return isKademeKeyVisible(row?.key, resolvedProgramType);\r\n  });\r\n\r\n  const feeLookup = new Map();\r\n  for (const row of nonEducationRows) {\r\n    const key = String(row?.key || \"\").trim().toLowerCase();\r\n    if (key) feeLookup.set(key, row);\r\n  }\r\n\r\n  const uniformFee = toUsd(feeLookup.get(\"uniforma\")?.unitFee ?? 0);\r\n  const booksFee = toUsd(feeLookup.get(\"kitap\")?.unitFee ?? 0);\r\n  const transportFee = toUsd(feeLookup.get(\"ulasim\")?.unitFee ?? 0);\r\n  const mealFee = toUsd(feeLookup.get(\"yemek\")?.unitFee ?? 0);\r\n\r\n  const nonEduIncomeRows =\r\n    inputs?.gelirler?.nonEducationFees?.rows ||\r\n    inputs?.gelirler?.nonEducationFees?.items ||\r\n    [];\r\n  const MEAL_ALIASES = [\r\n    \"yemek\",\r\n    \"ogrenci yemegi\",\r\n    \"ogrenci yemegi ucreti\",\r\n    \"ogrenci yemei\",\r\n    \"yemek ucreti\",\r\n    \"lunch\",\r\n    \"meal\",\r\n    \"meal fee\",\r\n    \"food\",\r\n  ];\r\n  const UNIFORM_ALIASES = [\r\n    \"uniforma\",\r\n    \"okul uniformasi\",\r\n    \"okul niformasi\",\r\n    \"forma\",\r\n    \"kiyafet\",\r\n    \"kyafet\",\r\n    \"uniform\",\r\n    \"uniform fee\",\r\n  ];\r\n  const BOOK_ALIASES = [\r\n    \"kitap\",\r\n    \"kirtasiye\",\r\n    \"krtasiye\",\r\n    \"kitap kirtasiye\",\r\n    \"kitap-kirtasiye\",\r\n    \"book\",\r\n    \"books\",\r\n    \"stationery\",\r\n    \"book stationery\",\r\n  ];\r\n  const SERVICE_ALIASES = [\r\n    \"servis\",\r\n    \"ogrenci servisi\",\r\n    \"ogrenci servis\",\r\n    \"ulasim\",\r\n    \"ulaim\",\r\n    \"servis ucreti\",\r\n    \"transport\",\r\n    \"transportation\",\r\n    \"bus\",\r\n    \"school bus\",\r\n  ];\r\n  const mealCount = findBestCount(nonEduIncomeRows, MEAL_ALIASES);\r\n  const uniformCount = findBestCount(nonEduIncomeRows, UNIFORM_ALIASES);\r\n  const bookCount = findBestCount(nonEduIncomeRows, BOOK_ALIASES);\r\n  const serviceCount = findBestCount(nonEduIncomeRows, SERVICE_ALIASES);\r\n\r\n  const tuitionRows = tuitionVisibleRows.map((row) => {\r\n    const raisePct = clamp0(ucretArtisOranlari?.[row?.key]);\r\n    return buildTuitionRowCosts(row, uniformFee, booksFee, transportFee, mealFee, raisePct, toUsd);\r\n  });\r\n\r\n  const totalTuitionStudents = collectTuitionStudents(tuitionRows);\r\n  const totalTuitionEdu = tuitionRows.reduce((sum, r) => sum + r.edu * r.studentCount, 0);\r\n  const avgTuition = totalTuitionStudents\r\n    ? totalTuitionEdu / totalTuitionStudents\r\n    : tuitionRows.length\r\n      ? tuitionRows.reduce((sum, r) => sum + r.edu, 0) / tuitionRows.length\r\n      : 0;\r\n\r\n  const totalRow = {\r\n    key: \"total\",\r\n    level: \"TOPLAM\",\r\n    edu: tuitionRows.reduce((sum, r) => sum + r.edu, 0),\r\n    uniform: tuitionRows.reduce((sum, r) => sum + r.uniform, 0),\r\n    books: tuitionRows.reduce((sum, r) => sum + r.books, 0),\r\n    transport: tuitionRows.reduce((sum, r) => sum + r.transport, 0),\r\n    meal: tuitionRows.reduce((sum, r) => sum + r.meal, 0),\r\n    raisePct: null,\r\n    total: tuitionRows.reduce((sum, r) => sum + r.total, 0),\r\n    studentCount: totalTuitionStudents,\r\n  };\r\n\r\n  const averageRow = {\r\n    key: \"average\",\r\n    level: \"ORTALAMA UCRET\",\r\n    edu: avgTuition,\r\n    uniform: tuitionRows.length ? uniformFee : 0,\r\n    books: tuitionRows.length ? booksFee : 0,\r\n    transport: tuitionRows.length ? transportFee : 0,\r\n    meal: tuitionRows.length ? mealFee : 0,\r\n    raisePct: null,\r\n    total: tuitionRows.length\r\n      ? uniformFee + booksFee + transportFee + mealFee + avgTuition\r\n      : 0,\r\n    studentCount: totalTuitionStudents,\r\n  };\r\n\r\n  const tuitionTable = [...tuitionRows, totalRow, averageRow];\r\n\r\n  const reportIncome = report?.years?.y1?.income || {};\r\n  const reportExpenses = report?.years?.y1?.expenses || {};\r\n\r\n  const reportGrossTuition = safeNum(reportIncome?.grossTuition) || totalTuitionEdu;\r\n  const nonEducationTotal =\r\n    safeNum(reportIncome?.nonEducationFeesTotal) ||\r\n    nonEducationRows.reduce((sum, row) => sum + toUsd(row?.unitFee) * safeNum(row?.studentCount), 0);\r\n  const dormTotal =\r\n    safeNum(reportIncome?.dormitoryRevenuesTotal) ||\r\n    dormRows.reduce((sum, row) => sum + toUsd(row?.unitFee) * safeNum(row?.studentCount), 0);\r\n  const governmentIncentives = toUsd(inputs?.gelirler?.governmentIncentives ?? 0);\r\n  const otherIncomePure = otherIncomeRows.reduce((sum, row) => sum + toUsd(row?.amount), 0);\r\n  const otherIncomeFromInputs = otherIncomePure + governmentIncentives;\r\n  const otherIncomeTotal =\r\n    safeNum(reportIncome?.otherIncomeTotal) ||\r\n    otherIncomeFromInputs;\r\n  const grossIncomeBase =\r\n    safeNum(reportIncome?.totalGrossIncome) ||\r\n    reportGrossTuition + nonEducationTotal + dormTotal + otherIncomeTotal;\r\n\r\n  const calcNonEdRevenue = (key) => {\r\n    const row = feeLookup.get(key) || {};\r\n    return toUsd(row?.unitFee) * safeNum(row?.studentCount);\r\n  };\r\n  const nonEdRevenues = {\r\n    uniforma: calcNonEdRevenue(\"uniforma\"),\r\n    kitap: calcNonEdRevenue(\"kitap\"),\r\n    yemek: calcNonEdRevenue(\"yemek\"),\r\n    ulasim: calcNonEdRevenue(\"ulasim\"),\r\n  };\r\n  const revenueRows = [\r\n    { name: \"Egitim Ucreti\", amount: reportGrossTuition },\r\n    { name: \"Uniforma\", amount: nonEdRevenues.uniforma },\r\n    { name: \"Kitap Kirtasiye\", amount: nonEdRevenues.kitap },\r\n    { name: \"Yemek\", amount: nonEdRevenues.yemek },\r\n    { name: \"Servis\", amount: nonEdRevenues.ulasim },\r\n    { name: \"Yurt Gelirleri\", amount: dormTotal },\r\n    { name: \"Diger (kantin, kira vb.)\", amount: otherIncomePure },\r\n    { name: \"Devlet Tesvikleri\", amount: governmentIncentives },\r\n  ].map((row) => ({\r\n    name: row.name,\r\n    amount: row.amount,\r\n    ratio: safeDiv(row.amount, grossIncomeBase),\r\n  }));\r\n  const revenuesDetailed = revenueRows;\r\n  const revenuesDetailedTotal =\r\n    grossIncomeBase ||\r\n    revenuesDetailed.reduce((sum, r) => (Number.isFinite(r.amount) ? sum + Number(r.amount) : sum), 0);\r\n  const nonEducationBreakdown = nonEducationRows\r\n    .map((row) => {\r\n      const name = row?.label || row?.name || row?.key || \"\";\r\n      const amount = toUsd(row?.unitFee) * safeNum(row?.studentCount);\r\n      return { name, amount };\r\n    })\r\n    .filter((row) => row.name && Number.isFinite(row.amount) && row.amount !== 0);\r\n\r\n  const otherIncomeBreakdown = [\r\n    ...otherIncomeRows\r\n      .map((row) => {\r\n        const name = row?.label || row?.name || row?.key || \"\";\r\n        const amount = toUsd(row?.amount);\r\n        return { name, amount };\r\n      })\r\n      .filter((row) => row.name && Number.isFinite(row.amount) && row.amount !== 0),\r\n    ...(inputs?.gelirler?.governmentIncentives\r\n      ? [{ name: \"Devlet Tesvikleri\", amount: toUsd(inputs?.gelirler?.governmentIncentives) }]\r\n      : []),\r\n  ];\r\n\r\n  const nonEduExpenseItems = inputs?.giderler?.ogrenimDisi?.items || {};\r\n  const unitMealUsd = toUsd(safeNum(nonEduExpenseItems?.yemek?.unitCost));\r\n  const unitUniformUsd = toUsd(safeNum(nonEduExpenseItems?.uniforma?.unitCost));\r\n  const unitBookUsd = toUsd(\r\n    safeNum(\r\n      nonEduExpenseItems?.kitapKirtasiye?.unitCost ??\r\n      nonEduExpenseItems?.kitap?.unitCost ??\r\n      nonEduExpenseItems?.kirtasiye?.unitCost\r\n    )\r\n  );\r\n  const unitServiceUsd = toUsd(\r\n    safeNum(\r\n      nonEduExpenseItems?.ulasimServis?.unitCost ??\r\n      nonEduExpenseItems?.servis?.unitCost ??\r\n      nonEduExpenseItems?.ulasim?.unitCost\r\n    )\r\n  );\r\n\r\n  const dormExpenseItems = inputs?.giderler?.yurt?.items || {};\r\n\r\n  const mealAmount = unitMealUsd * mealCount;\r\n  const uniformAmount = unitUniformUsd * uniformCount;\r\n  const bookAmount = unitBookUsd * bookCount;\r\n  const serviceAmount = unitServiceUsd * serviceCount;\r\n\r\n  const unitYurtUsd = toUsd(safeNum(dormExpenseItems?.yurtGiderleri?.unitCost));\r\n  const unitOtherUsd = toUsd(safeNum(dormExpenseItems?.digerYurt?.unitCost));\r\n  const dormYurtAmount = unitYurtUsd * yurtCount;\r\n  const dormOtherAmount = unitOtherUsd * yazOkuluCount;\r\n  const dormAmount = Math.max(0, dormYurtAmount + dormOtherAmount);\r\n\r\n  const serviceCosts = {\r\n    yemek: mealAmount,\r\n    uniforma: uniformAmount,\r\n    kitapKirtasiye: bookAmount,\r\n    ulasimServis: serviceAmount,\r\n    total: mealAmount + uniformAmount + bookAmount + serviceAmount,\r\n  };\r\n\r\n  const dormCosts = {\r\n    yurtGiderleri: dormYurtAmount,\r\n    digerYurt: dormOtherAmount,\r\n    total: dormAmount,\r\n  };\r\n\r\n  const plannedHeadcountsByRole = (() => {\r\n    const hc = inputs?.ik?.years?.y1?.headcountsByLevel || {};\r\n    const levels = Object.keys(hc);\r\n    const sumRole = (roleKey) =>\r\n      levels.reduce((sum, level) => sum + safeNum(hc?.[level]?.[roleKey]), 0);\r\n    return {\r\n      turkPersonelYoneticiEgitimci:\r\n        sumRole(\"turk_mudur\") + sumRole(\"turk_mdyard\") + sumRole(\"turk_egitimci\"),\r\n      turkPersonelTemsilcilik: sumRole(\"turk_temsil\"),\r\n      yerelKadroluEgitimci: sumRole(\"yerel_yonetici_egitimci\"),\r\n      yerelUcretliVakaterEgitimci: sumRole(\"yerel_ucretli_egitimci\"),\r\n      yerelDestek: sumRole(\"yerel_destek\"),\r\n      yerelTemsilcilik: sumRole(\"yerel_ulke_temsil_destek\"),\r\n      international: sumRole(\"int_yonetici_egitimci\"),\r\n    };\r\n  })();\r\n  const isletmeItems = inputs?.giderler?.isletme?.items || {};\r\n  const OPERATING_KEYS = [\r\n    \"ulkeTemsilciligi\",\r\n    \"genelYonetim\",\r\n    \"kira\",\r\n    \"emsalKira\",\r\n    \"enerjiKantin\",\r\n    \"turkPersonelMaas\",\r\n    \"turkDestekPersonelMaas\",\r\n    \"yerelPersonelMaas\",\r\n    \"yerelDestekPersonelMaas\",\r\n    \"internationalPersonelMaas\",\r\n    \"disaridanHizmet\",\r\n    \"egitimAracGerec\",\r\n    \"finansalGiderler\",\r\n    \"egitimAmacliHizmet\",\r\n    \"temsilAgirlama\",\r\n    \"ulkeIciUlasim\",\r\n    \"ulkeDisiUlasim\",\r\n    \"vergilerResmiIslemler\",\r\n    \"vergiler\",\r\n    \"demirbasYatirim\",\r\n    \"rutinBakim\",\r\n    \"pazarlamaOrganizasyon\",\r\n    \"reklamTanitim\",\r\n    \"tahsilEdilemeyenGelirler\",\r\n  ];\r\n  const HR_KEYS = [\r\n    \"turkPersonelMaas\",\r\n    \"turkDestekPersonelMaas\",\r\n    \"yerelPersonelMaas\",\r\n    \"yerelDestekPersonelMaas\",\r\n    \"internationalPersonelMaas\",\r\n  ];\r\n  const operatingTotalUsd = OPERATING_KEYS.reduce(\r\n    (sum, k) => sum + toUsd(safeNum(isletmeItems?.[k])),\r\n    0\r\n  );\r\n  const hrTotalUsd = HR_KEYS.reduce((sum, k) => sum + toUsd(safeNum(isletmeItems?.[k])), 0);\r\n  const hrTurkCost =\r\n    toUsd(isletmeItems?.turkPersonelMaas) + toUsd(isletmeItems?.turkDestekPersonelMaas);\r\n  const hrYerelCost =\r\n    toUsd(isletmeItems?.yerelPersonelMaas) +\r\n    toUsd(isletmeItems?.yerelDestekPersonelMaas) +\r\n    toUsd(isletmeItems?.internationalPersonelMaas);\r\n  const badDebtAmount = toUsd(safeNum(isletmeItems?.tahsilEdilemeyenGelirler));\r\n  const uncollectableExpenseAmount = badDebtAmount;\r\n  const isletmeGiderleriInputsOnlyUsd = Math.max(\r\n    0,\r\n    operatingTotalUsd - hrTotalUsd - badDebtAmount\r\n  );\r\n\r\n\r\n  const hrRows = [\r\n    {\r\n      item: \"Turk Personel Yonetici ve Egitimci Sayisi\",\r\n      current: safeNum(ikMevcut?.turkPersonelYoneticiEgitimci),\r\n      planned: plannedHeadcountsByRole?.turkPersonelYoneticiEgitimci,\r\n    },\r\n    {\r\n      item: \"Turk Personel Temsilcilik Personeli Sayisi\",\r\n      current: safeNum(ikMevcut?.turkPersonelTemsilcilik),\r\n      planned: plannedHeadcountsByRole?.turkPersonelTemsilcilik,\r\n    },\r\n    {\r\n      item: \"Yerel Kadrolu Egitimci Personel Sayisi\",\r\n      current: safeNum(ikMevcut?.yerelKadroluEgitimci),\r\n      planned: plannedHeadcountsByRole?.yerelKadroluEgitimci,\r\n    },\r\n    {\r\n      item: \"Yerel Ucretli (Vaka) Egitimci Personel Sayisi\",\r\n      current: safeNum(ikMevcut?.yerelUcretliVakaterEgitimci),\r\n      planned: plannedHeadcountsByRole?.yerelUcretliVakaterEgitimci,\r\n    },\r\n    {\r\n      item: \"Yerel Destek Personel Sayisi\",\r\n      current: safeNum(ikMevcut?.yerelDestek),\r\n      planned: plannedHeadcountsByRole?.yerelDestek,\r\n    },\r\n    {\r\n      item: \"Yerel Personel Temsilcilik Personeli Sayisi\",\r\n      current: safeNum(ikMevcut?.yerelTemsilcilik),\r\n      planned: plannedHeadcountsByRole?.yerelTemsilcilik,\r\n    },\r\n    {\r\n      item: \"International Personel Sayisi\",\r\n      current: safeNum(ikMevcut?.international),\r\n      planned: plannedHeadcountsByRole?.international,\r\n    },\r\n  ];\r\n\r\n\r\n\r\n  // compute tuition totals from inputs as fallback basis for discount calculations\r\n  const tuitionStudentsFromInputs = tuitionInputRows.length\r\n    ? tuitionInputRows.reduce((sum, r) => sum + safeNum(r?.studentCount), 0)\r\n    : 0;\r\n  const grossTuitionFromInputs = tuitionInputRows.length\r\n    ? tuitionInputRows.reduce((sum, r) => sum + safeNum(r?.studentCount) * toUsd(r?.unitFee), 0)\r\n    : 0;\r\n  const avgTuitionFromInputs =\r\n    tuitionStudentsFromInputs > 0\r\n      ? grossTuitionFromInputs / tuitionStudentsFromInputs\r\n      : toUsd(inputs?.gelirler?.tuitionFeePerStudentYearly ?? 0);\r\n\r\n  // categorize discount inputs into scholarships (first 7 defs) and others\r\n  const scholarshipNameSet = new Set(SCHOLARSHIP_DEFS.map((d) => normalizeName(d.name)));\r\n  const discountInputList = Array.isArray(inputs?.discounts) ? inputs.discounts : [];\r\n\r\n  let scholarshipsSumInputs = 0;\r\n  let discountsSumInputs = 0;\r\n\r\n  for (const d of discountInputList) {\r\n    const mode = String(d?.mode || \"percent\").trim().toLowerCase();\r\n    const value = safeNum(d?.value);\r\n    const pct = clamp(value, 0, 1);\r\n    const fixedValueUsd = Math.max(0, toUsd(value));\r\n    const hasCount = d?.studentCount != null && d?.studentCount !== \"\";\r\n    const count = hasCount ? Math.max(0, Math.round(safeNum(d?.studentCount))) : null;\r\n    const ratio = clamp(d?.ratio, 0, 1);\r\n    const derived = tuitionStudentsFromInputs > 0 ? Math.round((count != null ? count : ratio * tuitionStudentsFromInputs)) : 0;\r\n    const plannedCount =\r\n      tuitionStudentsFromInputs > 0\r\n        ? Math.min(derived, tuitionStudentsFromInputs)\r\n        : count != null\r\n          ? count\r\n          : 0;\r\n\r\n    const cost =\r\n      mode === \"fixed\"\r\n        ? plannedCount * fixedValueUsd\r\n        : avgTuitionFromInputs * plannedCount * pct;\r\n\r\n    const nameKey = normalizeName(d?.name || d?.key || \"\");\r\n    if (scholarshipNameSet.has(nameKey)) scholarshipsSumInputs += cost;\r\n    else discountsSumInputs += cost;\r\n  }\r\n\r\n  // allow report-provided values to override\r\n  const scholarshipsAmount =\r\n    numOrNull(reportExpenses?.scholarshipsTotal) != null\r\n      ? safeNum(reportExpenses?.scholarshipsTotal)\r\n      : scholarshipsSumInputs;\r\n  const discountsAmount =\r\n    numOrNull(reportExpenses?.discountsTotal) != null\r\n      ? safeNum(reportExpenses?.discountsTotal)\r\n      : discountsSumInputs;\r\n\r\n  const expenseTotal =\r\n    safeNum(operatingTotalUsd + serviceCosts.total + dormCosts.total + scholarshipsAmount + discountsAmount);\r\n\r\n\r\n\r\n\r\n  const expenseRows = [\r\n    {\r\n      name: \"IK Giderleri (Toplam)\",\r\n      amount:\r\n        numOrNull(reportExpenses?.hrTotal) != null\r\n          ? safeNum(reportExpenses?.hrTotal)\r\n          : hrTotalUsd,\r\n    },\r\n    { name: \"Isletme Giderleri (IK Haric)\", amount: isletmeGiderleriInputsOnlyUsd },\r\n    {\r\n      name: \"Egitim Disi Hizmet Maliyetleri\",\r\n      amount:\r\n        numOrNull(reportExpenses?.nonTuitionServicesCostTotal) != null\r\n          ? safeNum(reportExpenses?.nonTuitionServicesCostTotal)\r\n          : serviceCosts.total,\r\n    },\r\n    { name: \"Yurt Maliyetleri\", amount: dormCosts.total },\r\n    { name: \"Indirimler\", amount: discountsAmount },\r\n    { name: \"Burslar\", amount: scholarshipsAmount },\r\n  ].map((row) => ({\r\n    name: row.name,\r\n    amount: row.amount,\r\n    ratio: safeDiv(row.amount, expenseTotal),\r\n  }));\r\n\r\n  const tuitionStudentsForDiscounts = tuitionInputRows.length\r\n    ? tuitionInputRows.reduce((sum, row) => sum + safeNum(row?.studentCount), 0)\r\n    : plannedStudents || currentStudents || 0;\r\n  const grossTuitionForDiscounts = tuitionInputRows.length\r\n    ? tuitionInputRows.reduce((sum, row) => sum + safeNum(row?.studentCount) * toUsd(row?.unitFee), 0)\r\n    : tuitionStudentsForDiscounts * toUsd(inputs?.gelirler?.tuitionFeePerStudentYearly ?? 0);\r\n  const avgTuitionForDiscounts =\r\n    tuitionStudentsForDiscounts > 0 ? grossTuitionForDiscounts / tuitionStudentsForDiscounts : 0;\r\n  const discountInputLookup = buildDiscountLookup(inputs?.discounts || []);\r\n\r\n  const scholarships = SCHOLARSHIP_DEFS.map((def) =>\r\n    buildDiscountPlanRowY1({\r\n      name: def.name,\r\n      key: def.key,\r\n      tuitionStudents: tuitionStudentsForDiscounts,\r\n      avgTuition: avgTuitionForDiscounts,\r\n      toUsd,\r\n      inputDiscounts: discountInputLookup,\r\n      currentCount: clamp0(bursIndirimCounts?.[def.key]),\r\n    })\r\n  );\r\n  const discounts = OTHER_DISCOUNT_DEFS.map((def) =>\r\n    buildDiscountPlanRowY1({\r\n      name: def.name,\r\n      key: def.key,\r\n      tuitionStudents: tuitionStudentsForDiscounts,\r\n      avgTuition: avgTuitionForDiscounts,\r\n      toUsd,\r\n      inputDiscounts: discountInputLookup,\r\n      currentCount: clamp0(bursIndirimCounts?.[def.key]),\r\n    })\r\n  );\r\n\r\n  const plannedPerf = prevReport?.years?.y1 || {};\r\n  const plannedStudentsPerf = numOrNull(plannedPerf?.students?.totalStudents);\r\n  const plannedIncome = numOrNull(plannedPerf?.income?.netIncome);\r\n  const plannedExpenses = numOrNull(plannedPerf?.expenses?.totalExpenses);\r\n  const plannedDiscounts = numOrNull(plannedPerf?.income?.totalDiscounts);\r\n  const plannedProfit =\r\n    plannedIncome != null && plannedExpenses != null ? plannedIncome - plannedExpenses : null;\r\n\r\n  const actualStudents = numOrNull(performans?.ogrenciSayisi);\r\n  const actualIncome = toUsdPerf(performans?.gelirler);\r\n  const actualExpenses = toUsdPerf(performans?.giderler);\r\n  const actualDiscounts = toUsdPerf(performans?.bursVeIndirimler);\r\n  const actualProfitFromInputs =\r\n    actualIncome != null && actualExpenses != null ? actualIncome - actualExpenses : null;\r\n  const storedProfit = numOrNull(performans?.karZarar);\r\n  const actualProfit =\r\n    actualProfitFromInputs != null\r\n      ? actualProfitFromInputs\r\n      : storedProfit != null\r\n        ? toUsdPerf(storedProfit)\r\n        : null;\r\n\r\n  const calcVariance = (planned, actual) =>\r\n    planned != null && actual != null && Number(planned) !== 0\r\n      ? (actual - planned) / planned\r\n      : null;\r\n\r\n  const performanceRows = [\r\n    {\r\n      metric: \"Ogrenci Sayisi\",\r\n      planned: plannedStudentsPerf,\r\n      actual: actualStudents,\r\n    },\r\n    {\r\n      metric: \"Gelirler\",\r\n      planned: plannedIncome,\r\n      actual: actualIncome,\r\n    },\r\n    {\r\n      metric: \"Giderler\",\r\n      planned: plannedExpenses,\r\n      actual: actualExpenses,\r\n    },\r\n    {\r\n      metric: \"Kar Zarar\",\r\n      planned: plannedProfit,\r\n      actual: actualProfit,\r\n    },\r\n    {\r\n      metric: \"Burs ve Indirimler\",\r\n      planned: plannedDiscounts,\r\n      actual: actualDiscounts,\r\n    },\r\n  ].map((row) => ({\r\n    ...row,\r\n    variance: calcVariance(row.planned, row.actual),\r\n  }));\r\n\r\n  const programTypeSuffix = resolvedProgramType === \"international\" ? \"INT.\" : \"YEREL\";\r\n  const competitorRows = [\"okulOncesi\", \"ilkokul\", \"ortaokul\", \"lise\"]\r\n    .filter((key) => kademeConfig?.[key]?.enabled !== false)\r\n    .map((key) => {\r\n      const source = rakipAnalizi?.[key] || {};\r\n      const baseLabel =\r\n        key === \"okulOncesi\"\r\n          ? \"Okul Oncesi\"\r\n          : key === \"ilkokul\"\r\n            ? \"Ilkokul\"\r\n            : key === \"ortaokul\"\r\n              ? \"Ortaokul\"\r\n              : \"Lise\";\r\n      const labelWithRange = formatKademeLabel(baseLabel, kademeConfig, key);\r\n      const level = key === \"okulOncesi\" ? labelWithRange : `${labelWithRange} - ${programTypeSuffix}`;\r\n      return {\r\n        level,\r\n        a: toUsd(source?.a),\r\n        b: toUsd(source?.b),\r\n        c: toUsd(source?.c),\r\n      };\r\n    });\r\n\r\n  const scholarshipsTotalCost = scholarships.reduce((sum, r) => sum + safeNum(r.cost), 0);\r\n  const discountsTotalCost = discounts.reduce((sum, r) => sum + safeNum(r.cost), 0);\r\n  const scholarshipDiscountCostTotal = scholarshipsTotalCost + discountsTotalCost;\r\n  const activityRevenueY1 = (() => {\r\n    const activityGross = safeNum(reportIncome?.activityGross);\r\n    if (activityGross > 0) return activityGross;\r\n    return reportGrossTuition + nonEducationTotal + dormTotal;\r\n  })();\r\n  const parentStudentRevenue = activityRevenueY1;\r\n  const sumPlanned = (rows) => rows.reduce((sum, r) => sum + safeNum(r.planned), 0);\r\n  const calcWeightedAvgRate = (rows, avgTuition) => {\r\n    const totalPlanned = sumPlanned(rows);\r\n    if (totalPlanned <= 0) return null;\r\n    const weighted = rows.reduce((sum, r) => {\r\n      const planned = safeNum(r.planned);\r\n      if (planned <= 0) return sum;\r\n      let rate = numOrNull(r.rate);\r\n      if (rate == null) {\r\n        if (!Number.isFinite(avgTuition) || avgTuition <= 0) return sum;\r\n        const cost = safeNum(r.cost);\r\n        rate = cost / (planned * avgTuition);\r\n      }\r\n      return sum + planned * clamp(rate, 0, 1);\r\n    }, 0);\r\n    return weighted / totalPlanned;\r\n  };\r\n  const plannedStudentsTotal = plannedStudents;\r\n  const targetStudentsForCost =\r\n    plannedStudentsTotal > 0 ? plannedStudentsTotal : tuitionStudentsForDiscounts;\r\n  const buildGroupAnalysis = (rows, totalCost) => {\r\n    const plannedGroupStudents = sumPlanned(rows);\r\n    const perTargetStudent =\r\n      targetStudentsForCost > 0 ? totalCost / targetStudentsForCost : null;\r\n    const studentShare =\r\n      capacityYear1 > 0 ? plannedGroupStudents / capacityYear1 : null;\r\n    const revenueShare =\r\n      parentStudentRevenue > 0 ? (totalCost > 0 ? totalCost / parentStudentRevenue : 0) : null;\r\n    const weightedAvgRate = calcWeightedAvgRate(rows, avgTuitionForDiscounts);\r\n    return {\r\n      perTargetStudent,\r\n      studentShare,\r\n      revenueShare,\r\n      weightedAvgRate,\r\n      plannedStudents: plannedGroupStudents,\r\n      totalCost,\r\n    };\r\n  };\r\n  const discountAnalysis = {\r\n    targetStudents: targetStudentsForCost,\r\n    parentStudentRevenue,\r\n    scholarships: buildGroupAnalysis(scholarships, scholarshipsTotalCost),\r\n    discounts: buildGroupAnalysis(discounts, discountsTotalCost),\r\n  };\r\n  const plannedRaiseAvg = (() => {\r\n    const rates = tuitionRows.map((r) => r.raisePct).filter((v) => Number.isFinite(v));\r\n    return rates.length ? rates.reduce((sum, v) => sum + v, 0) / rates.length : null;\r\n  })();\r\n  const competitorHasData = Object.values(rakipAnalizi || {}).some((row) =>\r\n    [\"a\", \"b\", \"c\"].some((key) => {\r\n      const v = Number(row?.[key]);\r\n      return Number.isFinite(v) && v > 0;\r\n    })\r\n  );\r\n  const baseYear = parseAcademicStartYear(scenario?.academic_year);\r\n  const inflationYears = (() => {\r\n    const ref = Number.isFinite(baseYear) ? baseYear : 2026;\r\n    const yearList = [ref - 3, ref - 2, ref - 1];\r\n    const fallbackKeys = [\"y2023\", \"y2024\", \"y2025\"];\r\n    return yearList.map((year, idx) => {\r\n      const exact = numOrNull(inflation?.[`y${year}`]);\r\n      const fallback = numOrNull(inflation?.[fallbackKeys[idx]]);\r\n      return { year, value: exact != null ? exact : fallback };\r\n    });\r\n  })();\r\n  const inflationHistory = {\r\n    y2023: numOrNull(inflation?.y2023),\r\n    y2024: numOrNull(inflation?.y2024),\r\n    y2025: numOrNull(inflation?.y2025),\r\n  };\r\n  const rawCurrentSeasonAvgFee = numOrNull(inflation?.currentSeasonAvgFee);\r\n  const currentSeasonAvgFeeUsd = rawCurrentSeasonAvgFee == null ? null : toUsd(rawCurrentSeasonAvgFee);\r\n  const rawFinalFee = numOrNull(inflation?.finalFee);\r\n  const finalFeeUsd =\r\n    rawFinalFee != null ? toUsd(rawFinalFee) : Number.isFinite(averageRow?.total) ? averageRow.total : null;\r\n  const uncollectableRevenuePct = numOrNull(\r\n    inflation?.uncollectableRevenuePct ?? inflation?.badDebtPct ?? inflation?.tahsilEdilemeyenGelirPct\r\n  );\r\n\r\n  const revenueTotal =\r\n    grossIncomeBase;\r\n  const netTotal = revenueTotal - expenseTotal;\r\n  const margin = safeDiv(netTotal, revenueTotal);\r\n  const perStudentCost = plannedStudents > 0 ? safeDiv(expenseTotal, plannedStudents) : null;\r\n\r\n  const parameters = [\r\n    {\r\n      no: \"1\",\r\n      desc: \"Planlanan Donem Kapasite Kullanim Orani (%)\",\r\n      value: plannedUtilization,\r\n      valueType: \"percent\",\r\n    },\r\n    {\r\n      no: \"2\",\r\n      desc: \"Insan Kaynaklari Planlamasi (Turk + Yerel + International)\",\r\n      value: Object.values(plannedHeadcountsByRole).reduce((sum, v) => sum + safeNum(v), 0),\r\n      valueType: \"number\",\r\n    },\r\n    { no: \"3\", desc: \"Gelir Planlamasi\", value: revenueTotal, valueType: \"currency\" },\r\n    { no: \"4\", desc: \"Gider Planlamasi\", value: expenseTotal, valueType: \"currency\" },\r\n    { no: \"\", desc: \"Gelir - Gider Farki\", value: netTotal, valueType: \"currency\" },\r\n    {\r\n      no: \"5\",\r\n      desc: \"Tahsil Edilemeyecek Gelirler (Onceki Donemin Tahsil Edilemeyen yuzdelik rakami)\",\r\n      value: badDebtAmount,\r\n      valueType: \"currency\",\r\n    },\r\n    {\r\n      no: \"6\",\r\n      desc: \"Giderlerin Sapma Yuzdeligi (%... Olarak Hesaplanabilir)\",\r\n      value: inflation?.expenseDeviationPct,\r\n      valueType: \"percent\",\r\n    },\r\n    {\r\n      no: \"7\",\r\n      desc: \"Burs ve Indirim Giderleri (Fizibilite-G71)\",\r\n      value: scholarshipDiscountCostTotal,\r\n      valueType: \"currency\",\r\n    },\r\n    {\r\n      no: \"\",\r\n      desc: \"Ogrenci Basina Maliyet (Tum Giderler (Parametre 4 / Planlanan Ogrenci Sayisi))\",\r\n      value: perStudentCost,\r\n      valueType: \"currency\",\r\n    },\r\n    {\r\n      no: \"8\",\r\n      desc: \"Rakip Kurumlarin Analizi (VAR / YOK)\",\r\n      value: competitorHasData ? \"VAR\" : \"YOK\",\r\n    },\r\n    {\r\n      no: \"\",\r\n      desc: \"Planlanan Donem Egitim Ucretleri Artis Orani\",\r\n      value: plannedRaiseAvg,\r\n      valueType: \"percent\",\r\n    },\r\n    {\r\n      no: \"9\",\r\n      desc:\r\n        \"Yerel Mevzuatta uygunluk (yasal azami artis, Protokol Sinirliliklari, Son 3 yilin resmi enflasyon orn.)\",\r\n      value: null,\r\n    },\r\n    { no: \"10\", desc: \"Mevcut Egitim Sezonu Ucreti (ortalama)\", value: currentSeasonAvgFeeUsd, valueType: \"currency\" },\r\n    { no: \"\", desc: \"Nihai Ucret\", value: finalFeeUsd, valueType: \"currency\" },\r\n  ];\r\n\r\n  const detailedExpenses = (() => {\r\n    const rows = [\r\n      { name: \"IK Giderleri (Turk Personel)\", amount: hrTurkCost, targetPct: 0.15 },\r\n      { name: \"IK (Yerel Personel)\", amount: hrYerelCost, targetPct: 0.45 },\r\n      {\r\n        name: \"Isletme Giderleri\",\r\n        amount: isletmeGiderleriInputsOnlyUsd,\r\n      },\r\n      { name: \"Yemek (Ogrenci Yemegi)\", amount: serviceCosts.yemek },\r\n      { name: \"Uniforma\", amount: serviceCosts.uniforma },\r\n      { name: \"Kitap- Kirtasiye\", amount: serviceCosts.kitapKirtasiye },\r\n      { name: \"Ogrenci Servisi\", amount: serviceCosts.ulasimServis },\r\n      { name: \"Yurt Giderleri\", amount: dormCosts.total },\r\n      { name: \"Indirimler\", amount: discountsTotalCost, targetPct: 0.08 },\r\n      { name: \"Burslar\", amount: scholarshipsTotalCost, targetPct: 0.05 },\r\n      { name: \"Tahsil Edilemeyecek Gelirler\", amount: badDebtAmount, targetPct: 0.02 },\r\n    ];\r\n    const rowsSum = rows.reduce((sum, r) => (Number.isFinite(Number(r.amount)) ? sum + Number(r.amount) : sum), 0);\r\n    const total = rowsSum;\r\n    return rows.map((r) => ({\r\n      ...r,\r\n      ratio: Number.isFinite(Number(r.amount)) && total ? safeDiv(r.amount, total) : null,\r\n    }));\r\n  })();\r\n\r\n  const localCurrencyCode =\r\n    currencyMeta?.local_currency_code || prevCurrencyMeta?.local_currency_code || null;\r\n  const performanceMeta = {\r\n    realized_fx_usd_to_local: perfRealizedFxValid ? perfRealizedFx : null,\r\n    planned_fx_usd_to_local: plannedFxForLocal > 0 ? plannedFxForLocal : null,\r\n    local_currency_code: localCurrencyCode,\r\n  };\r\n\r\n  return {\r\n    currencyCode: \"USD\",\r\n    headerLabel,\r\n    academicStartYear: baseYear,\r\n    programType: programTypeLabel,\r\n    periodStartDate: okulEgitim?.egitimBaslamaTarihi || \"\",\r\n    schoolCapacity,\r\n    currentStudents,\r\n    compulsoryEducation: okulEgitim?.zorunluEgitimDonemleri || \"\",\r\n    lessonDuration: okulEgitim?.birDersSuresiDakika ?? null,\r\n    dailyLessonHours: okulEgitim?.gunlukDersSaati ?? null,\r\n    weeklyLessonHours: okulEgitim?.haftalikDersSaatiToplam ?? null,\r\n    shiftSystem,\r\n    teacherWeeklyHoursAvg: okulEgitim?.ogretmenHaftalikDersOrt ?? null,\r\n    classroomUtilization,\r\n    transitionExamInfo: okulEgitim?.gecisSinaviBilgisi || \"\",\r\n    tuitionTable,\r\n    parameters,\r\n    capacity: {\r\n      buildingCapacity: schoolCapacity,\r\n      currentStudents,\r\n      plannedStudents,\r\n      plannedUtilization,\r\n      plannedBranches,\r\n      totalBranches: totalBranchesCurrent,\r\n      usedBranches: totalBranchesCurrent,\r\n      avgStudentsPerClass: safeDiv(currentStudents, totalBranchesCurrent),\r\n      avgStudentsPerClassPlanned,\r\n    },\r\n    hr: hrRows,\r\n    revenues: revenueRows,\r\n    revenuesMeta: {\r\n      nonEducationBreakdown,\r\n      otherIncomeBreakdown,\r\n    },\r\n    expenses: expenseRows,\r\n    scholarships,\r\n    discounts,\r\n    discountAnalysis,\r\n    performance: performanceRows,\r\n    performanceMeta,\r\n    competitors: competitorRows,\r\n    revenuesDetailed,\r\n    revenuesDetailedTotal,\r\n    revenueTotal,\r\n    expenseTotal,\r\n    netTotal,\r\n    avgTuition,\r\n    margin,\r\n    parametersMeta: {\r\n      expenseDeviationPct: inflation?.expenseDeviationPct,\r\n      currentSeasonAvgFeeUsd,\r\n      perStudentCost,\r\n      plannedRaiseAvg,\r\n      scholarshipsAndDiscountsTotal: scholarshipDiscountCostTotal,\r\n      uncollectableRevenuePct,\r\n      uncollectableExpenseAmount,\r\n      inflationHistory,\r\n      inflationYears,\r\n      inflationBaseYear: baseYear,\r\n      competitorStatus: competitorHasData ? \"VAR\" : \"YOK\",\r\n      finalFeeUsd,\r\n      // detailed expense view helpers\r\n      serviceCosts,\r\n      dormCosts,\r\n      hrTurkCost,\r\n      hrYerelCost,\r\n      detailedExpenses,\r\n      detailedExpenseTotal: detailedExpenses.reduce(\r\n        (sum, r) => (Number.isFinite(Number(r.amount)) ? sum + Number(r.amount) : sum),\r\n        0\r\n      ),\r\n      discountAnalysis,\r\n    },\r\n  };\r\n}\r\n","// frontend/src/components/DetailedReportView.jsx\r\n\r\nimport React, { useCallback, useMemo } from \"react\";\r\n\r\nimport { getProgramType, isKademeKeyVisible } from \"../utils/programType\";\r\n\r\nimport { buildDetailedReportModel } from \"../utils/buildDetailedReportModel\";\r\n\r\nfunction isFiniteNumber(v) {\r\n  const n = Number(v);\r\n\r\n  return Number.isFinite(n);\r\n}\r\n\r\nfunction fmtNumber(v, opts = {}) {\r\n  if (!isFiniteNumber(v)) return \"\";\r\n\r\n  const n = Number(v);\r\n\r\n  const {\r\n    maximumFractionDigits = 0,\r\n\r\n    minimumFractionDigits = 0,\r\n\r\n    style,\r\n\r\n    currency,\r\n  } = opts;\r\n\r\n  try {\r\n    return new Intl.NumberFormat(\"tr-TR\", {\r\n      maximumFractionDigits,\r\n\r\n      minimumFractionDigits,\r\n\r\n      style,\r\n\r\n      currency,\r\n    }).format(n);\r\n  } catch {\r\n    return String(n);\r\n  }\r\n}\r\n\r\nfunction fmtMoney(v, currency) {\r\n  if (!isFiniteNumber(v)) return \"\";\r\n\r\n  const code = String(currency || \"\").trim();\r\n\r\n  if (code) {\r\n    return fmtNumber(v, {\r\n      style: \"currency\",\r\n\r\n      currency: code,\r\n\r\n      maximumFractionDigits: 0,\r\n    });\r\n  }\r\n\r\n  return fmtNumber(v, { maximumFractionDigits: 0 });\r\n}\r\n\r\nfunction fmtPct(v, digits = 2) {\r\n  if (!isFiniteNumber(v)) return \"\";\r\n\r\n  return (\r\n    fmtNumber(Number(v) * 100, {\r\n      maximumFractionDigits: digits,\r\n\r\n      minimumFractionDigits: 0,\r\n    }) + \"%\"\r\n  );\r\n}\r\n\r\nconst NUM_CELL_STYLE = { textAlign: \"right\" };\r\n\r\nfunction fmtInt(v) {\r\n  if (!isFiniteNumber(v)) return \"\";\r\n\r\n  return fmtNumber(v, { maximumFractionDigits: 0, minimumFractionDigits: 0 });\r\n}\r\n\r\nfunction formatTuitionRow(row, formatMoney) {\r\n  if (!row || typeof row !== \"object\") return row;\r\n\r\n  return {\r\n    ...row,\r\n\r\n    edu: isFiniteNumber(row.edu) ? formatMoney(row.edu) : (row.edu ?? \"\"),\r\n\r\n    uniform: isFiniteNumber(row.uniform)\r\n      ? formatMoney(row.uniform)\r\n      : (row.uniform ?? \"\"),\r\n\r\n    books: isFiniteNumber(row.books)\r\n      ? formatMoney(row.books)\r\n      : (row.books ?? \"\"),\r\n\r\n    transport: isFiniteNumber(row.transport)\r\n      ? formatMoney(row.transport)\r\n      : (row.transport ?? \"\"),\r\n\r\n    meal: isFiniteNumber(row.meal) ? formatMoney(row.meal) : (row.meal ?? \"\"),\r\n\r\n    raisePct: isFiniteNumber(row.raisePct)\r\n      ? fmtPct(row.raisePct, 0)\r\n      : (row.raisePct ?? \"\"),\r\n\r\n    total: isFiniteNumber(row.total)\r\n      ? formatMoney(row.total)\r\n      : (row.total ?? \"\"),\r\n  };\r\n}\r\n\r\nfunction formatAmountRatioRow(row, formatMoney) {\r\n  if (!row || typeof row !== \"object\") return row;\r\n\r\n  return {\r\n    ...row,\r\n\r\n    amount: isFiniteNumber(row.amount)\r\n      ? formatMoney(row.amount)\r\n      : (row.amount ?? \"\"),\r\n\r\n    ratio: isFiniteNumber(row.ratio)\r\n      ? fmtPct(row.ratio, 0)\r\n      : (row.ratio ?? \"\"),\r\n  };\r\n}\r\n\r\nfunction formatScholarshipRow(row, formatMoney) {\r\n  if (!row || typeof row !== \"object\") return row;\r\n\r\n  return {\r\n    ...row,\r\n\r\n    cur: isFiniteNumber(row.cur) ? fmtInt(row.cur) : (row.cur ?? \"\"),\r\n\r\n    planned: isFiniteNumber(row.planned)\r\n      ? fmtInt(row.planned)\r\n      : (row.planned ?? \"\"),\r\n\r\n    cost: isFiniteNumber(row.cost) ? formatMoney(row.cost) : (row.cost ?? \"\"),\r\n  };\r\n}\r\n\r\nconst LEVEL_VARIANT_BASES = [\r\n  { key: \"okulOncesi\", match: \"okul oncesi\" },\r\n\r\n  { key: \"ilkokul\", match: \"ilkokul\" },\r\n\r\n  { key: \"ortaokul\", match: \"ortaokul\" },\r\n\r\n  { key: \"lise\", match: \"lise\" },\r\n];\r\n\r\nfunction normalizeString(value) {\r\n  return String(value || \"\")\r\n    .normalize(\"NFD\")\r\n\r\n    .replace(/[\\u0300-\\u036f]/g, \"\")\r\n\r\n    .replace(/[^a-z0-9 ]/gi, \" \")\r\n\r\n    .toLowerCase();\r\n}\r\n\r\nfunction inferTuitionVariantKey(row) {\r\n  const explicitKey = String(row?.key || \"\").trim();\r\n\r\n  if (explicitKey) return explicitKey;\r\n\r\n  const label = normalizeString(row?.level);\r\n\r\n  if (!label) return null;\r\n\r\n  for (const def of LEVEL_VARIANT_BASES) {\r\n    if (label.includes(def.match)) {\r\n      if (def.key === \"okulOncesi\") return \"okulOncesi\";\r\n\r\n      if (label.includes(\"yerel\")) return `${def.key}Yerel`;\r\n\r\n      if (label.includes(\"int\") || label.includes(\"international\"))\r\n        return `${def.key}Int`;\r\n\r\n      return null;\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nfunction isTuitionRowVisible(row, programType) {\r\n  const variantKey = inferTuitionVariantKey(row);\r\n\r\n  if (!variantKey) return true;\r\n\r\n  return isKademeKeyVisible(variantKey, programType);\r\n}\r\n\r\nfunction Section({ title, children, subtitle }) {\r\n  return (\r\n    <div className=\"card\" style={{ marginTop: 12 }}>\r\n      <div style={{ fontWeight: 900, marginBottom: 6 }}>{title}</div>\r\n\r\n      {subtitle ? (\r\n        <div className=\"small\" style={{ marginBottom: 10 }}>\r\n          {subtitle}\r\n        </div>\r\n      ) : null}\r\n\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction SimpleTable({ columns, rows }) {\r\n  return (\r\n    <table className=\"table\" style={{ width: \"100%\" }}>\r\n      <thead>\r\n        <tr>\r\n          {columns.map((c) => (\r\n            <th key={c.key} style={c.thStyle}>\r\n              {c.label}\r\n            </th>\r\n          ))}\r\n        </tr>\r\n      </thead>\r\n\r\n      <tbody>\r\n        {rows.length ? (\r\n          rows.map((r, idx) => (\r\n            <tr key={r.key || idx}>\r\n              {columns.map((c) => (\r\n                <td key={c.key} style={c.tdStyle}>\r\n                  {r[c.key]}\r\n                </td>\r\n              ))}\r\n            </tr>\r\n          ))\r\n        ) : (\r\n          <tr>\r\n            <td colSpan={columns.length} className=\"small\">\r\n              Veri yok.\r\n            </td>\r\n          </tr>\r\n        )}\r\n      </tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\nfunction Kpi({ label, value, hint }) {\r\n  return (\r\n    <div\r\n      style={{\r\n        padding: 12,\r\n\r\n        borderRadius: 12,\r\n\r\n        border: \"1px solid rgba(0,0,0,0.08)\",\r\n      }}\r\n    >\r\n      <div className=\"small\" style={{ opacity: 0.8, marginBottom: 6 }}>\r\n        {label}\r\n      </div>\r\n\r\n      <div style={{ fontWeight: 900, fontSize: 18, lineHeight: 1.15 }}>\r\n        {value}\r\n      </div>\r\n\r\n      {hint ? (\r\n        <div className=\"small\" style={{ opacity: 0.75, marginTop: 6 }}>\r\n          {hint}\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n\r\n * Detayl Rapor (Excel: RAPOR sayfas)\r\n\r\n *\r\n\r\n * mode:\r\n\r\n *  - \"detailed\": Excel RAPOR sayfas iskeleti (A-F)\r\n\r\n *  - \"onepager\": Tek sayfa zet (ynetici gzyle ksa)\r\n\r\n */\r\n\r\nexport default function DetailedReportView(props) {\r\n  const {\r\n    school,\r\n\r\n    scenario,\r\n\r\n    mode = \"detailed\",\r\n\r\n    // ileride veri baglamak i??n simdiden aliyoruz (simdilik opsiyonel)\r\n\r\n    inputs,\r\n\r\n    report,\r\n\r\n    prevReport,\r\n    prevCurrencyMeta,\r\n    programType: programTypeProp,\r\n\r\n    reportCurrency = \"usd\",\r\n\r\n    currencyMeta,\r\n  } = props || {};\r\n\r\n  const model = useMemo(\r\n    () =>\r\n      buildDetailedReportModel({\r\n        school,\r\n\r\n        scenario,\r\n\r\n        inputs,\r\n\r\n        report,\r\n\r\n        prevReport,\r\n        prevCurrencyMeta,\r\n        currencyMeta,\r\n        programType: programTypeProp,\r\n      }),\r\n\r\n    [\r\n      school,\r\n      scenario,\r\n      inputs,\r\n      report,\r\n      prevReport,\r\n      prevCurrencyMeta,\r\n      currencyMeta,\r\n      programTypeProp,\r\n    ],\r\n  );\r\n\r\n  const activeProgramType = useMemo(\r\n    () => programTypeProp || getProgramType(inputs, scenario),\r\n\r\n    [programTypeProp, inputs, scenario],\r\n  );\r\n\r\n  const header = useMemo(() => {\r\n    if (model.headerLabel) return model.headerLabel;\r\n\r\n    const schoolName = school?.name || school?.school_name || \"Okul\";\r\n\r\n    const year = scenario?.academic_year || \"\";\r\n\r\n    const scenarioName = scenario?.name || \"\";\r\n\r\n    const parts = [schoolName, scenarioName, year].filter(Boolean);\r\n\r\n    return parts.join(\"  \");\r\n  }, [model.headerLabel, school, scenario]);\r\n\r\n  const currencyCode = model.currencyCode || \"USD\";\r\n\r\n  const fx = Number(currencyMeta?.fx_usd_to_local || 0);\r\n\r\n  const canShowLocal =\r\n    currencyMeta?.input_currency === \"LOCAL\" &&\r\n    fx > 0 &&\r\n    currencyMeta?.local_currency_code;\r\n\r\n  const showLocal = reportCurrency === \"local\" && canShowLocal;\r\n\r\n  const localLabel = currencyMeta?.local_currency_code || \"LOCAL\";\r\n\r\n  const displayCurrencyCode = showLocal ? localLabel : currencyCode;\r\n\r\n  const displayMoney = useCallback(\r\n    (v) => {\r\n      const n = Number(v);\r\n\r\n      if (!Number.isFinite(n)) return v;\r\n\r\n      return showLocal ? n * fx : n;\r\n    },\r\n\r\n    [showLocal, fx],\r\n  );\r\n\r\n  const fmtMoneyDisplay = useCallback(\r\n    (v) => fmtMoney(displayMoney(v), displayCurrencyCode),\r\n\r\n    [displayMoney, displayCurrencyCode],\r\n  );\r\n  const perfMeta = model.performanceMeta || {};\r\n  const realFx = Number(perfMeta.realized_fx_usd_to_local || 0);\r\n  const planFx = Number(perfMeta.planned_fx_usd_to_local || 0);\r\n  const perfLocalCode = perfMeta.local_currency_code || localLabel || \"LOCAL\";\r\n  const realFxValid = realFx > 0;\r\n  const planFxValid = planFx > 0;\r\n  const showLocalPerf = showLocal;\r\n  const localPerfFxForPlanned =\r\n    showLocalPerf && (planFxValid ? planFx : realFxValid ? realFx : null);\r\n  const localPerfFxForActual = showLocalPerf && realFxValid ? realFx : null;\r\n  const perfCurrencyCodePlanned = showLocalPerf ? perfLocalCode : currencyCode;\r\n  const perfCurrencyCodeActual = showLocalPerf ? localLabel : currencyCode;\r\n  const plannedFxMissing = showLocalPerf && !localPerfFxForPlanned;\r\n  const actualFxMissing = showLocalPerf && !localPerfFxForActual;\r\n\r\n  const fmtPerfPlannedMoneyDisplay = useCallback(\r\n    (value) => {\r\n      const n = Number(value);\r\n      if (!Number.isFinite(n)) return \"\";\r\n      if (showLocalPerf) {\r\n        if (!localPerfFxForPlanned) return \"\";\r\n        return fmtMoney(n * localPerfFxForPlanned, perfCurrencyCodePlanned);\r\n      }\r\n      return fmtMoney(n, perfCurrencyCodePlanned);\r\n    },\r\n    [showLocalPerf, localPerfFxForPlanned, perfCurrencyCodePlanned],\r\n  );\r\n\r\n  const fmtPerfActualMoneyDisplay = useCallback(\r\n    (value) => {\r\n      const n = Number(value);\r\n      if (!Number.isFinite(n)) return \"\";\r\n      if (showLocalPerf) {\r\n        if (!localPerfFxForActual) return \"\";\r\n        return fmtMoney(n * localPerfFxForActual, perfCurrencyCodeActual);\r\n      }\r\n      return fmtMoney(n, perfCurrencyCodeActual);\r\n    },\r\n    [showLocalPerf, localPerfFxForActual, perfCurrencyCodeActual],\r\n  );\r\n\r\n  const perfWarningText =\r\n    showLocalPerf && (plannedFxMissing || actualFxMissing)\r\n      ? \"nceki dnem USD karlatrmas iin ortalama kur girilmelidir.\"\r\n      : null;\r\n  const fmtMoneyKpi = useCallback(\r\n    (value) => {\r\n      const n = Number(value);\r\n      if (!Number.isFinite(n)) return \"?\";\r\n      if (reportCurrency === \"local\" && canShowLocal) {\r\n        return fmtMoney(n * fx, localLabel);\r\n      }\r\n      return fmtMoney(n, currencyCode);\r\n    },\r\n    [reportCurrency, canShowLocal, fx, localLabel, currencyCode],\r\n  );\r\n\r\n  // ------------------ Detailed (Excel-like) model rows ------------------\r\n\r\n  const educationInfoRows = useMemo(\r\n    () =>\r\n      [\r\n        {\r\n          k: \"Eitim retim Dneminin Balama Tarihi\",\r\n          v: model.periodStartDate || \"\",\r\n        },\r\n\r\n        {\r\n          k: \"Okul Kapasitesi\",\r\n\r\n          v: isFiniteNumber(model.schoolCapacity)\r\n            ? fmtNumber(model.schoolCapacity)\r\n            : \"\",\r\n        },\r\n\r\n        {\r\n          k: \"Mevcut renci Says\",\r\n\r\n          v: isFiniteNumber(model.currentStudents)\r\n            ? fmtNumber(model.currentStudents)\r\n            : \"\",\r\n        },\r\n\r\n        { k: \"Zorunlu Eitim Dnemleri\", v: model.compulsoryEducation || \"\" },\r\n\r\n        { k: \"Bir Ders Sresi\", v: model.lessonDuration || \"\" },\r\n\r\n        { k: \"Gnlk Ders Saati\", v: model.dailyLessonHours || \"\" },\r\n\r\n        {\r\n          k: \"Haftalk Ders Saati Toplam (Bir Snfn)\",\r\n\r\n          v: model.weeklyLessonHours || \"\",\r\n        },\r\n\r\n        {\r\n          k: \"Okulda Sabah / lenci Uygulamas\",\r\n          v: model.shiftSystem || \"\",\r\n        },\r\n\r\n        {\r\n          k: \"retmen Haftalk Ders Saati Ortalamas\",\r\n\r\n          v: model.teacherWeeklyHoursAvg || \"\",\r\n        },\r\n\r\n        {\r\n          k: \"Fiili Derslik Kullanm Yzdelii (renci says/snf says)\",\r\n\r\n          v: isFiniteNumber(model.classroomUtilization)\r\n            ? fmtNumber(model.classroomUtilization, {\r\n              maximumFractionDigits: 2,\r\n            })\r\n            : \"\",\r\n        },\r\n\r\n        {\r\n          k: \"Kademeler Arasnda Gei Snav (Varsa) Bilgileri\",\r\n\r\n          v: model.transitionExamInfo || \"\",\r\n        },\r\n\r\n        {\r\n          k: \"Okulda Uygulanan Program (ulusal, uluslararas)\",\r\n          v: model.programType || \"\",\r\n        },\r\n      ].map((x, i) => ({ key: String(i), ...x })),\r\n\r\n    [model],\r\n  );\r\n\r\n  const tuitionRows = useMemo(() => {\r\n    const base = model.tuitionTable || [];\r\n\r\n    if (Array.isArray(base) && base.length) return base;\r\n\r\n    // Excel'deki varsaylan satr iskeleti\r\n\r\n    return [\r\n      {\r\n        level: \"Okul ncesi\",\r\n\r\n        edu: \"\",\r\n\r\n        uniform: \"\",\r\n\r\n        books: \"\",\r\n\r\n        transport: \"\",\r\n\r\n        meal: \"\",\r\n\r\n        raisePct: \"\",\r\n\r\n        total: \"\",\r\n      },\r\n\r\n      {\r\n        level: \"lkokul - YEREL\",\r\n\r\n        edu: \"\",\r\n\r\n        uniform: \"\",\r\n\r\n        books: \"\",\r\n\r\n        transport: \"\",\r\n\r\n        meal: \"\",\r\n\r\n        raisePct: \"\",\r\n\r\n        total: \"\",\r\n      },\r\n\r\n      {\r\n        level: \"lkokul - INT.\",\r\n\r\n        edu: \"\",\r\n\r\n        uniform: \"\",\r\n\r\n        books: \"\",\r\n\r\n        transport: \"\",\r\n\r\n        meal: \"\",\r\n\r\n        raisePct: \"\",\r\n\r\n        total: \"\",\r\n      },\r\n\r\n      {\r\n        level: \"Ortaokul - YEREL\",\r\n\r\n        edu: \"\",\r\n\r\n        uniform: \"\",\r\n\r\n        books: \"\",\r\n\r\n        transport: \"\",\r\n\r\n        meal: \"\",\r\n\r\n        raisePct: \"\",\r\n\r\n        total: \"\",\r\n      },\r\n\r\n      {\r\n        level: \"Ortaokul - INT.\",\r\n\r\n        edu: \"\",\r\n\r\n        uniform: \"\",\r\n\r\n        books: \"\",\r\n\r\n        transport: \"\",\r\n\r\n        meal: \"\",\r\n\r\n        raisePct: \"\",\r\n\r\n        total: \"\",\r\n      },\r\n\r\n      {\r\n        level: \"Lise - YEREL\",\r\n\r\n        edu: \"\",\r\n\r\n        uniform: \"\",\r\n\r\n        books: \"\",\r\n\r\n        transport: \"\",\r\n\r\n        meal: \"\",\r\n\r\n        raisePct: \"\",\r\n\r\n        total: \"\",\r\n      },\r\n\r\n      {\r\n        level: \"Lise - INT.\",\r\n\r\n        edu: \"\",\r\n\r\n        uniform: \"\",\r\n\r\n        books: \"\",\r\n\r\n        transport: \"\",\r\n\r\n        meal: \"\",\r\n\r\n        raisePct: \"\",\r\n\r\n        total: \"\",\r\n      },\r\n\r\n      {\r\n        level: \"TOPLAM\",\r\n\r\n        edu: \"\",\r\n\r\n        uniform: \"\",\r\n\r\n        books: \"\",\r\n\r\n        transport: \"\",\r\n\r\n        meal: \"\",\r\n\r\n        raisePct: \"\",\r\n\r\n        total: \"\",\r\n      },\r\n\r\n      {\r\n        level: \"ORTALAMA CRET\",\r\n\r\n        edu: \"\",\r\n\r\n        uniform: \"\",\r\n\r\n        books: \"\",\r\n\r\n        transport: \"\",\r\n\r\n        meal: \"\",\r\n\r\n        raisePct: \"\",\r\n\r\n        total: \"\",\r\n      },\r\n    ];\r\n  }, [model]);\r\n\r\n  const filteredTuitionRows = useMemo(\r\n    () =>\r\n      tuitionRows.filter((row) => isTuitionRowVisible(row, activeProgramType)),\r\n\r\n    [tuitionRows, activeProgramType],\r\n  );\r\n\r\n  const formattedTuitionRows = useMemo(\r\n    () =>\r\n      filteredTuitionRows.map((row) => formatTuitionRow(row, fmtMoneyDisplay)),\r\n\r\n    [filteredTuitionRows, fmtMoneyDisplay],\r\n  );\r\n\r\n  const paramsRows = useMemo(() => {\r\n    const base = model.parameters || [];\r\n\r\n    if (Array.isArray(base) && base.length) return base;\r\n\r\n    return [\r\n      {\r\n        no: \"1\",\r\n        desc: \"Planlanan Dnem Kapasite Kullanm Oran (%)\",\r\n        value: \"\",\r\n      },\r\n\r\n      {\r\n        no: \"2\",\r\n        desc: \"nsan Kaynaklar Planlamas (Trk + Yerel + International)\",\r\n        value: \"\",\r\n      },\r\n\r\n      { no: \"3\", desc: \"Gelir Planlamas\", value: \"\" },\r\n\r\n      { no: \"4\", desc: \"Gider Planlamas\", value: \"\" },\r\n\r\n      { no: \"\", desc: \"Gelir - Gider Fark\", value: \"\" },\r\n\r\n      {\r\n        no: \"5\",\r\n\r\n        desc: \"Tahsil Edilemeyecek Gelirler (nceki Dnemin Tahsil Edilemeyen yzdelik rakam)\",\r\n\r\n        value: \"\",\r\n      },\r\n\r\n      {\r\n        no: \"6\",\r\n        desc: \"Giderlerin Sapma Yzdelii (%... Olarak Hesaplanabilir)\",\r\n        value: \"\",\r\n      },\r\n\r\n      {\r\n        no: \"7\",\r\n        desc: \"Burs ve ndirim Giderleri (Fizibilite-G71)\",\r\n        value: \"\",\r\n      },\r\n\r\n      {\r\n        no: \"\",\r\n\r\n        desc: \"renci Bana Maliyet (Tm Giderler (Parametre 4 / Planlanan renci Says))\",\r\n\r\n        value: \"\",\r\n      },\r\n\r\n      { no: \"8\", desc: \"Rakip Kurumlarn Analizi (VAR / YOK)\", value: \"\" },\r\n\r\n      {\r\n        no: \"\",\r\n        desc: \"Planlanan Dnem Eitim cretleri Art Oran\",\r\n        value: \"\",\r\n      },\r\n\r\n      {\r\n        no: \"9\",\r\n\r\n        desc: \"Yerel Mevzuatta uygunluk (yasal azami art, Protokol Snrllklar, Son 3 yln resmi enflasyon orn.)\",\r\n\r\n        value: \"\",\r\n      },\r\n\r\n      { no: \"10\", desc: \"Mevcut Eitim Sezonu creti (ortalama)\", value: \"\" },\r\n\r\n      { no: \"\", desc: \"Nihai cret\", value: \"\" },\r\n    ];\r\n  }, [model.parameters]);\r\n\r\n  const formatParamValue = useCallback(\r\n    (param) => {\r\n      if (!param) return \"\";\r\n\r\n      const { value, valueType } = param;\r\n\r\n      if (typeof value === \"string\" && !valueType) return value;\r\n\r\n      if (value == null) return \"\";\r\n\r\n      switch (valueType) {\r\n        case \"percent\":\r\n          return fmtPct(value);\r\n\r\n        case \"currency\":\r\n          return fmtMoneyDisplay(value);\r\n\r\n        case \"number\":\r\n          return fmtNumber(value);\r\n\r\n        default:\r\n          return typeof value === \"string\"\r\n            ? value\r\n            : isFiniteNumber(value)\r\n              ? fmtNumber(value)\r\n              : \"\";\r\n      }\r\n    },\r\n    [fmtMoneyDisplay],\r\n  );\r\n\r\n  const PARAM_HEADER_CELLS = [\r\n    { key: \"no\", label: \"#\", colSpan: 1, thStyle: { width: 40 } },\r\n\r\n    { key: \"desc\", label: \"Parametre\", colSpan: 4 },\r\n\r\n    {\r\n      key: \"value\",\r\n      label: \"Veri\",\r\n      colSpan: 1,\r\n      thStyle: { width: 220, textAlign: \"right\" },\r\n    },\r\n  ];\r\n\r\n  const inflationYearsMeta = model.parametersMeta?.inflationYears;\r\n\r\n  const inflationHistory = useMemo(\r\n    () => model.parametersMeta?.inflationHistory || {},\r\n    [model.parametersMeta?.inflationHistory],\r\n  );\r\n\r\n  const inflationBaseYear = Number(model.parametersMeta?.inflationBaseYear);\r\n\r\n  const inflationYearRows = useMemo(() => {\r\n    if (Array.isArray(inflationYearsMeta) && inflationYearsMeta.length === 3) {\r\n      return inflationYearsMeta.map((item) => ({\r\n        year: Number.isFinite(item?.year) ? Number(item.year) : null,\r\n\r\n        value: item?.value,\r\n      }));\r\n    }\r\n\r\n    if (Number.isFinite(inflationBaseYear)) {\r\n      const base = inflationBaseYear;\r\n\r\n      const years = [base - 3, base - 2, base - 1];\r\n\r\n      return years.map((year) => ({\r\n        year,\r\n\r\n        value: inflationHistory[`y${year}`],\r\n      }));\r\n    }\r\n\r\n    return [];\r\n  }, [inflationYearsMeta, inflationHistory, inflationBaseYear]);\r\n\r\n  const inflationYearLabels = inflationYearRows.map((item) =>\r\n    item.year ? `${item.year} yl oran` : \"\",\r\n  );\r\n\r\n  const inflationYearValues = inflationYearRows.map((item) => item.value);\r\n\r\n  const paramTableRows = useMemo(() => {\r\n    const rows = [];\r\n\r\n    const pushRow = (row, idx) => {\r\n      rows.push({\r\n        key: row.key || `param-${idx}`,\r\n\r\n        cells: [\r\n          { content: row.no, colSpan: 1 },\r\n\r\n          { content: row.desc, colSpan: 4 },\r\n\r\n          { content: formatParamValue(row), colSpan: 1, align: \"right\" },\r\n        ],\r\n      });\r\n    };\r\n\r\n    paramsRows.forEach((row, idx) => {\r\n      pushRow(row, idx);\r\n\r\n      if (String(row.no || \"\") === \"9\") {\r\n        rows.push({\r\n          key: \"param-inflation-head\",\r\n\r\n          cells: [\r\n            { content: \"\", colSpan: 1 },\r\n\r\n            { content: \"Son 3 Yln Resmi Enflasyon Oranlar\", colSpan: 1 },\r\n\r\n            { content: inflationYearLabels[0], colSpan: 1, align: \"center\" },\r\n\r\n            { content: inflationYearLabels[1], colSpan: 1, align: \"center\" },\r\n\r\n            { content: inflationYearLabels[2], colSpan: 1, align: \"center\" },\r\n\r\n            { content: \"\", colSpan: 1 },\r\n          ],\r\n        });\r\n\r\n        rows.push({\r\n          key: \"param-inflation-values\",\r\n\r\n          cells: [\r\n            { content: \"\", colSpan: 1 },\r\n\r\n            { content: \"\", colSpan: 1 },\r\n\r\n            {\r\n              content: formatParamValue({\r\n                value: inflationYearValues[0],\r\n                valueType: \"percent\",\r\n              }),\r\n              colSpan: 1,\r\n              align: \"center\",\r\n            },\r\n\r\n            {\r\n              content: formatParamValue({\r\n                value: inflationYearValues[1],\r\n                valueType: \"percent\",\r\n              }),\r\n              colSpan: 1,\r\n              align: \"center\",\r\n            },\r\n\r\n            {\r\n              content: formatParamValue({\r\n                value: inflationYearValues[2],\r\n                valueType: \"percent\",\r\n              }),\r\n              colSpan: 1,\r\n              align: \"center\",\r\n            },\r\n\r\n            { content: \"\", colSpan: 1 },\r\n          ],\r\n        });\r\n      }\r\n    });\r\n\r\n    return rows;\r\n  }, [paramsRows, inflationYearLabels, inflationYearValues, formatParamValue]);\r\n\r\n  const capacityStudentRows = useMemo(() => {\r\n    const v = model.capacity || {};\r\n\r\n    return [\r\n      {\r\n        k: \"Bina renci Kapasitesi\",\r\n\r\n        v: isFiniteNumber(v.buildingCapacity)\r\n          ? fmtNumber(v.buildingCapacity)\r\n          : \"\",\r\n      },\r\n\r\n      {\r\n        k: \"Mevcut renci Says\",\r\n\r\n        v: isFiniteNumber(v.currentStudents)\r\n          ? fmtNumber(v.currentStudents)\r\n          : \"\",\r\n      },\r\n\r\n      {\r\n        k: \"Planlanan renci Says\",\r\n\r\n        v: isFiniteNumber(v.plannedStudents)\r\n          ? fmtNumber(v.plannedStudents)\r\n          : \"\",\r\n      },\r\n\r\n      {\r\n        k: \"Planlanan Kapasite Kullanm %\",\r\n\r\n        v: isFiniteNumber(v.plannedUtilization)\r\n          ? fmtPct(v.plannedUtilization, 2)\r\n          : \"\",\r\n      },\r\n    ];\r\n  }, [model]);\r\n\r\n  const capacityClassRows = useMemo(() => {\r\n    const v = model.capacity || {};\r\n\r\n    const plannedAvg =\r\n      isFiniteNumber(v.plannedStudents) &&\r\n        isFiniteNumber(v.plannedBranches) &&\r\n        Number(v.plannedBranches) !== 0\r\n        ? Number(v.plannedStudents) / Number(v.plannedBranches)\r\n        : v.avgStudentsPerClassPlanned;\r\n\r\n    return [\r\n      {\r\n        k: \"Binadaki Toplam ube (Derslik) Says\",\r\n\r\n        v: isFiniteNumber(v.totalBranches) ? fmtNumber(v.totalBranches) : \"\",\r\n      },\r\n\r\n      {\r\n        k: \"Mevcut Dnemde Kullanlan ube (Derslik) Says\",\r\n\r\n        v: isFiniteNumber(v.usedBranches) ? fmtNumber(v.usedBranches) : \"\",\r\n      },\r\n\r\n      {\r\n        k: \"Planlanan ube (Derslik) Says\",\r\n\r\n        v: isFiniteNumber(v.plannedBranches)\r\n          ? fmtNumber(v.plannedBranches)\r\n          : \"\",\r\n      },\r\n\r\n      {\r\n        k: \"Snf Bana Den Ort. renci Says\",\r\n\r\n        v: isFiniteNumber(plannedAvg)\r\n          ? fmtNumber(plannedAvg, { maximumFractionDigits: 2 })\r\n          : \"\",\r\n      },\r\n    ];\r\n  }, [model]);\r\n\r\n  const hrRows = useMemo(() => {\r\n    const base = model.hr || [];\r\n\r\n    if (Array.isArray(base) && base.length) return base;\r\n\r\n    return [\r\n      {\r\n        item: \"Trk Personel Ynetici ve Eitimci Says\",\r\n        current: \"\",\r\n        planned: \"\",\r\n      },\r\n\r\n      {\r\n        item: \"Trk Personel Temsilcilik Personeli Says\",\r\n        current: \"\",\r\n        planned: \"\",\r\n      },\r\n\r\n      {\r\n        item: \"Yerel Kadrolu Eitimci Personel Says\",\r\n        current: \"\",\r\n        planned: \"\",\r\n      },\r\n\r\n      {\r\n        item: \"Yerel cretli (Vakater) Eitimci Personel Says\",\r\n        current: \"\",\r\n        planned: \"\",\r\n      },\r\n\r\n      { item: \"Yerel Destek Personel Says\", current: \"\", planned: \"\" },\r\n\r\n      {\r\n        item: \"Yerel Personel Temsilcilik Personeli Says\",\r\n        current: \"\",\r\n        planned: \"\",\r\n      },\r\n\r\n      { item: \"International Personel Says\", current: \"\", planned: \"\" },\r\n    ];\r\n  }, [model]);\r\n\r\n  const revRows = useMemo(() => {\r\n    const base = model.revenues || [];\r\n\r\n    if (Array.isArray(base) && base.length) return base;\r\n\r\n    return [\r\n      { name: \"Eitim creti\", amount: \"\", ratio: \"\" },\r\n\r\n      { name: \"niforma\", amount: \"\", ratio: \"\" },\r\n\r\n      { name: \"Kitap Krtasiye\", amount: \"\", ratio: \"\" },\r\n\r\n      { name: \"Yemek\", amount: \"\", ratio: \"\" },\r\n\r\n      { name: \"Servis\", amount: \"\", ratio: \"\" },\r\n\r\n      { name: \"Yurt Gelirleri\", amount: \"\", ratio: \"\" },\r\n\r\n      { name: \"Dier (kantin, kira vb.)\", amount: \"\", ratio: \"\" },\r\n    ];\r\n  }, [model]);\r\n\r\n  const expRows = useMemo(() => {\r\n    const base = model.expenses || [];\r\n\r\n    if (Array.isArray(base) && base.length) return base;\r\n\r\n    return [\r\n      { name: \"IK Giderleri (Trk Personel)\", amount: \"\", ratio: \"\" },\r\n\r\n      { name: \"IK (Yerel Personel)\", amount: \"\", ratio: \"\" },\r\n\r\n      { name: \"letme Giderleri\", amount: \"\", ratio: \"\" },\r\n\r\n      { name: \"Yemek (renci Yemei)\", amount: \"\", ratio: \"\" },\r\n\r\n      { name: \"niforma\", amount: \"\", ratio: \"\" },\r\n\r\n      { name: \"Kitap- Krtasiye\", amount: \"\", ratio: \"\" },\r\n\r\n      { name: \"renci Servisi\", amount: \"\", ratio: \"\" },\r\n    ];\r\n  }, [model]);\r\n\r\n  const formattedRevRows = useMemo(\r\n    () => revRows.map((row) => formatAmountRatioRow(row, fmtMoneyDisplay)),\r\n\r\n    [revRows, fmtMoneyDisplay],\r\n  );\r\n\r\n  const revenuesDetailed = useMemo(\r\n    () => model.revenuesDetailed || [],\r\n    [model.revenuesDetailed],\r\n  );\r\n\r\n  const revenuesDetailedTotal =\r\n    Number.isFinite(Number(model.revenuesDetailedTotal)) &&\r\n      Number(model.revenuesDetailedTotal) > 0\r\n      ? Number(model.revenuesDetailedTotal)\r\n      : null;\r\n\r\n  const revenueTable = useMemo(() => {\r\n    const filtered = revenuesDetailed.filter(\r\n      (r) => Number.isFinite(r.amount) && Number(r.amount) !== 0,\r\n    );\r\n\r\n    const total =\r\n      revenuesDetailedTotal ||\r\n      filtered.reduce(\r\n        (sum, r) => (Number.isFinite(r.amount) ? sum + Number(r.amount) : sum),\r\n        0,\r\n      );\r\n\r\n    if (!filtered.length || !Number.isFinite(total) || total === 0) return null;\r\n\r\n    const rows = filtered.map((r, idx) => {\r\n      const ratio =\r\n        Number.isFinite(r.amount) && total ? r.amount / total : null;\r\n\r\n      return {\r\n        key: r.name || idx,\r\n\r\n        name: r.name,\r\n\r\n        amount: fmtMoneyDisplay(r.amount),\r\n\r\n        ratio: Number.isFinite(ratio) ? fmtPct(ratio, 2) : \"\",\r\n      };\r\n    });\r\n\r\n    return { rows, total: fmtMoneyDisplay(total) };\r\n  }, [revenuesDetailed, revenuesDetailedTotal, fmtMoneyDisplay]);\r\n\r\n  const detailedExpenses = useMemo(\r\n    () => model.parametersMeta?.detailedExpenses || [],\r\n    [model.parametersMeta?.detailedExpenses],\r\n  );\r\n\r\n  const detailedExpenseTotal =\r\n    Number(model.parametersMeta?.detailedExpenseTotal) ||\r\n    Number(model.expenseTotal) ||\r\n    0;\r\n\r\n  const formattedExpRows = useMemo(\r\n    () => expRows.map((row) => formatAmountRatioRow(row, fmtMoneyDisplay)),\r\n\r\n    [expRows, fmtMoneyDisplay],\r\n  );\r\n\r\n  const detailedExpenseRows = useMemo(() => {\r\n    if (!Array.isArray(detailedExpenses) || !detailedExpenses.length)\r\n      return null;\r\n\r\n    const total =\r\n      detailedExpenseTotal ||\r\n      detailedExpenses.reduce(\r\n        (sum, r) => (Number.isFinite(r.amount) ? sum + Number(r.amount) : sum),\r\n        0,\r\n      );\r\n\r\n    const rows = detailedExpenses.map((r, idx) => {\r\n      const ratioVal =\r\n        r.ratio != null\r\n          ? r.ratio\r\n          : Number.isFinite(r.amount) && total > 0\r\n            ? Number(r.amount) / total\r\n            : null;\r\n\r\n      const overTarget =\r\n        Number.isFinite(r.targetPct) &&\r\n        Number.isFinite(ratioVal) &&\r\n        ratioVal > r.targetPct;\r\n\r\n      return {\r\n        key: r.name || idx,\r\n\r\n        name: r.name,\r\n\r\n        amount: Number.isFinite(r.amount) ? fmtMoneyDisplay(r.amount) : \"\",\r\n\r\n        ratio: Number.isFinite(ratioVal) ? fmtPct(ratioVal, 2) : \"\",\r\n\r\n        targetLabel: Number.isFinite(r.targetPct)\r\n          ? `(Hedeflenen Maliyet ${fmtPct(r.targetPct, 0)})`\r\n          : \"\",\r\n\r\n        highlight: overTarget,\r\n      };\r\n    });\r\n\r\n    const totalAmount = total > 0 ? fmtMoneyDisplay(total) : \"\";\r\n\r\n    return { rows, total: totalAmount };\r\n  }, [detailedExpenses, detailedExpenseTotal, fmtMoneyDisplay]);\r\n\r\n\r\n  const discountAnalysis = model.discountAnalysis || {};\r\n\r\n  const scholarshipAnalysis = useMemo(\r\n    () => discountAnalysis.scholarships || {},\r\n    [discountAnalysis.scholarships],\r\n  );\r\n  const discountAnalysisData = useMemo(\r\n    () => discountAnalysis.discounts || {},\r\n    [discountAnalysis.discounts],\r\n  );\r\n  const MINI_ANALYSIS_COLUMNS = [\r\n    { key: \"label\", label: \"\", thStyle: { width: 240 } },\r\n\r\n    {\r\n      key: \"value\",\r\n      label: \"\",\r\n      thStyle: { width: 140, textAlign: \"right\" },\r\n      tdStyle: NUM_CELL_STYLE,\r\n    },\r\n  ];\r\n\r\n  const formatCurrencyOrDash = useCallback(\r\n    (v) => (Number.isFinite(Number(v)) ? fmtMoneyDisplay(v) : \"\"),\r\n\r\n    [fmtMoneyDisplay],\r\n  );\r\n\r\n  const formatPct0OrDash = useCallback(\r\n    (v) => (Number.isFinite(Number(v)) ? fmtPct(v, 0) : \"\"),\r\n\r\n    [],\r\n  );\r\n\r\n  const scholarshipAnalysisRows = useMemo(\r\n    () => [\r\n      {\r\n        key: \"sch-per-target\",\r\n\r\n        label: \"Toplam Burs Hedeflenen renci Saysna Blm\",\r\n\r\n        value: formatCurrencyOrDash(scholarshipAnalysis.perTargetStudent),\r\n      },\r\n\r\n      {\r\n        key: \"sch-student-share\",\r\n\r\n        label: \"Burs rencilerin Toplam renci iindeki %\",\r\n\r\n        value: formatPct0OrDash(scholarshipAnalysis.studentShare),\r\n      },\r\n\r\n      {\r\n        key: \"sch-revenue-share\",\r\n\r\n        label: \"Burs Velilerden Alnan renci Gelirleri iindeki %\",\r\n\r\n        value: formatPct0OrDash(scholarshipAnalysis.revenueShare),\r\n      },\r\n\r\n      {\r\n        key: \"sch-weighted\",\r\n\r\n        label: \"Arlkl Burs Ortalamas %\",\r\n\r\n        value: formatPct0OrDash(scholarshipAnalysis.weightedAvgRate),\r\n      },\r\n    ],\r\n\r\n    [scholarshipAnalysis, formatCurrencyOrDash, formatPct0OrDash],\r\n  );\r\n\r\n  const discountAnalysisRows = useMemo(\r\n    () => [\r\n      {\r\n        key: \"disc-per-target\",\r\n\r\n        label: \"Toplam ndirimlerin Hedeflenen renci Saysna Blm\",\r\n\r\n        value: formatCurrencyOrDash(discountAnalysisData.perTargetStudent),\r\n      },\r\n\r\n      {\r\n        key: \"disc-student-share\",\r\n\r\n        label: \"ndirimli rencilerin Toplam renci iindeki %\",\r\n\r\n        value: formatPct0OrDash(discountAnalysisData.studentShare),\r\n      },\r\n\r\n      {\r\n        key: \"disc-revenue-share\",\r\n\r\n        label: \"ndirimlerin Velilerden Alnan renci Gelirleri iindeki %\",\r\n\r\n        value: formatPct0OrDash(discountAnalysisData.revenueShare),\r\n      },\r\n\r\n      {\r\n        key: \"disc-weighted\",\r\n\r\n        label: \"Arlkl ndirim Ortalamas %\",\r\n\r\n        value: formatPct0OrDash(discountAnalysisData.weightedAvgRate),\r\n      },\r\n    ],\r\n\r\n    [discountAnalysisData, formatCurrencyOrDash, formatPct0OrDash],\r\n  );\r\n\r\n  const scholarshipsRows = useMemo(() => {\r\n    const base = model.scholarships || [];\r\n\r\n    if (Array.isArray(base) && base.length) return base;\r\n\r\n    return [\r\n      { name: \"MAGS Baar Bursu\", cur: \"\", planned: \"\", cost: \"\" },\r\n\r\n      { name: \"Maarif Yetenek Bursu\", cur: \"\", planned: \"\", cost: \"\" },\r\n\r\n      { name: \"htiya Bursu\", cur: \"\", planned: \"\", cost: \"\" },\r\n\r\n      { name: \"Okul Baar Bursu\", cur: \"\", planned: \"\", cost: \"\" },\r\n\r\n      { name: \"Tam Eitim Bursu\", cur: \"\", planned: \"\", cost: \"\" },\r\n\r\n      { name: \"Barnma Bursu\", cur: \"\", planned: \"\", cost: \"\" },\r\n\r\n      { name: \"Trke Baar Bursu\", cur: \"\", planned: \"\", cost: \"\" },\r\n\r\n      { name: \"Toplam\", cur: \"\", planned: \"\", cost: \"\" },\r\n    ];\r\n  }, [model]);\r\n\r\n  const discountsRows = useMemo(() => {\r\n    const base = model.discounts || [];\r\n\r\n    if (Array.isArray(base) && base.length) return base;\r\n\r\n    return [\r\n      {\r\n        name: \"Vakfn Uluslararas Ykmllklerinden Kaynakl ndirim\",\r\n\r\n        cur: \"\",\r\n\r\n        planned: \"\",\r\n\r\n        cost: \"\",\r\n      },\r\n\r\n      { name: \"Vakf alan ndirimi\", cur: \"\", planned: \"\", cost: \"\" },\r\n\r\n      { name: \"Karde ndirimi\", cur: \"\", planned: \"\", cost: \"\" },\r\n\r\n      { name: \"Erken Kayt ndirimi\", cur: \"\", planned: \"\", cost: \"\" },\r\n\r\n      { name: \"Pein deme ndirimi\", cur: \"\", planned: \"\", cost: \"\" },\r\n\r\n      { name: \"Kademe Gei ndirimi\", cur: \"\", planned: \"\", cost: \"\" },\r\n\r\n      { name: \"Temsil ndirimi\", cur: \"\", planned: \"\", cost: \"\" },\r\n\r\n      { name: \"Kurum ndirimi\", cur: \"\", planned: \"\", cost: \"\" },\r\n\r\n      { name: \"stisnai ndirim\", cur: \"\", planned: \"\", cost: \"\" },\r\n\r\n      {\r\n        name: \"Yerel Mevzuatn art Kotuu ndirim\",\r\n        cur: \"\",\r\n        planned: \"\",\r\n        cost: \"\",\r\n      },\r\n\r\n      { name: \"Toplam\", cur: \"\", planned: \"\", cost: \"\" },\r\n    ];\r\n  }, [model]);\r\n\r\n  const formattedScholarshipsRows = useMemo(\r\n    () =>\r\n      scholarshipsRows.map((row) => formatScholarshipRow(row, fmtMoneyDisplay)),\r\n\r\n    [scholarshipsRows, fmtMoneyDisplay],\r\n  );\r\n\r\n  const formattedDiscountsRows = useMemo(\r\n    () =>\r\n      discountsRows.map((row) => formatScholarshipRow(row, fmtMoneyDisplay)),\r\n\r\n    [discountsRows, fmtMoneyDisplay],\r\n  );\r\n\r\n  const scholarshipTotals = useMemo(() => {\r\n    const totals = scholarshipsRows.reduce(\r\n      (acc, row) => {\r\n        const cur = isFiniteNumber(row.cur) ? Number(row.cur) : 0;\r\n\r\n        const planned = isFiniteNumber(row.planned) ? Number(row.planned) : 0;\r\n\r\n        const cost = isFiniteNumber(row.cost) ? Number(row.cost) : 0;\r\n\r\n        return {\r\n          cur: acc.cur + cur,\r\n\r\n          planned: acc.planned + planned,\r\n\r\n          cost: acc.cost + cost,\r\n        };\r\n      },\r\n\r\n      { cur: 0, planned: 0, cost: 0 },\r\n    );\r\n\r\n    return {\r\n      cur: fmtInt(totals.cur),\r\n\r\n      planned: fmtInt(totals.planned),\r\n\r\n      cost: fmtMoneyDisplay(totals.cost),\r\n    };\r\n  }, [scholarshipsRows, fmtMoneyDisplay]);\r\n\r\n  const discountTotals = useMemo(() => {\r\n    const totals = discountsRows.reduce(\r\n      (acc, row) => {\r\n        const cur = isFiniteNumber(row.cur) ? Number(row.cur) : 0;\r\n\r\n        const planned = isFiniteNumber(row.planned) ? Number(row.planned) : 0;\r\n\r\n        const cost = isFiniteNumber(row.cost) ? Number(row.cost) : 0;\r\n\r\n        return {\r\n          cur: acc.cur + cur,\r\n\r\n          planned: acc.planned + planned,\r\n\r\n          cost: acc.cost + cost,\r\n        };\r\n      },\r\n\r\n      { cur: 0, planned: 0, cost: 0 },\r\n    );\r\n\r\n    return {\r\n      cur: fmtInt(totals.cur),\r\n\r\n      planned: fmtInt(totals.planned),\r\n\r\n      cost: fmtMoneyDisplay(totals.cost),\r\n    };\r\n  }, [discountsRows, fmtMoneyDisplay]);\r\n\r\n  const perfRows = useMemo(() => {\r\n    const base = Array.isArray(model.performance) ? model.performance : [];\r\n    const formatValue = (value, kind, formatter) => {\r\n      if (!isFiniteNumber(value)) return \"\";\r\n      if (kind === \"int\") return fmtInt(value);\r\n      if (kind === \"money\") return formatter(value);\r\n      if (kind === \"pct\") return fmtPct(value);\r\n      return fmtNumber(value);\r\n    };\r\n    const formatVariance = (value) =>\r\n      isFiniteNumber(value) ? fmtPct(value) : \"\";\r\n\r\n    if (!base.length) {\r\n      return [\r\n        { metric: \"Ogrenci Sayisi\", planned: \"\", actual: \"\", variance: \"\" },\r\n        { metric: \"Gelirler\", planned: \"\", actual: \"\", variance: \"\" },\r\n        { metric: \"Giderler\", planned: \"\", actual: \"\", variance: \"\" },\r\n        { metric: \"Kar Zarar\", planned: \"\", actual: \"\", variance: \"\" },\r\n        {\r\n          metric: \"Burs ve Indirimler\",\r\n          planned: \"\",\r\n          actual: \"\",\r\n          variance: \"\",\r\n        },\r\n      ];\r\n    }\r\n\r\n    return base.map((row) => {\r\n      const metric = row.metric;\r\n      const kind =\r\n        metric === \"Ogrenci Sayisi\"\r\n          ? \"int\"\r\n          : metric === \"Gelirler\" ||\r\n            metric === \"Giderler\" ||\r\n            metric === \"Burs ve Indirimler\" ||\r\n            metric === \"Kar Zarar\"\r\n            ? \"money\"\r\n            : \"number\";\r\n      return {\r\n        metric,\r\n        planned: formatValue(row.planned, kind, fmtPerfPlannedMoneyDisplay),\r\n        actual: formatValue(row.actual, kind, fmtPerfActualMoneyDisplay),\r\n        variance: formatVariance(row.variance),\r\n      };\r\n    });\r\n  }, [model, fmtPerfPlannedMoneyDisplay, fmtPerfActualMoneyDisplay]);\r\n\r\n  const competitorRows = useMemo(() => {\r\n    const base = model.competitors || [];\r\n\r\n    if (Array.isArray(base) && base.length) return base;\r\n\r\n    return [\r\n      { level: \"Okul ncesi\", a: \"\", b: \"\", c: \"\" },\r\n\r\n      { level: \"lkokul\", a: \"\", b: \"\", c: \"\" },\r\n\r\n      { level: \"Ortaokul\", a: \"\", b: \"\", c: \"\" },\r\n\r\n      { level: \"Lise\", a: \"\", b: \"\", c: \"\" },\r\n    ];\r\n  }, [model]);\r\n  const formattedCompetitorRows = useMemo(\r\n    () =>\r\n      competitorRows.map((row) => ({\r\n        ...row,\r\n        a: isFiniteNumber(row.a) ? fmtMoneyDisplay(row.a) : (row.a ?? \"-\"),\r\n        b: isFiniteNumber(row.b) ? fmtMoneyDisplay(row.b) : (row.b ?? \"-\"),\r\n        c: isFiniteNumber(row.c) ? fmtMoneyDisplay(row.c) : (row.c ?? \"-\"),\r\n      })),\r\n    [competitorRows, fmtMoneyDisplay],\r\n  );\r\n\r\n  // ------------------ One pager helpers (still skeleton) ------------------\r\n  const onePagerKpis = useMemo(() => {\r\n    // imdilik model zerinden. Sonraki admda inputs/report ile dolduracaz.\r\n\r\n    const students = model.currentStudents ?? model.capacity?.currentStudents;\r\n\r\n    const cap = model.schoolCapacity ?? model.capacity?.buildingCapacity;\r\n\r\n    const util = model.capacity?.plannedUtilization;\r\n\r\n    // Gelir/Gider toplamlar (ileride report'tan gelecek)\r\n\r\n    const revTotal = model.revenueTotal;\r\n\r\n    const expTotal = model.expenseTotal;\r\n\r\n    const net =\r\n      isFiniteNumber(revTotal) && isFiniteNumber(expTotal)\r\n        ? Number(revTotal) - Number(expTotal)\r\n        : null;\r\n\r\n    const margin =\r\n      isFiniteNumber(revTotal) && isFiniteNumber(net) && Number(revTotal) !== 0\r\n        ? Number(net) / Number(revTotal)\r\n        : null;\r\n\r\n    // Ortalama cret (ileride tuition table ile)\r\n\r\n    const avgTuition = model.avgTuition;\r\n\r\n    return [\r\n      {\r\n        label: \"Mevcut renci\",\r\n        value: isFiniteNumber(students) ? fmtNumber(students) : \"\",\r\n      },\r\n\r\n      { label: \"Kapasite\", value: isFiniteNumber(cap) ? fmtNumber(cap) : \"\" },\r\n\r\n      {\r\n        label: \"Kapasite Kullanm %\",\r\n        value: isFiniteNumber(util) ? fmtPct(util) : \"\",\r\n      },\r\n\r\n      {\r\n        label: \"Ortalama cret\",\r\n        value: isFiniteNumber(avgTuition) ? fmtMoneyKpi(avgTuition) : \"\",\r\n      },\r\n\r\n      {\r\n        label: \"Toplam Gelir\",\r\n        value: isFiniteNumber(revTotal) ? fmtMoneyKpi(revTotal) : \"\",\r\n      },\r\n\r\n      {\r\n        label: \"Toplam Gider\",\r\n        value: isFiniteNumber(expTotal) ? fmtMoneyKpi(expTotal) : \"\",\r\n      },\r\n\r\n      { label: \"Net\", value: isFiniteNumber(net) ? fmtMoneyKpi(net) : \"\" },\r\n\r\n      { label: \"Marj\", value: isFiniteNumber(margin) ? fmtPct(margin) : \"\" },\r\n    ];\r\n  }, [model, fmtMoneyKpi]);\r\n\r\n  const viewMode = String(mode || \"detailed\").toLowerCase();\r\n\r\n  if (viewMode === \"onepager\") {\r\n    return (\r\n      <div>\r\n        <div className=\"card\" style={{ marginTop: 12 }}>\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n\r\n              justifyContent: \"space-between\",\r\n\r\n              gap: 12,\r\n\r\n              alignItems: \"flex-start\",\r\n            }}\r\n          >\r\n            <div>\r\n              <div style={{ fontWeight: 900, fontSize: 18 }}>\r\n                Detayl Rapor  Tek Sayfa zet\r\n              </div>\r\n\r\n              <div className=\"small\" style={{ marginTop: 2 }}>\r\n                {header || \"\"}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"small\" style={{ textAlign: \"right\", opacity: 0.8 }}>\r\n              <div>\r\n                Grnm: <b>zet</b>\r\n              </div>\r\n\r\n              <div>imdilik iskelet (UI), veri balama sonraki adm.</div>\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            style={{\r\n              display: \"grid\",\r\n\r\n              gridTemplateColumns: \"repeat(4, minmax(0, 1fr))\",\r\n\r\n              gap: 10,\r\n\r\n              marginTop: 12,\r\n            }}\r\n          >\r\n            {onePagerKpis.map((k) => (\r\n              <Kpi\r\n                key={k.label}\r\n                label={k.label}\r\n                value={k.value}\r\n                hint={k.hint}\r\n              />\r\n            ))}\r\n          </div>\r\n\r\n          <div\r\n            className=\"small\"\r\n            style={{ marginTop: 12, opacity: 0.85, lineHeight: 1.35 }}\r\n          >\r\n            Bu grnm, ynetici/komisyon iin hzl kontrol amal tek sayfa\r\n            zetidir. Detayl Excel RAPOR dzeni iin Detayl grnm\r\n            seebilirsiniz.\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          style={{\r\n            display: \"grid\",\r\n            gridTemplateColumns: \"1fr 1fr\",\r\n            gap: 12,\r\n            marginTop: 12,\r\n          }}\r\n        >\r\n          <div className=\"card\">\r\n            <div style={{ fontWeight: 900, marginBottom: 8 }}>cret zeti</div>\r\n\r\n            <SimpleTable\r\n              columns={[\r\n                { key: \"level\", label: \"Kademe\" },\r\n\r\n                {\r\n                  key: \"edu\",\r\n                  label: \"Eitim\",\r\n                  thStyle: { width: 140, textAlign: \"right\" },\r\n                  tdStyle: NUM_CELL_STYLE,\r\n                },\r\n\r\n                {\r\n                  key: \"total\",\r\n                  label: \"Toplam\",\r\n                  thStyle: { width: 140, textAlign: \"right\" },\r\n                  tdStyle: NUM_CELL_STYLE,\r\n                },\r\n              ]}\r\n              rows={formattedTuitionRows\r\n\r\n                .filter((r) => !/TOPLAM|ORTALAMA/i.test(String(r.level || \"\")))\r\n\r\n                .slice(0, 7)\r\n\r\n                .map((r, i) => ({\r\n                  key: String(i),\r\n                  level: r.level,\r\n                  edu: r.edu,\r\n                  total: r.total,\r\n                }))}\r\n            />\r\n\r\n            <div className=\"small\" style={{ marginTop: 8, opacity: 0.8 }}>\r\n              Not: Paket cretler ve art oranlar bir sonraki admda otomatik\r\n              balanacak.\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"card\">\r\n            <div style={{ fontWeight: 900, marginBottom: 8 }}>K zeti</div>\r\n\r\n            <SimpleTable\r\n              columns={[\r\n                { key: \"item\", label: \"Kalem\" },\r\n\r\n                {\r\n                  key: \"planned\",\r\n                  label: \"Plan\",\r\n                  thStyle: { width: 120, textAlign: \"right\" },\r\n                  tdStyle: NUM_CELL_STYLE,\r\n                },\r\n              ]}\r\n              rows={hrRows\r\n                .slice(0, 7)\r\n                .map((r, i) => ({\r\n                  key: String(i),\r\n                  item: r.item,\r\n                  planned: r.planned,\r\n                }))}\r\n            />\r\n\r\n            <div className=\"small\" style={{ marginTop: 8, opacity: 0.8 }}>\r\n              Not: Mevcut/plan karlatrmas detayl grnmde.\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          style={{\r\n            display: \"grid\",\r\n            gridTemplateColumns: \"1fr 1fr\",\r\n            gap: 12,\r\n            marginTop: 12,\r\n          }}\r\n        >\r\n          <div className=\"card\">\r\n            <div style={{ fontWeight: 900, marginBottom: 8 }}>\r\n              Gelir Dalm\r\n            </div>\r\n\r\n            <SimpleTable\r\n              columns={[\r\n                { key: \"name\", label: \"Gelir\" },\r\n\r\n                {\r\n                  key: \"amount\",\r\n                  label: \"Tutar\",\r\n                  thStyle: { width: 160, textAlign: \"right\" },\r\n                  tdStyle: NUM_CELL_STYLE,\r\n                },\r\n\r\n                {\r\n                  key: \"ratio\",\r\n                  label: \"%\",\r\n                  thStyle: { width: 70, textAlign: \"right\" },\r\n                  tdStyle: NUM_CELL_STYLE,\r\n                },\r\n              ]}\r\n              rows={formattedRevRows\r\n                .slice(0, 7)\r\n                .map((r, i) => ({ key: String(i), ...r }))}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"card\">\r\n            <div style={{ fontWeight: 900, marginBottom: 8 }}>\r\n              Gider Dalm\r\n            </div>\r\n\r\n            <SimpleTable\r\n              columns={[\r\n                { key: \"name\", label: \"Gider\" },\r\n\r\n                {\r\n                  key: \"amount\",\r\n                  label: \"Tutar\",\r\n                  thStyle: { width: 160, textAlign: \"right\" },\r\n                  tdStyle: NUM_CELL_STYLE,\r\n                },\r\n\r\n                {\r\n                  key: \"ratio\",\r\n                  label: \"%\",\r\n                  thStyle: { width: 70, textAlign: \"right\" },\r\n                  tdStyle: NUM_CELL_STYLE,\r\n                },\r\n              ]}\r\n              rows={formattedExpRows\r\n                .slice(0, 7)\r\n                .map((r, i) => ({ key: String(i), ...r }))}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          style={{\r\n            display: \"grid\",\r\n            gridTemplateColumns: \"1fr 1fr\",\r\n            gap: 12,\r\n            marginTop: 12,\r\n          }}\r\n        >\r\n          <div className=\"card\">\r\n            <div style={{ fontWeight: 900, marginBottom: 8 }}>Burslar</div>\r\n\r\n            <SimpleTable\r\n              columns={[\r\n                { key: \"name\", label: \"Burs\" },\r\n\r\n                {\r\n                  key: \"planned\",\r\n                  label: \"Plan\",\r\n                  thStyle: { width: 90, textAlign: \"right\" },\r\n                  tdStyle: NUM_CELL_STYLE,\r\n                },\r\n\r\n                {\r\n                  key: \"cost\",\r\n                  label: \"Maliyet\",\r\n                  thStyle: { width: 120, textAlign: \"right\" },\r\n                  tdStyle: NUM_CELL_STYLE,\r\n                },\r\n              ]}\r\n              rows={formattedScholarshipsRows\r\n                .slice(0, 8)\r\n                .map((r, i) => ({\r\n                  key: String(i),\r\n                  name: r.name,\r\n                  planned: r.planned,\r\n                  cost: r.cost,\r\n                }))}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"card\">\r\n            <div style={{ fontWeight: 900, marginBottom: 8 }}>ndirimler</div>\r\n\r\n            <SimpleTable\r\n              columns={[\r\n                { key: \"name\", label: \"ndirim\" },\r\n\r\n                {\r\n                  key: \"planned\",\r\n                  label: \"Plan\",\r\n                  thStyle: { width: 90, textAlign: \"right\" },\r\n                  tdStyle: NUM_CELL_STYLE,\r\n                },\r\n\r\n                {\r\n                  key: \"cost\",\r\n                  label: \"Maliyet\",\r\n                  thStyle: { width: 120, textAlign: \"right\" },\r\n                  tdStyle: NUM_CELL_STYLE,\r\n                },\r\n              ]}\r\n              rows={formattedDiscountsRows\r\n                .slice(0, 8)\r\n                .map((r, i) => ({\r\n                  key: String(i),\r\n                  name: r.name,\r\n                  planned: r.planned,\r\n                  cost: r.cost,\r\n                }))}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <Section title=\"Rakip Kurum (zet)\">\r\n          <SimpleTable\r\n            columns={[\r\n              { key: \"level\", label: \"Kademe\" },\r\n\r\n              {\r\n                key: \"a\",\r\n                label: \"A\",\r\n                thStyle: { width: 120, textAlign: \"right\" },\r\n                tdStyle: NUM_CELL_STYLE,\r\n              },\r\n\r\n              {\r\n                key: \"b\",\r\n                label: \"B\",\r\n                thStyle: { width: 120, textAlign: \"right\" },\r\n                tdStyle: NUM_CELL_STYLE,\r\n              },\r\n\r\n              {\r\n                key: \"c\",\r\n                label: \"C\",\r\n                thStyle: { width: 120, textAlign: \"right\" },\r\n                tdStyle: NUM_CELL_STYLE,\r\n              },\r\n            ]}\r\n            rows={formattedCompetitorRows.map((r, i) => ({\r\n              key: String(i),\r\n              ...r,\r\n            }))}\r\n          />\r\n        </Section>\r\n\r\n        <Section title=\"Notlar\">\r\n          <div className=\"small\" style={{ lineHeight: 1.45 }}>\r\n            <b>E.</b> Deerlendirme ve <b>F.</b> Komisyon grleri alanlar bir\r\n            sonraki admda role/izin bazl balanacaktr.\r\n          </div>\r\n\r\n          <div\r\n            style={{\r\n              marginTop: 10,\r\n\r\n              padding: 12,\r\n\r\n              border: \"1px dashed rgba(0,0,0,0.25)\",\r\n\r\n              borderRadius: 10,\r\n\r\n              opacity: 0.85,\r\n            }}\r\n          >\r\n            <div className=\"small\">\r\n              <i>Metin alan (sonraki admda veri balanacak)</i>\r\n            </div>\r\n          </div>\r\n        </Section>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // ------------------ Detailed view (current skeleton) ------------------\r\n\r\n  return (\r\n    <div>\r\n      <Section title=\"A. OKUL ETM BLGLER\">\r\n        <SimpleTable\r\n          columns={[\r\n            { key: \"k\", label: \"Bilgi\" },\r\n\r\n            {\r\n              key: \"v\",\r\n              label: \"Deer\",\r\n              thStyle: { width: 240, textAlign: \"right\" },\r\n              tdStyle: NUM_CELL_STYLE,\r\n            },\r\n          ]}\r\n          rows={educationInfoRows}\r\n        />\r\n      </Section>\r\n\r\n      <Section title=\"B. OKUL CRETLER TABLOSU (YEN ETM DNEM)\">\r\n        <SimpleTable\r\n          columns={[\r\n            { key: \"level\", label: \"Kademe\" },\r\n\r\n            {\r\n              key: \"edu\",\r\n              label: \"Eitim creti\",\r\n              thStyle: { textAlign: \"right\" },\r\n              tdStyle: NUM_CELL_STYLE,\r\n            },\r\n\r\n            {\r\n              key: \"uniform\",\r\n              label: \"niforma\",\r\n              thStyle: { textAlign: \"right\" },\r\n              tdStyle: NUM_CELL_STYLE,\r\n            },\r\n\r\n            {\r\n              key: \"books\",\r\n              label: \"Kitap Krtasiye\",\r\n              thStyle: { textAlign: \"right\" },\r\n              tdStyle: NUM_CELL_STYLE,\r\n            },\r\n\r\n            {\r\n              key: \"transport\",\r\n              label: \"Ulam\",\r\n              thStyle: { textAlign: \"right\" },\r\n              tdStyle: NUM_CELL_STYLE,\r\n            },\r\n\r\n            {\r\n              key: \"meal\",\r\n              label: \"Yemek (*)\",\r\n              thStyle: { textAlign: \"right\" },\r\n              tdStyle: NUM_CELL_STYLE,\r\n            },\r\n\r\n            {\r\n              key: \"raisePct\",\r\n              label: \"Art Oran\",\r\n              thStyle: { textAlign: \"right\" },\r\n              tdStyle: NUM_CELL_STYLE,\r\n            },\r\n\r\n            {\r\n              key: \"total\",\r\n              label: \"Total cret\",\r\n              thStyle: { textAlign: \"right\" },\r\n              tdStyle: NUM_CELL_STYLE,\r\n            },\r\n          ]}\r\n          rows={formattedTuitionRows\r\n\r\n            .filter((r) => !/TOPLAM/i.test(String(r.level || \"\")))\r\n\r\n            .map((r, i) => ({ key: String(i), ...r }))}\r\n        />\r\n      </Section>\r\n\r\n      <Section title=\"C. OKUL CRET HESAPLAMA PARAMETRELER\">\r\n        <table className=\"table\" style={{ width: \"100%\" }}>\r\n          <thead>\r\n            <tr>\r\n              {PARAM_HEADER_CELLS.map((c) => (\r\n                <th key={c.key} colSpan={c.colSpan} style={c.thStyle}>\r\n                  {c.label}\r\n                </th>\r\n              ))}\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            {paramTableRows.length ? (\r\n              paramTableRows.map((row, rowIdx) => (\r\n                <tr key={row.key || rowIdx}>\r\n                  {row.cells.map((cell, cellIdx) => (\r\n                    <td\r\n                      key={cellIdx}\r\n                      colSpan={cell.colSpan || 1}\r\n                      style={\r\n                        cell.align === \"right\"\r\n                          ? NUM_CELL_STYLE\r\n                          : cell.align === \"center\"\r\n                            ? { textAlign: \"center\" }\r\n                            : undefined\r\n                      }\r\n                    >\r\n                      {cell.content ?? \"\"}\r\n                    </td>\r\n                  ))}\r\n                </tr>\r\n              ))\r\n            ) : (\r\n              <tr>\r\n                <td colSpan={6} className=\"small\">\r\n                  Veri yok.\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n\r\n        <div style={{ marginTop: 12 }}>\r\n          <div style={{ fontWeight: 800, marginBottom: 6 }}>\r\n            C.1. Kapasite Kullanm\r\n          </div>\r\n\r\n          <div\r\n            style={{ display: \"grid\", gridTemplateColumns: \"1fr 1fr\", gap: 12 }}\r\n          >\r\n            <div>\r\n              <div\r\n                className=\"small\"\r\n                style={{ fontWeight: 700, marginBottom: 6 }}\r\n              >\r\n                renci Kapasite Bilgileri\r\n              </div>\r\n\r\n              <SimpleTable\r\n                columns={[\r\n                  { key: \"k\", label: \"Bilgi\" },\r\n\r\n                  {\r\n                    key: \"v\",\r\n                    label: \"Deer\",\r\n                    thStyle: { width: 180, textAlign: \"right\" },\r\n                    tdStyle: NUM_CELL_STYLE,\r\n                  },\r\n                ]}\r\n                rows={capacityStudentRows.map((r, i) => ({\r\n                  key: String(i),\r\n                  ...r,\r\n                }))}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <div\r\n                className=\"small\"\r\n                style={{ fontWeight: 700, marginBottom: 6 }}\r\n              >\r\n                Snf Kapasite Bilgileri\r\n              </div>\r\n\r\n              <SimpleTable\r\n                columns={[\r\n                  { key: \"k\", label: \"Bilgi\" },\r\n\r\n                  {\r\n                    key: \"v\",\r\n                    label: \"Deer\",\r\n                    thStyle: { width: 180, textAlign: \"right\" },\r\n                    tdStyle: NUM_CELL_STYLE,\r\n                  },\r\n                ]}\r\n                rows={capacityClassRows.map((r, i) => ({\r\n                  key: String(i),\r\n                  ...r,\r\n                }))}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"small\" style={{ marginTop: 8, opacity: 0.85 }}>\r\n            * Belirlenen snf renci kapasitesi oranna gre %80 - %100\r\n            aral (rnek: 24 kiilik snf kapasitesine gre 20-24 aral)\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ marginTop: 12 }}>\r\n          <div style={{ fontWeight: 800, marginBottom: 6 }}>\r\n            C.2. nsan Kaynaklar\r\n          </div>\r\n\r\n          <SimpleTable\r\n            columns={[\r\n              { key: \"item\", label: \"Kalem\" },\r\n\r\n              {\r\n                key: \"current\",\r\n                label: \"Mevcut\",\r\n                thStyle: { width: 120, textAlign: \"right\" },\r\n                tdStyle: NUM_CELL_STYLE,\r\n              },\r\n\r\n              {\r\n                key: \"planned\",\r\n                label: \"Planlanan\",\r\n                thStyle: { width: 140, textAlign: \"right\" },\r\n                tdStyle: NUM_CELL_STYLE,\r\n              },\r\n            ]}\r\n            rows={hrRows.map((r, i) => ({ key: String(i), ...r }))}\r\n          />\r\n        </div>\r\n\r\n        <div style={{ marginTop: 12 }}>\r\n          <div style={{ fontWeight: 800, marginBottom: 6 }}>C.3. Gelirler</div>\r\n\r\n          {revenueTable ? (\r\n            <table className=\"table\" style={{ width: \"100%\" }}>\r\n              <thead>\r\n                <tr>\r\n                  <th>Gelir</th>\r\n\r\n                  <th style={{ width: 180, textAlign: \"right\" }}>Tutar</th>\r\n\r\n                  <th style={{ width: 120, textAlign: \"right\" }}>% Oran</th>\r\n                </tr>\r\n              </thead>\r\n\r\n              <tbody>\r\n                {revenueTable.rows.map((row) => (\r\n                  <tr key={row.key}>\r\n                    <td>{row.name}</td>\r\n\r\n                    <td style={NUM_CELL_STYLE}>{row.amount}</td>\r\n\r\n                    <td style={NUM_CELL_STYLE}>{row.ratio}</td>\r\n                  </tr>\r\n                ))}\r\n\r\n                <tr style={{ fontWeight: 800 }}>\r\n                  <td>Toplam</td>\r\n\r\n                  <td style={NUM_CELL_STYLE}>{revenueTable.total}</td>\r\n\r\n                  <td style={NUM_CELL_STYLE}>{fmtPct(1, 2)}</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          ) : (\r\n            <SimpleTable\r\n              columns={[\r\n                { key: \"name\", label: \"Gelir\" },\r\n\r\n                {\r\n                  key: \"amount\",\r\n                  label: \"Tutar\",\r\n                  thStyle: { width: 180, textAlign: \"right\" },\r\n                  tdStyle: NUM_CELL_STYLE,\r\n                },\r\n\r\n                {\r\n                  key: \"ratio\",\r\n                  label: \"% Oran\",\r\n                  thStyle: { width: 120, textAlign: \"right\" },\r\n                  tdStyle: NUM_CELL_STYLE,\r\n                },\r\n              ]}\r\n              rows={formattedRevRows.map((r, i) => ({ key: String(i), ...r }))}\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        <div style={{ marginTop: 12 }}>\r\n          <div style={{ fontWeight: 800, marginBottom: 6 }}>C.4. Giderler</div>\r\n\r\n          {detailedExpenseRows ? (\r\n            <table className=\"table\" style={{ width: \"100%\" }}>\r\n              <thead>\r\n                <tr>\r\n                  <th>Giderler</th>\r\n\r\n                  <th style={{ width: 180, textAlign: \"right\" }}>Tutar</th>\r\n\r\n                  <th style={{ width: 120, textAlign: \"right\" }}>% Oran</th>\r\n                </tr>\r\n              </thead>\r\n\r\n              <tbody>\r\n                {detailedExpenseRows.rows.map((row) => (\r\n                  <tr key={row.key}>\r\n                    <td>{row.name}</td>\r\n\r\n                    <td style={NUM_CELL_STYLE}>{row.amount}</td>\r\n\r\n                    <td\r\n                      style={\r\n                        row.highlight\r\n                          ? { ...NUM_CELL_STYLE, background: \"#ffd9d9\" }\r\n                          : NUM_CELL_STYLE\r\n                      }\r\n                    >\r\n                      {row.ratio}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n\r\n                <tr style={{ fontWeight: 800 }}>\r\n                  <td>Toplam</td>\r\n\r\n                  <td style={NUM_CELL_STYLE}>{detailedExpenseRows.total}</td>\r\n\r\n                  <td style={NUM_CELL_STYLE}>{fmtPct(1, 2)}</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          ) : (\r\n            <SimpleTable\r\n              columns={[\r\n                { key: \"name\", label: \"Gider\" },\r\n\r\n                {\r\n                  key: \"amount\",\r\n                  label: \"Tutar\",\r\n                  thStyle: { width: 180, textAlign: \"right\" },\r\n                  tdStyle: NUM_CELL_STYLE,\r\n                },\r\n\r\n                {\r\n                  key: \"ratio\",\r\n                  label: \"% Oran\",\r\n                  thStyle: { width: 120, textAlign: \"right\" },\r\n                  tdStyle: NUM_CELL_STYLE,\r\n                },\r\n              ]}\r\n              rows={formattedExpRows.map((r, i) => ({ key: String(i), ...r }))}\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        <div style={{ marginTop: 12 }}>\r\n          <div style={{ fontWeight: 800, marginBottom: 6 }}>\r\n            C.5. Tahsil Edilemeyecek Gelirler\r\n          </div>\r\n\r\n          <div className=\"small\" style={{ lineHeight: 1.4 }}>\r\n            nceki yllarda tahsil edilemeyen giderlerin hesaplanmas suretiyle\r\n            renci ba ortalama bir gider okul fiyatlarna eklenmelidir.\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ marginTop: 12 }}>\r\n          <div style={{ fontWeight: 800, marginBottom: 6 }}>\r\n            C.6. Giderlerin Sapma Yzdelii\r\n          </div>\r\n\r\n          <div className=\"small\" style={{ lineHeight: 1.4 }}>\r\n            Hedeflenen renci saysna uygun olarak hesaplanan iletme, burs,\r\n            erken kayt ve kampanya giderlerinin toplamndan sonra yanlma pay\r\n            olarak belli bir yzdelik belirlenerek kan ortalama renci\r\n            fiyatna eklenmelidir.\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ marginTop: 12 }}>\r\n          <div style={{ fontWeight: 800, marginBottom: 6 }}>\r\n            C.7. Burs ve ndirim Oranlar\r\n          </div>\r\n\r\n          <div\r\n            style={{ display: \"grid\", gridTemplateColumns: \"1fr 1fr\", gap: 12 }}\r\n          >\r\n            <div>\r\n              <div\r\n                className=\"small\"\r\n                style={{ fontWeight: 700, marginBottom: 6 }}\r\n              >\r\n                Burslar\r\n              </div>\r\n\r\n              <SimpleTable\r\n                columns={[\r\n                  { key: \"name\", label: \"Burs\" },\r\n\r\n                  {\r\n                    key: \"cur\",\r\n                    label: \"Mevcut\",\r\n                    thStyle: { width: 90, textAlign: \"right\" },\r\n                    tdStyle: NUM_CELL_STYLE,\r\n                  },\r\n\r\n                  {\r\n                    key: \"planned\",\r\n                    label: \"Planlanan\",\r\n                    thStyle: { width: 110, textAlign: \"right\" },\r\n                    tdStyle: NUM_CELL_STYLE,\r\n                  },\r\n\r\n                  {\r\n                    key: \"cost\",\r\n                    label: \"Maliyet\",\r\n                    thStyle: { width: 120, textAlign: \"right\" },\r\n                    tdStyle: NUM_CELL_STYLE,\r\n                  },\r\n                ]}\r\n                rows={formattedScholarshipsRows.map((r, i) => ({\r\n                  key: String(i),\r\n                  ...r,\r\n                }))}\r\n              />\r\n\r\n              <div\r\n                style={{\r\n                  marginTop: 6,\r\n                  display: \"flex\",\r\n                  justifyContent: \"flex-end\",\r\n                  gap: 12,\r\n                  fontWeight: 700,\r\n                }}\r\n              >\r\n                <div>Toplam Mevcut: {scholarshipTotals.cur}</div>\r\n\r\n                <div>Toplam Planlanan: {scholarshipTotals.planned}</div>\r\n\r\n                <div>Toplam Maliyet: {scholarshipTotals.cost}</div>\r\n              </div>\r\n\r\n              <div style={{ marginTop: 8 }}>\r\n                <SimpleTable\r\n                  columns={MINI_ANALYSIS_COLUMNS}\r\n                  rows={scholarshipAnalysisRows}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <div\r\n                className=\"small\"\r\n                style={{ fontWeight: 700, marginBottom: 6 }}\r\n              >\r\n                ndirimler\r\n              </div>\r\n\r\n              <SimpleTable\r\n                columns={[\r\n                  { key: \"name\", label: \"ndirim\" },\r\n\r\n                  {\r\n                    key: \"cur\",\r\n                    label: \"Mevcut\",\r\n                    thStyle: { width: 90, textAlign: \"right\" },\r\n                    tdStyle: NUM_CELL_STYLE,\r\n                  },\r\n\r\n                  {\r\n                    key: \"planned\",\r\n                    label: \"Planlanan\",\r\n                    thStyle: { width: 110, textAlign: \"right\" },\r\n                    tdStyle: NUM_CELL_STYLE,\r\n                  },\r\n\r\n                  {\r\n                    key: \"cost\",\r\n                    label: \"Maliyet\",\r\n                    thStyle: { width: 120, textAlign: \"right\" },\r\n                    tdStyle: NUM_CELL_STYLE,\r\n                  },\r\n                ]}\r\n                rows={formattedDiscountsRows.map((r, i) => ({\r\n                  key: String(i),\r\n                  ...r,\r\n                }))}\r\n              />\r\n\r\n              <div\r\n                style={{\r\n                  marginTop: 6,\r\n                  display: \"flex\",\r\n                  justifyContent: \"flex-end\",\r\n                  gap: 12,\r\n                  fontWeight: 700,\r\n                }}\r\n              >\r\n                <div>Toplam Mevcut: {discountTotals.cur}</div>\r\n\r\n                <div>Toplam Planlanan: {discountTotals.planned}</div>\r\n\r\n                <div>Toplam Maliyet: {discountTotals.cost}</div>\r\n              </div>\r\n\r\n              <div style={{ marginTop: 8 }}>\r\n                <SimpleTable\r\n                  columns={MINI_ANALYSIS_COLUMNS}\r\n                  rows={discountAnalysisRows}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ marginTop: 12 }}>\r\n          <div style={{ fontWeight: 800, marginBottom: 6 }}>\r\n            C.8. Rakip Kurumlarn Analizi\r\n          </div>\r\n\r\n          <div className=\"small\" style={{ lineHeight: 1.4, marginBottom: 8 }}>\r\n            Edeer kurumlarla yarabilecek eitim kalitesine ve ekonomik gce\r\n            sahip olmak iin okul cretinin rakip kurumlar ile yarabilecek\r\n            yeterlilikte olmas gereklidir.\r\n          </div>\r\n\r\n          <SimpleTable\r\n            columns={[\r\n              { key: \"level\", label: \"Kademe\" },\r\n\r\n              {\r\n                key: \"a\",\r\n                label: \"A Kurum Fiyat\",\r\n                thStyle: { width: 140, textAlign: \"right\" },\r\n                tdStyle: NUM_CELL_STYLE,\r\n              },\r\n\r\n              {\r\n                key: \"b\",\r\n                label: \"B Kurum Fiyat\",\r\n                thStyle: { width: 140, textAlign: \"right\" },\r\n                tdStyle: NUM_CELL_STYLE,\r\n              },\r\n\r\n              {\r\n                key: \"c\",\r\n                label: \"C Kurum Fiyat\",\r\n                thStyle: { width: 140, textAlign: \"right\" },\r\n                tdStyle: NUM_CELL_STYLE,\r\n              },\r\n            ]}\r\n            rows={formattedCompetitorRows.map((r, i) => ({\r\n              key: String(i),\r\n              ...r,\r\n            }))}\r\n          />\r\n        </div>\r\n\r\n        <div style={{ marginTop: 12 }}>\r\n          <div style={{ fontWeight: 800, marginBottom: 6 }}>\r\n            C.9. Yerel Mevzuatta Uygunluk (yasal azami art)\r\n          </div>\r\n\r\n          <div className=\"small\" style={{ lineHeight: 1.4 }}>\r\n            Belirlenecek cretin lke mevzuatna uygun olmas, lkede belirlenen\r\n            azami cret artlar, son  yln resmi enflasyon oran gibi\r\n            parametreler dikkate alnmaldr. Ayrca ev sahibi lke ile yaplm\r\n            Protokol ykmllkleri de mutlaka dikkate alnmaldr.\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ marginTop: 12 }}>\r\n          <div style={{ fontWeight: 800, marginBottom: 6 }}>\r\n            C.10. Mevcut Eitim Sezonu creti\r\n          </div>\r\n\r\n          <div className=\"small\" style={{ lineHeight: 1.4 }}>\r\n            Belirlenecek cretin mevcut eitim dnemi ile uyumlu olmasna azami\r\n            nem gsterilmeli ve srdrlebilir devamllk ilkesi\r\n            gzetilmelidir.\r\n          </div>\r\n        </div>\r\n      </Section>\r\n\r\n      <Section\r\n        title=\"D. GEREKLEEN VE GEREKLEMES PLANLANAN / PERFORMANS\"\r\n        subtitle=\"Bu blm komisyon yeleri tarafndan doldurulacaktr (uygulamada ayrca balanacak).\"\r\n      >\r\n        {perfWarningText ? (\r\n          <div\r\n            style={{\r\n              color: \"#d9534f\",\r\n              marginBottom: 6,\r\n            }}\r\n          >\r\n            {perfWarningText}\r\n          </div>\r\n        ) : null}\r\n        <SimpleTable\r\n          columns={[\r\n            { key: \"metric\", label: \"\" },\r\n\r\n            {\r\n              key: \"planned\",\r\n              label: \"Planlanan\",\r\n              thStyle: { width: 180, textAlign: \"right\" },\r\n              tdStyle: NUM_CELL_STYLE,\r\n            },\r\n\r\n            {\r\n              key: \"actual\",\r\n              label: \"Gerekleen\",\r\n              thStyle: { width: 180, textAlign: \"right\" },\r\n              tdStyle: NUM_CELL_STYLE,\r\n            },\r\n\r\n            {\r\n              key: \"variance\",\r\n              label: \"Sapma %\",\r\n              thStyle: { width: 120, textAlign: \"right\" },\r\n              tdStyle: NUM_CELL_STYLE,\r\n            },\r\n          ]}\r\n          rows={perfRows.map((r, i) => ({ key: String(i), ...r }))}\r\n        />\r\n      </Section>\r\n\r\n      <Section title=\"E. DEERLENDRME\">\r\n        <div className=\"small\" style={{ lineHeight: 1.4 }}>\r\n          Okulun lokasyon, fiziki artlar, varsa karlalan zorluklar,\r\n          blgenin demografik yaps, sosyal ekonomik durumu, enflasyon ve\r\n          belirtmek istediiniz hususlar burada zetlenecektir.\r\n        </div>\r\n\r\n        <div\r\n          style={{\r\n            marginTop: 10,\r\n\r\n            padding: 12,\r\n\r\n            border: \"1px dashed rgba(0,0,0,0.25)\",\r\n\r\n            borderRadius: 10,\r\n\r\n            opacity: 0.85,\r\n          }}\r\n        >\r\n          <div className=\"small\">\r\n            <i>Metin alan (sonraki admda veri balanacak)</i>\r\n          </div>\r\n        </div>\r\n      </Section>\r\n\r\n      <Section title=\"F. KOMSYON GR VE NERLER\">\r\n        <div\r\n          style={{\r\n            padding: 12,\r\n\r\n            border: \"1px dashed rgba(0,0,0,0.25)\",\r\n\r\n            borderRadius: 10,\r\n\r\n            opacity: 0.85,\r\n          }}\r\n        >\r\n          <div className=\"small\">\r\n            <i>Komisyon gr metni (sonraki admda veri balanacak)</i>\r\n          </div>\r\n        </div>\r\n      </Section>\r\n    </div >\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useOutletContext } from \"react-router-dom\";\r\nimport DetailedReportView from \"../../components/DetailedReportView\";\r\n\r\nexport default function DetayliRaporPage() {\r\n  const {\r\n    detailedReportMode,\r\n    setDetailedReportMode,\r\n    selectedScenario,\r\n    reportCurrency,\r\n    setReportCurrency,\r\n    reportExportRef,\r\n    school,\r\n    inputs,\r\n    report,\r\n    prevReport,\r\n    prevScenarioMeta,\r\n    programType,\r\n  } = useOutletContext();\r\n\r\n  const showCurrencyTabs =\r\n    selectedScenario?.input_currency === \"LOCAL\" &&\r\n    Number(selectedScenario?.fx_usd_to_local) > 0 &&\r\n    selectedScenario?.local_currency_code;\r\n\r\n  return (\r\n    <div style={{ marginTop: 12 }}>\r\n      <div className=\"card\">\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            gap: 12,\r\n            alignItems: \"flex-start\",\r\n            flexWrap: \"wrap\",\r\n          }}\r\n        >\r\n          <div style={{ display: \"flex\", gap: 8, flexWrap: \"wrap\", justifyContent: \"flex-end\" }}>\r\n            <button\r\n              className={detailedReportMode === \"onepager\" ? \"btn primary\" : \"btn\"}\r\n              onClick={() => setDetailedReportMode(\"onepager\")}\r\n            >\r\n              Tek Sayfa (Ozet)\r\n            </button>\r\n            <button\r\n              className={detailedReportMode === \"detailed\" ? \"btn primary\" : \"btn\"}\r\n              onClick={() => setDetailedReportMode(\"detailed\")}\r\n            >\r\n              Detayli (RAPOR)\r\n            </button>\r\n            {showCurrencyTabs ? (\r\n              <div className=\"tabs\">\r\n                <button\r\n                  type=\"button\"\r\n                  className={`tab ${reportCurrency === \"usd\" ? \"active\" : \"\"}`}\r\n                  onClick={() => setReportCurrency(\"usd\")}\r\n                >\r\n                  USD\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  className={`tab ${reportCurrency === \"local\" ? \"active\" : \"\"}`}\r\n                  onClick={() => setReportCurrency(\"local\")}\r\n                >\r\n                  {selectedScenario.local_currency_code}\r\n                </button>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div ref={reportExportRef} data-report-export=\"1\" className=\"report-export\">\r\n        <DetailedReportView\r\n          mode={detailedReportMode}\r\n          school={school}\r\n          scenario={selectedScenario}\r\n          inputs={inputs}\r\n          report={report}\r\n          prevReport={prevReport}\r\n          prevCurrencyMeta={prevScenarioMeta}\r\n          reportCurrency={reportCurrency}\r\n          currencyMeta={selectedScenario}\r\n          programType={programType}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","const PROGRAM_TYPES = {\r\n  LOCAL: \"local\",\r\n  INTERNATIONAL: \"international\",\r\n};\r\n\r\nconst ALLOWED_PROGRAM_TYPES = new Set(Object.values(PROGRAM_TYPES));\r\n\r\nfunction normalizeProgramType(value) {\r\n  const raw = String(value || \"\").trim().toLowerCase();\r\n  if (ALLOWED_PROGRAM_TYPES.has(raw)) return raw;\r\n  return PROGRAM_TYPES.LOCAL;\r\n}\r\n\r\nfunction getProgramType(inputs = {}, scenario = null) {\r\n  const programFromInputs =\r\n    inputs?.temelBilgiler?.programType ?? inputs?.programType ?? inputs?.program_type;\r\n  if (programFromInputs) {\r\n    return normalizeProgramType(programFromInputs);\r\n  }\r\n  const programFromScenario = scenario?.program_type || scenario?.programType;\r\n  if (programFromScenario) return normalizeProgramType(programFromScenario);\r\n  return PROGRAM_TYPES.LOCAL;\r\n}\r\n\r\nfunction isKademeKeyVisible(key, programType = PROGRAM_TYPES.LOCAL) {\r\n  const type = normalizeProgramType(programType);\r\n  if (!key) return true;\r\n  if (key === \"okulOncesi\") return true;\r\n  if (key.endsWith(\"Yerel\")) return type === PROGRAM_TYPES.LOCAL;\r\n  if (key.endsWith(\"Int\")) return type === PROGRAM_TYPES.INTERNATIONAL;\r\n  return true;\r\n}\r\n\r\nfunction mapBaseKademeToVariant(baseKademe, programType = PROGRAM_TYPES.LOCAL) {\r\n  const type = normalizeProgramType(programType);\r\n  if (baseKademe === \"okulOncesi\") return \"okulOncesi\";\r\n  const suffix = type === PROGRAM_TYPES.INTERNATIONAL ? \"Int\" : \"Yerel\";\r\n  return `${baseKademe}${suffix}`;\r\n}\r\n\r\nfunction getVariantKeysForProgramType(programType = PROGRAM_TYPES.LOCAL) {\r\n  const type = normalizeProgramType(programType);\r\n  return new Set([\r\n    \"okulOncesi\",\r\n    `ilkokul${type === PROGRAM_TYPES.INTERNATIONAL ? \"Int\" : \"Yerel\"}`,\r\n    `ortaokul${type === PROGRAM_TYPES.INTERNATIONAL ? \"Int\" : \"Yerel\"}`,\r\n    `lise${type === PROGRAM_TYPES.INTERNATIONAL ? \"Int\" : \"Yerel\"}`,\r\n  ]);\r\n}\r\n\r\nexport {\r\n  PROGRAM_TYPES,\r\n  ALLOWED_PROGRAM_TYPES,\r\n  getProgramType,\r\n  normalizeProgramType,\r\n  isKademeKeyVisible,\r\n  mapBaseKademeToVariant,\r\n  getVariantKeysForProgramType,\r\n};\r\n"],"names":["GRADES","KADEME_DEFS","key","label","defaultFrom","defaultTo","normalizeGrade","value","v","String","trim","toUpperCase","test","n","Number","isFinite","gradeIndex","g","indexOf","getKademeDefinitions","map","d","_objectSpread","getDefaultKademeConfig","out","forEach","enabled","from","to","normalizeKademeConfig","config","cfg","row","range","fromValue","toValue","def","_normalizeGrade","_normalizeGrade2","fromIdx","toIdx","normalizeRange","formatKademeLabel","find","concat","getKademeRangeLabel","getKademeForGrade","grade","idx","summarizeGradesByKademe","grades","rows","Array","isArray","okulOncesi","ilkokul","ortaokul","lise","total","r","students","studentsPerBranch","Object","prototype","hasOwnProperty","call","getGradeOptions","DISCOUNT_DEFS","name","SCHOLARSHIP_DEFS","slice","OTHER_DISCOUNT_DEFS","safeNum","clamp","min","max","Math","clamp0","safeDiv","numerator","denominator","num","denom","normalizeText","","","","","","","","","","","","","normalize","replace","split","ch","_map$ch","join","toLowerCase","getRowLabel","code","title","description","item_name","getRowCount","studentCount","count","qty","quantity","scoreMatch","normLabel","aliases","best","alias","startsWith","includes","RegExp","findBestCount","normalizedAliases","score","numOrNull","normalizeName","TUITION_VARIANT_BASE","okuloncesi","ilkokulyerel","ilkokulint","ortaokulyerel","ortaokulint","liseyerel","liseint","getTuitionBaseKey","_ref","_row$key","normalized","level","buildDiscountPlanRowY1","_ref2","tuitionStudents","avgTuition","toUsd","inputDiscounts","currentCount","get","mode","ratio","round","derived","plannedCount","pct","fixedValueUsd","fixedRate","rate","planned","cost","cur","buildDetailedReportModel","_inputs$temelBilgiler","_inputs$temelBilgiler2","_temel$performans","_kapasite$totals","_kapasite$years","_kapasite$totals2","_inputs$gradesYears","_inputs$gelirler","_inputs$gelirler$tuit","_inputs$gelirler2","_inputs$gelirler2$non","_inputs$gelirler3","_inputs$gelirler3$dor","_inputs$gelirler4","_inputs$gelirler4$oth","_inputs$gelirler5","_inputs$gelirler5$dor","_dormByKey$get","_dormByKey$get2","_feeLookup$get$unitFe","_feeLookup$get","_feeLookup$get$unitFe2","_feeLookup$get2","_feeLookup$get$unitFe3","_feeLookup$get3","_feeLookup$get$unitFe4","_feeLookup$get4","_inputs$gelirler6","_inputs$gelirler6$non","_inputs$gelirler7","_inputs$gelirler7$non","_report$years","_report$years$y","_report$years2","_report$years2$y","_inputs$gelirler$gove","_inputs$gelirler8","_inputs$gelirler9","_inputs$gelirler0","_inputs$giderler","_inputs$giderler$ogre","_nonEduExpenseItems$y","_nonEduExpenseItems$u","_ref3","_nonEduExpenseItems$k","_nonEduExpenseItems$k2","_nonEduExpenseItems$k3","_nonEduExpenseItems$k4","_ref4","_nonEduExpenseItems$u2","_nonEduExpenseItems$u3","_nonEduExpenseItems$s","_nonEduExpenseItems$u4","_inputs$giderler2","_inputs$giderler2$yur","_dormExpenseItems$yur","_dormExpenseItems$dig","_inputs$giderler3","_inputs$giderler3$isl","_inputs$gelirler$tuit2","_inputs$gelirler1","_inputs$gelirler$tuit3","_inputs$gelirler10","_prevReport$years","_plannedPerf$students","_plannedPerf$income","_plannedPerf$expenses","_plannedPerf$income2","_ref5","_inflation$uncollecta","_okulEgitim$birDersSu","_okulEgitim$gunlukDer","_okulEgitim$haftalikD","_okulEgitim$ogretmenH","school","scenario","inputs","report","prevReport","prevCurrencyMeta","currencyMeta","programType","arguments","length","undefined","resolvedProgramType","getProgramType","inputCurrency","input_currency","fx","fx_usd_to_local","shouldConvertLocal","prevFx","perfRealizedFx","temelBilgiler","performans","prevYearRealizedFxUsdToLocal","perfRealizedFxValid","plannedFxForLocal","toUsdPerf","raw","headerLabel","school_name","academic_year","filter","Boolean","temel","kademeConfig","kademeler","okulEgitim","okulEgitimBilgileri","ucretArtisOranlari","ikMevcut","gerceklesen","rakipAnalizi","inflation","bursIndirimCounts","bursIndirimOgrenciSayilari","kapasite","byKademe","schoolCapacity","totals","values","reduce","sum","_row$caps","caps","currentStudents","capacityYear1","years","y1","_row$caps2","gradesCurrent","currentStudentsFromGrades","totalBranchesCurrent","branchCount","classroomUtilization","gradesYearsY1","gradesYears","plannedStudents","plannedBranches","plannedUtilization","avgStudentsPerClassPlanned","shiftSystem","sabahciOglenci","programTypeLabel","uygulananProgram","tuitionInputRows","gelirler","tuition","nonEducationRows","nonEducationFees","dormRows","dormitory","otherIncomeRows","otherInstitutionIncome","dormIncomeRows","dormByKey","Map","k","yurtCount","yazOkuluCount","tuitionVisibleRows","_kademeConfig$baseKey","baseKey","isKademeKeyVisible","feeLookup","set","uniformFee","unitFee","booksFee","transportFee","mealFee","nonEduIncomeRows","items","mealCount","uniformCount","bookCount","serviceCount","tuitionRows","raisePct","eduFeeUsd","uniformUsd","booksUsd","transportUsd","mealUsd","totalUsd","edu","uniform","books","transport","meal","buildTuitionRowCosts","totalTuitionStudents","totalTuitionEdu","totalRow","averageRow","tuitionTable","reportIncome","income","reportExpenses","expenses","reportGrossTuition","grossTuition","nonEducationTotal","nonEducationFeesTotal","dormTotal","dormitoryRevenuesTotal","governmentIncentives","otherIncomePure","amount","otherIncomeFromInputs","otherIncomeTotal","grossIncomeBase","totalGrossIncome","calcNonEdRevenue","nonEdRevenues","uniforma","kitap","yemek","ulasim","revenueRows","revenuesDetailed","revenuesDetailedTotal","nonEducationBreakdown","otherIncomeBreakdown","nonEduExpenseItems","giderler","ogrenimDisi","unitMealUsd","unitCost","unitUniformUsd","unitBookUsd","kitapKirtasiye","kirtasiye","unitServiceUsd","ulasimServis","servis","dormExpenseItems","yurt","mealAmount","uniformAmount","bookAmount","serviceAmount","dormYurtAmount","yurtGiderleri","dormOtherAmount","digerYurt","dormAmount","serviceCosts","dormCosts","plannedHeadcountsByRole","_inputs$ik","_inputs$ik$years","_inputs$ik$years$y","hc","ik","headcountsByLevel","levels","keys","sumRole","roleKey","_hc$level","turkPersonelYoneticiEgitimci","turkPersonelTemsilcilik","yerelKadroluEgitimci","yerelUcretliVakaterEgitimci","yerelDestek","yerelTemsilcilik","international","isletmeItems","isletme","operatingTotalUsd","hrTotalUsd","hrTurkCost","turkPersonelMaas","turkDestekPersonelMaas","hrYerelCost","yerelPersonelMaas","yerelDestekPersonelMaas","internationalPersonelMaas","badDebtAmount","tahsilEdilemeyenGelirler","uncollectableExpenseAmount","isletmeGiderleriInputsOnlyUsd","hrRows","item","current","tuitionStudentsFromInputs","grossTuitionFromInputs","avgTuitionFromInputs","tuitionFeePerStudentYearly","scholarshipNameSet","Set","discountInputList","discounts","scholarshipsSumInputs","discountsSumInputs","nameKey","has","scholarshipsAmount","scholarshipsTotal","discountsAmount","discountsTotal","expenseTotal","expenseRows","hrTotal","nonTuitionServicesCostTotal","tuitionStudentsForDiscounts","grossTuitionForDiscounts","avgTuitionForDiscounts","discountInputLookup","list","buildDiscountLookup","scholarships","plannedPerf","plannedStudentsPerf","totalStudents","plannedIncome","netIncome","plannedExpenses","totalExpenses","plannedDiscounts","totalDiscounts","plannedProfit","actualStudents","ogrenciSayisi","actualIncome","actualExpenses","actualDiscounts","bursVeIndirimler","actualProfitFromInputs","storedProfit","karZarar","actualProfit","performanceRows","metric","actual","variance","calcVariance","programTypeSuffix","competitorRows","_kademeConfig$key","source","baseLabel","labelWithRange","a","b","c","scholarshipsTotalCost","discountsTotalCost","scholarshipDiscountCostTotal","parentStudentRevenue","activityGross","sumPlanned","targetStudentsForCost","buildGroupAnalysis","totalCost","plannedGroupStudents","perTargetStudent","studentShare","revenueShare","weightedAvgRate","calcWeightedAvgRate","totalPlanned","discountAnalysis","targetStudents","plannedRaiseAvg","rates","competitorHasData","some","baseYear","academicYear","match","start","single","parseAcademicStartYear","inflationYears","ref","fallbackKeys","year","exact","fallback","inflationHistory","y2023","y2024","y2025","rawCurrentSeasonAvgFee","currentSeasonAvgFee","currentSeasonAvgFeeUsd","rawFinalFee","finalFee","finalFeeUsd","uncollectableRevenuePct","badDebtPct","tahsilEdilemeyenGelirPct","revenueTotal","netTotal","margin","perStudentCost","parameters","no","desc","valueType","expenseDeviationPct","detailedExpenses","targetPct","localCurrencyCode","local_currency_code","performanceMeta","realized_fx_usd_to_local","planned_fx_usd_to_local","currencyCode","academicStartYear","periodStartDate","egitimBaslamaTarihi","compulsoryEducation","zorunluEgitimDonemleri","lessonDuration","birDersSuresiDakika","dailyLessonHours","gunlukDersSaati","weeklyLessonHours","haftalikDersSaatiToplam","teacherWeeklyHoursAvg","ogretmenHaftalikDersOrt","transitionExamInfo","gecisSinaviBilgisi","capacity","buildingCapacity","totalBranches","usedBranches","avgStudentsPerClass","hr","revenues","revenuesMeta","performance","competitors","parametersMeta","scholarshipsAndDiscountsTotal","inflationBaseYear","competitorStatus","detailedExpenseTotal","isFiniteNumber","fmtNumber","opts","maximumFractionDigits","minimumFractionDigits","style","currency","Intl","NumberFormat","format","_unused","fmtMoney","fmtPct","digits","NUM_CELL_STYLE","textAlign","fmtInt","formatAmountRatioRow","formatMoney","_row$amount","_row$ratio","formatScholarshipRow","_row$cur","_row$planned","_row$cost","LEVEL_VARIANT_BASES","inferTuitionVariantKey","explicitKey","Section","children","subtitle","_jsxs","className","marginTop","_jsx","fontWeight","marginBottom","SimpleTable","columns","width","thStyle","tdStyle","colSpan","Kpi","hint","padding","borderRadius","border","opacity","fontSize","lineHeight","DetailedReportView","props","_model$parametersMeta","_model$parametersMeta3","_model$parametersMeta4","_model$parametersMeta6","_model$parametersMeta7","programTypeProp","reportCurrency","model","useMemo","activeProgramType","header","schoolName","canShowLocal","showLocal","localLabel","displayCurrencyCode","displayMoney","useCallback","fmtMoneyDisplay","perfMeta","realFx","planFx","perfLocalCode","realFxValid","showLocalPerf","localPerfFxForPlanned","localPerfFxForActual","perfCurrencyCodePlanned","perfCurrencyCodeActual","plannedFxMissing","actualFxMissing","fmtPerfPlannedMoneyDisplay","fmtPerfActualMoneyDisplay","perfWarningText","fmtMoneyKpi","educationInfoRows","x","i","base","filteredTuitionRows","variantKey","isTuitionRowVisible","formattedTuitionRows","_row$edu","_row$uniform","_row$books","_row$transport","_row$meal","_row$raisePct","_row$total","formatTuitionRow","paramsRows","formatParamValue","param","inflationYearsMeta","_model$parametersMeta2","inflationYearRows","inflationYearLabels","inflationYearValues","paramTableRows","pushRow","push","cells","content","align","capacityStudentRows","capacityClassRows","plannedAvg","revRows","expRows","formattedRevRows","revenueTable","filtered","_model$parametersMeta5","formattedExpRows","detailedExpenseRows","ratioVal","overTarget","targetLabel","highlight","scholarshipAnalysis","discountAnalysisData","MINI_ANALYSIS_COLUMNS","formatCurrencyOrDash","formatPct0OrDash","scholarshipAnalysisRows","discountAnalysisRows","scholarshipsRows","discountsRows","formattedScholarshipsRows","formattedDiscountsRows","scholarshipTotals","acc","discountTotals","perfRows","formatValue","kind","formatter","formattedCompetitorRows","_row$a","_row$b","_row$c","onePagerKpis","_model$currentStudent","_model$capacity","_model$schoolCapacity","_model$capacity2","_model$capacity3","cap","util","revTotal","expTotal","net","display","justifyContent","gap","alignItems","gridTemplateColumns","rowIdx","cell","cellIdx","_cell$content","background","color","DetayliRaporPage","detailedReportMode","setDetailedReportMode","selectedScenario","setReportCurrency","reportExportRef","prevScenarioMeta","useOutletContext","showCurrencyTabs","flexWrap","onClick","type","PROGRAM_TYPES","LOCAL","INTERNATIONAL","ALLOWED_PROGRAM_TYPES","normalizeProgramType","programFromInputs","program_type","programFromScenario","endsWith","mapBaseKademeToVariant","baseKademe","suffix"],"ignoreList":[],"sourceRoot":""}