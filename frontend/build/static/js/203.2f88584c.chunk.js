"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[203],{1998(e,s,a){a.d(s,{F2:()=>c,al:()=>t,dq:()=>d,te:()=>o});var l=a(2555),r=a(2532),n=a(7559);const i={staleTime:6e4};function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.I)((0,l.A)((0,l.A)({queryKey:["countries"],queryFn:()=>n.FH.listCountries()},i),e))}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.I)((0,l.A)((0,l.A)({queryKey:["schools",e],queryFn:()=>n.FH.listSchools(e)},i),s))}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.I)((0,l.A)((0,l.A)({queryKey:["adminUsers",e],queryFn:()=>n.FH.listUsers(e)},i),s))}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.I)((0,l.A)((0,l.A)({queryKey:["managerUsers",e],queryFn:()=>n.FH.managerListUsers(e)},i),s))}},8203(e,s,a){a.r(s),a.d(s,{default:()=>j});var l=a(2555),r=a(5043),n=a(5685),i=a(2115),t=a(3204),o=a(7559),c=a(1998),d=a(579);const u=["Temel Bilgiler","Kapasite","Norm","\u0130K (HR)","Gelirler","Giderler"],m={"Norm \u0130K (HR)":["Norm","\u0130K (HR)"]},h={principal:"Principal",hr:"HR",accountant:"Accountant"},v=[{value:"principal",label:"Principal"},{value:"hr",label:"HR"}],g=e=>{if(!Array.isArray(e))return[];const s=[];return e.forEach(e=>{const a=String(e||"").trim();if(!a)return;const l=m[a];l?s.push(...l):s.push(a)}),Array.from(new Set(s))},p=e=>Array.isArray(e)?e.map(e=>{var s;return{userId:Number(null!==(s=null===e||void 0===e?void 0:e.userId)&&void 0!==s?s:null===e||void 0===e?void 0:e.user_id),role:String((null===e||void 0===e?void 0:e.role)||"").trim().toLowerCase(),modules:g(null===e||void 0===e?void 0:e.modules)}}).filter(e=>Number.isFinite(e.userId)&&e.userId>0&&("principal"===e.role||"hr"===e.role||"accountant"===e.role)):[];function j(){const e=(0,n.KC)(),s=(0,r.useRef)({}),[a,m]=(0,r.useState)([]),[j,x]=(0,r.useState)([]),[f,y]=(0,r.useState)({}),N=(0,r.useRef)({}),[b,A]=(0,r.useState)(!1),[S,w]=(0,r.useState)({}),[C,R]=(0,r.useState)(null),[F,I]=(0,r.useState)("assignments"),[k,H]=(0,r.useState)(""),[E,U]=(0,r.useState)("principal"),[q,M]=(0,r.useState)(""),[P,L]=(0,r.useState)(""),[B,K]=(0,r.useState)(""),[T,_]=(0,r.useState)("principal"),[D,G]=(0,r.useState)(""),[W,Y]=(0,r.useState)(!1),[z,J]=(0,r.useState)(""),[O,Q]=(0,r.useState)(!1),[V,X]=(0,r.useState)({}),[Z,$]=(0,r.useState)({}),[ee,se]=(0,r.useState)({}),[ae,le]=(0,r.useState)({}),[re,ne]=(0,r.useState)({}),ie=(0,c.dq)({limit:50,offset:0,fields:"brief",order:"full_name:asc"}),te=ie.isFetching,oe=(0,c.te)({limit:50,offset:0,fields:"brief",order:"name:asc"}),ce=oe.isFetching;(0,r.useEffect)(()=>{var s;return null===e||void 0===e||null===(s=e.setHeaderMeta)||void 0===s||s.call(e,{title:"Manage Permissions",subtitle:"Assign users to schools and create new users",centered:!0}),()=>{var s;null===e||void 0===e||null===(s=e.clearHeaderMeta)||void 0===s||s.call(e)}},[e]);const de=(0,r.useCallback)(e=>Array.isArray(e)?e:e&&Array.isArray(e.items)?e.items:[],[]),ue=(0,r.useCallback)(async()=>{const e=await ie.refetch();var s;null!==e&&void 0!==e&&e.error&&(console.error(e.error),i.oR.error((null===(s=e.error)||void 0===s?void 0:s.message)||"Failed to load users"))},[ie]),me=(0,r.useCallback)(async()=>{const e=await oe.refetch();var s;null!==e&&void 0!==e&&e.error&&(console.error(e.error),i.oR.error((null===(s=e.error)||void 0===s?void 0:s.message)||"Failed to load schools"))},[oe]);(0,r.useEffect)(()=>{var e;const s=null===(e=ie.data)||void 0===e?void 0:e.items;m(Array.isArray(s)?s:[])},[ie.data]),(0,r.useEffect)(()=>{x(de(oe.data))},[oe.data,de]),(0,r.useEffect)(()=>{var e;ie.isError&&(console.error(ie.error),i.oR.error((null===(e=ie.error)||void 0===e?void 0:e.message)||"Failed to load users"))},[ie.isError,ie.error]),(0,r.useEffect)(()=>{var e;oe.isError&&(console.error(oe.error),i.oR.error((null===(e=oe.error)||void 0===e?void 0:e.message)||"Failed to load schools"))},[oe.isError,oe.error]);const he=(0,r.useCallback)(async e=>{if(Array.isArray(e)&&0!==e.length){A(!0);try{const s=await Promise.allSettled(e.map(e=>o.FH.managerGetSchoolAssignments(e.id))),a={};let l=!1;s.forEach((s,r)=>{var n;const i=null===(n=e[r])||void 0===n?void 0:n.id;null!=i&&("fulfilled"===s.status?a[String(i)]=p(s.value):(l=!0,a[String(i)]=[]))}),l&&i.oR.error("Failed to load some school assignments"),y(a)}catch(s){console.error(s),i.oR.error((null===s||void 0===s?void 0:s.message)||"Failed to load school assignments"),y({})}finally{A(!1)}}else y({})},[]);(0,r.useEffect)(()=>{N.current=f},[f]),(0,r.useEffect)(()=>{0!==j.length?he(j):y({})},[j,he]),(0,r.useEffect)(()=>{C&&(j.some(e=>String(e.id)===String(C))||R(null))},[j,C]),(0,r.useEffect)(()=>{H("")},[C]);const ve=(0,r.useMemo)(()=>j.find(e=>String(e.id)===String(C))||null,[j,C]),ge=(0,r.useMemo)(()=>ve&&f[String(ve.id)]||[],[f,ve]),pe=!!ve&&Boolean(S[String(ve.id)]),je=e=>a.find(s=>Number(s.id)===Number(e))||null,xe=e=>(null===e||void 0===e?void 0:e.full_name)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.email)||(null!=(null===e||void 0===e?void 0:e.id)?"User ".concat(e.id):"Unknown"),fe=e=>{const s=new Set;return(e||[]).forEach(e=>{(e.modules||[]).forEach(e=>s.add(e))}),u.filter(e=>!s.has(e))},ye=(0,r.useCallback)(async(e,a,r)=>{if(!e)return;const n=String(e),t=(s.current[n]||0)+1;s.current[n]=t,w(e=>(0,l.A)((0,l.A)({},e),{},{[n]:!0}));try{const r=(c=a,(Array.isArray(c)?c:[]).map(e=>({userId:e.userId,role:e.role,modules:g(e.modules)}))),i=await o.FH.managerSetSchoolAssignments(e,{assignments:r});if(s.current[n]!==t)return;const d=Array.isArray(i)?i:(null===i||void 0===i?void 0:i.assignments)||r,u=p(d);y(e=>(0,l.A)((0,l.A)({},e),{},{[n]:u}))}catch(d){if(console.error(d),s.current[n]!==t)return;y(e=>(0,l.A)((0,l.A)({},e),{},{[n]:r})),i.oR.error((null===d||void 0===d?void 0:d.message)||"Failed to save assignments")}finally{s.current[n]===t&&w(e=>{const s=(0,l.A)({},e);return delete s[n],s})}var c},[]),Ne=(0,r.useCallback)((e,s)=>{if(!e)return;const a=String(e),r=Array.isArray(N.current[a])?N.current[a]:[],n=s(r);n!==r&&(y(e=>(0,l.A)((0,l.A)({},e),{},{[a]:n})),ye(e,n,r))},[ye]),be=(0,r.useMemo)(()=>{if(!ve)return[];const e=new Set(ge.map(e=>e.userId));return a.filter(s=>!e.has(s.id))},[ge,ve,a]),Ae=(0,r.useMemo)(()=>k&&a.find(e=>String(e.id)===String(k))||null,[k,a]),Se="accountant"===(null===Ae||void 0===Ae?void 0:Ae.role);(0,r.useEffect)(()=>{Ae&&("accountant"===Ae.role&&"accountant"!==E?U("accountant"):"accountant"!==Ae.role&&"accountant"===E&&U("principal"))},[Ae,E]);const we=(0,r.useMemo)(()=>["user","principal","hr"],[]);return(0,d.jsx)("div",{className:"permissions-page",children:(0,d.jsxs)("div",{className:"container permissions-page-content",style:{padding:"1rem"},children:[(0,d.jsx)("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:(0,d.jsxs)("div",{className:"access-hub-tabs",children:[(0,d.jsx)("div",{className:"access-hub-tab ".concat("assignments"===F?"is-active":""),onClick:()=>{I("assignments"),R(null)},children:"School assignments"}),(0,d.jsx)("div",{className:"access-hub-tab ".concat("createUser"===F?"is-active":""),onClick:()=>{I("createUser"),R(null)},children:"Create user"}),(0,d.jsx)("div",{className:"access-hub-tab ".concat("createSchool"===F?"is-active":""),onClick:()=>{I("createSchool"),R(null)},children:"Create school"})]})}),"assignments"===F&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"school-assignments-page",style:{paddingTop:24},children:[(0,d.jsx)("div",{className:"school-assignments-header",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{children:"School assignments"}),(0,d.jsx)("p",{children:"Assign principals, HR users, and module responsibility by school."})]})}),(0,d.jsx)("div",{className:"school-assignments-table-wrap",children:(0,d.jsxs)("table",{className:"table school-assignments-table",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"School"}),(0,d.jsx)("th",{children:"Principals"}),(0,d.jsx)("th",{children:"HR Users"}),(0,d.jsx)("th",{children:"Accountants"}),(0,d.jsx)("th",{children:"Missing Modules"})]})}),(0,d.jsx)("tbody",{children:ce?(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:5,children:"Loading schools..."})}):0===j.length?(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:5,children:"No schools found."})}):j.map(e=>{const s=String(e.id),a=f[s],l=Array.isArray(a),r=l?a.filter(e=>"principal"===e.role).map(e=>xe(je(e.userId))):[],n=l?a.filter(e=>"hr"===e.role).map(e=>xe(je(e.userId))):[],i=l?a.filter(e=>"accountant"===e.role).map(e=>xe(je(e.userId))):[],t=l?fe(a):[];return(0,d.jsxs)("tr",{className:"school-assignments-row",onClick:()=>R(e.id),children:[(0,d.jsx)("td",{children:(0,d.jsx)("div",{className:"school-assignments-name",children:e.name})}),(0,d.jsx)("td",{children:l?r.length>0?r.join(", "):"None":b?"Loading...":"None"}),(0,d.jsx)("td",{children:l?n.length>0?n.join(", "):"None":b?"Loading...":"None"}),(0,d.jsx)("td",{children:l?i.length>0?i.join(", "):"None":b?"Loading...":"None"}),(0,d.jsx)("td",{className:"school-assignments-missing",children:l?t.length>0?t.join(", "):"None":b?"Loading...":"None"})]},e.id)})})]})})]}),(0,d.jsx)("div",{className:"school-assignments-overlay ".concat(ve?"is-open":""),onClick:()=>R(null),role:"button","aria-label":"Close school assignments",tabIndex:-1}),(0,d.jsxs)("aside",{className:"school-assignments-drawer ".concat(ve?"is-open":""),children:[(0,d.jsxs)("div",{className:"school-assignments-drawer-header",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"school-assignments-drawer-title",children:"School assignments"}),(0,d.jsx)("div",{className:"school-assignments-drawer-subtitle",children:ve?ve.name:"Select a school"})]}),(0,d.jsx)("button",{className:"btn school-assignments-close",onClick:()=>R(null),"aria-label":"Close drawer",type:"button",children:"\xd7"})]}),(0,d.jsx)("div",{className:"school-assignments-drawer-body",children:ve?Array.isArray(f[String(ve.id)])?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"school-assignments-section-title",children:"Assigned users"}),0===ge.length?(0,d.jsx)("div",{className:"school-assignments-empty",children:"No users assigned yet."}):ge.map(e=>{const s=je(e.userId),a=u.length>0&&u.every(s=>(e.modules||[]).includes(s));return(0,d.jsxs)("div",{className:"school-assignments-card",children:[(0,d.jsxs)("div",{className:"school-assignments-card-header",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"school-assignments-card-name",children:xe(s)}),(0,d.jsx)("div",{className:"school-assignments-card-role",children:h[e.role]||e.role})]}),(0,d.jsx)("button",{className:"btn btn-sm danger",onClick:()=>{return s=ve.id,a=e.userId,void Ne(s,e=>e.filter(e=>e.userId!==a));var s,a},type:"button",disabled:pe,children:"Remove"})]}),(0,d.jsxs)("div",{className:"school-assignments-modules",children:[(0,d.jsxs)("label",{className:"school-assignments-module-item",children:[(0,d.jsx)("input",{type:"checkbox",checked:a,onChange:s=>{return a=ve.id,r=e.userId,n=e.role,i=s.target.checked,void Ne(a,e=>e.map(e=>e.userId!==r||e.role!==n?e:(0,l.A)((0,l.A)({},e),{},{modules:i?[...u]:[]})));var a,r,n,i},disabled:pe}),(0,d.jsx)("span",{children:"Select all"})]}),u.map(s=>(0,d.jsxs)("label",{className:"school-assignments-module-item",children:[(0,d.jsx)("input",{type:"checkbox",checked:(e.modules||[]).includes(s),onChange:()=>((e,s,a,r)=>{Ne(e,e=>e.map(e=>{if(e.userId!==s||e.role!==a)return e;const n=Array.isArray(e.modules)?e.modules:[],i=n.includes(r)?n.filter(e=>e!==r):[...n,r];return(0,l.A)((0,l.A)({},e),{},{modules:i})}))})(ve.id,e.userId,e.role,s),disabled:pe}),(0,d.jsx)("span",{children:s})]},s))]})]},e.userId)}),(0,d.jsx)("div",{className:"school-assignments-section-title",children:"Add user"}),(0,d.jsxs)("div",{className:"school-assignments-add-card",children:[(0,d.jsxs)("div",{className:"school-assignments-add-row",children:[(0,d.jsxs)("select",{className:"input",value:k,onChange:e=>H(e.target.value),disabled:0===be.length||pe||te,children:[(0,d.jsx)("option",{value:"",children:"Select user"}),be.map(e=>(0,d.jsx)("option",{value:e.id,children:xe(e)},e.id))]}),(0,d.jsx)("select",{className:"input",value:E,onChange:e=>U(e.target.value),disabled:pe||Se,children:(Se?[{value:"accountant",label:"Accountant"}]:v).map(e=>(0,d.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,d.jsx)("button",{className:"btn primary",onClick:()=>{if(!ve||!k)return;const e=Number(k);if(!Number.isFinite(e))return;const s="accountant"===(null===Ae||void 0===Ae?void 0:Ae.role)?"accountant":E;Ne(ve.id,a=>a.some(s=>s.userId===e)?a:[...a,{userId:e,role:s,modules:[]}]),H("")},disabled:!k||pe,type:"button",children:"Add"})]}),!te&&0===be.length&&(0,d.jsx)("div",{className:"small",children:"All users are already assigned."}),te&&(0,d.jsx)("div",{className:"small",children:"Loading users..."})]}),(0,d.jsxs)("div",{className:"school-assignments-missing-line",children:[(0,d.jsx)("span",{className:"school-assignments-missing-label",children:"Missing modules:"})," ",fe(ge).length>0?fe(ge).join(", "):"None",pe&&(0,d.jsx)("span",{className:"small",children:"Saving..."})]})]}):(0,d.jsx)("div",{className:"school-assignments-empty",children:"Loading assignments..."}):(0,d.jsx)("div",{className:"school-assignments-empty",children:"Select a school to start editing."})})]})]}),"createUser"===F&&(0,d.jsxs)("div",{className:"access-hub-grid",style:{marginTop:16},children:[(0,d.jsxs)("div",{className:"left-pane",children:[(0,d.jsx)("div",{style:{marginBottom:12,fontWeight:700},children:"Create a new user"}),(0,d.jsx)("div",{className:"small",style:{marginBottom:12},children:"Fill out the form to create a new Principal or HR user. You can optionally assign the user to a school in your country."})]}),(0,d.jsxs)("div",{className:"right-pane",children:[(0,d.jsxs)("form",{onSubmit:async e=>{var s;null===e||void 0===e||null===(s=e.preventDefault)||void 0===s||s.call(e);const a=P.trim();if(a&&B)if(B.length<8)i.oR.error("Password must be at least 8 characters");else if(["principal","hr"].includes(T)){Y(!0);try{const e={full_name:q?q.trim():null,email:a,password:B,role:T},s=await o.FH.managerCreateUser(e);i.oR.success("User created"),await ue();const l=D;if(l){const e=null===s||void 0===s?void 0:s.id;if(e){const s=String(l),a=Array.isArray(N.current[s])?N.current[s]:[],r=[...a,{userId:e,role:T,modules:[]}];ye(l,r,a)}}M(""),L(""),K(""),_("principal"),G("")}catch(l){console.error(l),i.oR.error((null===l||void 0===l?void 0:l.message)||"Failed to create user")}finally{Y(!1)}}else i.oR.error("Role must be Principal or HR");else i.oR.error("Email and password are required")},className:"create-user-form",children:[(0,d.jsxs)("div",{className:"row",style:{flexDirection:"column",gap:8,marginBottom:12},children:[(0,d.jsx)("input",{className:"input full",placeholder:"Full name",value:q,onChange:e=>M(e.target.value)}),(0,d.jsx)("input",{className:"input full",placeholder:"Email",type:"email",value:P,onChange:e=>L(e.target.value)}),(0,d.jsx)("input",{className:"input full",placeholder:"Temporary password",type:"password",value:B,onChange:e=>K(e.target.value)}),(0,d.jsxs)("select",{className:"input full",value:T,onChange:e=>_(e.target.value),children:[(0,d.jsx)("option",{value:"principal",children:"Principal"}),(0,d.jsx)("option",{value:"hr",children:"HR"})]}),(0,d.jsxs)("select",{className:"input full",value:D,onChange:e=>G(e.target.value),children:[(0,d.jsx)("option",{value:"",children:"Unassigned to school"}),j.map(e=>(0,d.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,d.jsx)("div",{className:"row",style:{justifyContent:"flex-end",gap:8},children:(0,d.jsx)("button",{type:"submit",className:"btn primary",disabled:W,children:(0,d.jsxs)("span",{className:"row",style:{gap:6,alignItems:"center"},children:[(0,d.jsx)(t.NPy,{"aria-hidden":"true"}),(0,d.jsx)("span",{children:W?"Creating...":"Create user"})]})})})]}),(0,d.jsxs)("div",{className:"user-management-section",children:[(0,d.jsx)("div",{className:"user-management-title",children:"Users in your country"}),te?(0,d.jsx)("div",{className:"small",children:"Loading users..."}):0===a.length?(0,d.jsx)("div",{className:"small",children:"No users found."}):(0,d.jsxs)("div",{className:"user-management-list",children:[(0,d.jsxs)("div",{className:"user-management-header",children:[(0,d.jsx)("div",{children:"User"}),(0,d.jsx)("div",{children:"Email"}),(0,d.jsx)("div",{children:"Role"}),(0,d.jsx)("div",{children:"Actions"})]}),a.map(e=>{var s,a,r,n;const t=e.id,c=null!==(s=null!==(a=Z[t])&&void 0!==a?a:e.email)&&void 0!==s?s:"",u=null!==(r=null!==(n=V[t])&&void 0!==n?n:e.role)&&void 0!==r?r:"user",m=we.includes(e.role),h=Boolean(ee[t]),v=Boolean(ae[t]);return(0,d.jsxs)("div",{className:"user-management-row",children:[(0,d.jsxs)("div",{className:"user-management-name",children:[(0,d.jsx)("div",{children:xe(e)}),(0,d.jsx)("div",{className:"small",children:e.email})]}),(0,d.jsx)("div",{children:(0,d.jsx)("input",{className:"input full",value:c,onChange:e=>((e,s)=>{$(a=>(0,l.A)((0,l.A)({},a),{},{[e]:s}))})(t,e.target.value),disabled:h})}),(0,d.jsx)("div",{children:m?(0,d.jsxs)("select",{className:"input full",value:u,onChange:e=>((e,s)=>{X(a=>(0,l.A)((0,l.A)({},a),{},{[e]:s}))})(t,e.target.value),disabled:h,children:[(0,d.jsx)("option",{value:"user",children:"User"}),(0,d.jsx)("option",{value:"principal",children:"Principal"}),(0,d.jsx)("option",{value:"hr",children:"HR"})]}):(0,d.jsx)("div",{className:"user-management-role",children:e.role})}),(0,d.jsxs)("div",{className:"user-management-actions",children:[(0,d.jsx)("button",{type:"button",className:"btn",onClick:()=>(async e=>{var s,a,r,n;if(!e)return;const t=e.id,c=String(null!==(s=null!==(a=Z[t])&&void 0!==a?a:e.email)&&void 0!==s?s:"").trim(),d=String(null!==(r=null!==(n=V[t])&&void 0!==n?n:e.role)&&void 0!==r?r:"").trim().toLowerCase(),u=we.includes(e.role)||we.includes(d),m=[];if(c&&c!==e.email&&m.push(()=>o.FH.managerUpdateUserEmail(t,{email:c})),u&&d&&d!==e.role&&m.push(()=>o.FH.managerUpdateUserRole(t,{role:d})),0!==m.length){se(e=>(0,l.A)((0,l.A)({},e),{},{[t]:!0}));try{for(const e of m)await e();i.oR.success("User updated"),await ue(),X(e=>{const s=(0,l.A)({},e);return delete s[t],s}),$(e=>{const s=(0,l.A)({},e);return delete s[t],s})}catch(h){console.error(h),i.oR.error((null===h||void 0===h?void 0:h.message)||"Failed to update user")}finally{se(e=>{const s=(0,l.A)({},e);return delete s[t],s})}}else i.oR.info("No changes to save")})(e),disabled:h,children:h?"Saving...":"Save"}),(0,d.jsx)("button",{type:"button",className:"btn",onClick:()=>(async e=>{if(!e)return;const s=e.id;le(e=>(0,l.A)((0,l.A)({},e),{},{[s]:!0}));try{const e=await o.FH.managerResetUserPassword(s),a=null===e||void 0===e?void 0:e.temporary_password;a&&ne(e=>(0,l.A)((0,l.A)({},e),{},{[s]:a})),i.oR.success("Temporary password generated")}catch(a){console.error(a),i.oR.error((null===a||void 0===a?void 0:a.message)||"Failed to reset password")}finally{le(e=>{const a=(0,l.A)({},e);return delete a[s],a})}})(e),disabled:v,children:v?"Resetting...":"Reset password"})]}),re[t]&&(0,d.jsxs)("div",{className:"user-management-temp",children:["Temporary password:"," ",(0,d.jsx)("span",{className:"user-management-temp-value",children:re[t]})]})]},t)})]})]})]})]}),"createSchool"===F&&(0,d.jsxs)("div",{className:"access-hub-grid",style:{marginTop:16},children:[(0,d.jsxs)("div",{className:"left-pane",children:[(0,d.jsx)("div",{style:{marginBottom:12,fontWeight:700},children:"Create a new school"}),(0,d.jsx)("div",{className:"small",style:{marginBottom:12},children:"Add a school in your country to start assigning users and modules."})]}),(0,d.jsx)("div",{className:"right-pane",children:(0,d.jsxs)("form",{onSubmit:async e=>{var s;null===e||void 0===e||null===(s=e.preventDefault)||void 0===s||s.call(e);const a=z.trim();if(a){Q(!0);try{await o.FH.createSchool({name:a}),i.oR.success("School created"),J(""),await me()}catch(l){console.error(l),i.oR.error((null===l||void 0===l?void 0:l.message)||"Failed to create school")}finally{Q(!1)}}else i.oR.error("School name is required")},className:"create-school-form",children:[(0,d.jsx)("div",{className:"row",style:{flexDirection:"column",gap:8,marginBottom:12},children:(0,d.jsx)("input",{className:"input full",placeholder:"School name",value:z,onChange:e=>J(e.target.value)})}),(0,d.jsx)("div",{className:"row",style:{justifyContent:"flex-end",gap:8},children:(0,d.jsx)("button",{type:"submit",className:"btn primary",disabled:O,children:(0,d.jsxs)("span",{className:"row",style:{gap:6,alignItems:"center"},children:[(0,d.jsx)(t.iM1,{"aria-hidden":"true"}),(0,d.jsx)("span",{children:O?"Creating...":"Create school"})]})})})]})})]})]})})}}}]);
//# sourceMappingURL=203.2f88584c.chunk.js.map