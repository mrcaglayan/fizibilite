"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[203],{1998(e,s,l){l.d(s,{F2:()=>c,al:()=>t,dq:()=>d,te:()=>o});var a=l(2555),r=l(2532),n=l(7559);const i={staleTime:6e4};function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.I)((0,a.A)((0,a.A)({queryKey:["countries"],queryFn:()=>n.FH.listCountries()},i),e))}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.I)((0,a.A)((0,a.A)({queryKey:["schools",e],queryFn:()=>n.FH.listSchools(e)},i),s))}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.I)((0,a.A)((0,a.A)({queryKey:["adminUsers",e],queryFn:()=>n.FH.listUsers(e)},i),s))}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.I)((0,a.A)((0,a.A)({queryKey:["managerUsers",e],queryFn:()=>n.FH.managerListUsers(e)},i),s))}},8203(e,s,l){l.r(s),l.d(s,{default:()=>p});var a=l(2555),r=l(5043),n=l(5685),i=l(2115),t=l(7559),o=l(1998),c=l(579);const d=["Temel Bilgiler","Kapasite","Norm","\u0130K (HR)","Gelirler","Giderler"],u={"Norm \u0130K (HR)":["Norm","\u0130K (HR)"]},m={principal:"Principal",hr:"HR",accountant:"Accountant"},h=[{value:"principal",label:"Principal"},{value:"hr",label:"HR"}],v=e=>{if(!Array.isArray(e))return[];const s=[];return e.forEach(e=>{const l=String(e||"").trim();if(!l)return;const a=u[l];a?s.push(...a):s.push(l)}),Array.from(new Set(s))},g=e=>Array.isArray(e)?e.map(e=>{var s;return{userId:Number(null!==(s=null===e||void 0===e?void 0:e.userId)&&void 0!==s?s:null===e||void 0===e?void 0:e.user_id),role:String((null===e||void 0===e?void 0:e.role)||"").trim().toLowerCase(),modules:v(null===e||void 0===e?void 0:e.modules)}}).filter(e=>Number.isFinite(e.userId)&&e.userId>0&&("principal"===e.role||"hr"===e.role||"accountant"===e.role)):[];function p(){const e=(0,n.KC)(),s=(0,r.useRef)({}),[l,u]=(0,r.useState)([]),[p,j]=(0,r.useState)([]),[x,f]=(0,r.useState)({}),y=(0,r.useRef)({}),[N,b]=(0,r.useState)(!1),[A,S]=(0,r.useState)({}),[w,C]=(0,r.useState)(null),[R,F]=(0,r.useState)("assignments"),[I,k]=(0,r.useState)(""),[H,E]=(0,r.useState)("principal"),[U,q]=(0,r.useState)(""),[L,M]=(0,r.useState)(""),[P,B]=(0,r.useState)(""),[K,T]=(0,r.useState)("principal"),[_,D]=(0,r.useState)(""),[G,W]=(0,r.useState)(!1),[Y,z]=(0,r.useState)(""),[J,O]=(0,r.useState)(!1),[Q,V]=(0,r.useState)({}),[X,Z]=(0,r.useState)({}),[$,ee]=(0,r.useState)({}),[se,le]=(0,r.useState)({}),[ae,re]=(0,r.useState)({}),ne=(0,o.dq)({limit:50,offset:0,fields:"brief",order:"full_name:asc"}),ie=ne.isFetching,te=(0,o.te)({limit:50,offset:0,fields:"brief",order:"name:asc"}),oe=te.isFetching;(0,r.useEffect)(()=>{var s;return null===e||void 0===e||null===(s=e.setHeaderMeta)||void 0===s||s.call(e,{title:"Manage Permissions",subtitle:"Assign users to schools and create new users",centered:!0}),()=>{var s;null===e||void 0===e||null===(s=e.clearHeaderMeta)||void 0===s||s.call(e)}},[e]);const ce=(0,r.useCallback)(e=>Array.isArray(e)?e:e&&Array.isArray(e.items)?e.items:[],[]),de=(0,r.useCallback)(async()=>{const e=await ne.refetch();var s;null!==e&&void 0!==e&&e.error&&(console.error(e.error),i.oR.error((null===(s=e.error)||void 0===s?void 0:s.message)||"Failed to load users"))},[ne]),ue=(0,r.useCallback)(async()=>{const e=await te.refetch();var s;null!==e&&void 0!==e&&e.error&&(console.error(e.error),i.oR.error((null===(s=e.error)||void 0===s?void 0:s.message)||"Failed to load schools"))},[te]);(0,r.useEffect)(()=>{var e;const s=null===(e=ne.data)||void 0===e?void 0:e.items;u(Array.isArray(s)?s:[])},[ne.data]),(0,r.useEffect)(()=>{j(ce(te.data))},[te.data,ce]),(0,r.useEffect)(()=>{var e;ne.isError&&(console.error(ne.error),i.oR.error((null===(e=ne.error)||void 0===e?void 0:e.message)||"Failed to load users"))},[ne.isError,ne.error]),(0,r.useEffect)(()=>{var e;te.isError&&(console.error(te.error),i.oR.error((null===(e=te.error)||void 0===e?void 0:e.message)||"Failed to load schools"))},[te.isError,te.error]);const me=(0,r.useCallback)(async e=>{if(Array.isArray(e)&&0!==e.length){b(!0);try{const s=await Promise.allSettled(e.map(e=>t.FH.managerGetSchoolAssignments(e.id))),l={};let a=!1;s.forEach((s,r)=>{var n;const i=null===(n=e[r])||void 0===n?void 0:n.id;null!=i&&("fulfilled"===s.status?l[String(i)]=g(s.value):(a=!0,l[String(i)]=[]))}),a&&i.oR.error("Failed to load some school assignments"),f(l)}catch(s){console.error(s),i.oR.error((null===s||void 0===s?void 0:s.message)||"Failed to load school assignments"),f({})}finally{b(!1)}}else f({})},[]);(0,r.useEffect)(()=>{y.current=x},[x]),(0,r.useEffect)(()=>{0!==p.length?me(p):f({})},[p,me]),(0,r.useEffect)(()=>{w&&(p.some(e=>String(e.id)===String(w))||C(null))},[p,w]),(0,r.useEffect)(()=>{k("")},[w]);const he=(0,r.useMemo)(()=>p.find(e=>String(e.id)===String(w))||null,[p,w]),ve=(0,r.useMemo)(()=>he&&x[String(he.id)]||[],[x,he]),ge=!!he&&Boolean(A[String(he.id)]),pe=e=>l.find(s=>Number(s.id)===Number(e))||null,je=e=>(null===e||void 0===e?void 0:e.full_name)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.email)||(null!=(null===e||void 0===e?void 0:e.id)?"User ".concat(e.id):"Unknown"),xe=e=>{const s=new Set;return(e||[]).forEach(e=>{(e.modules||[]).forEach(e=>s.add(e))}),d.filter(e=>!s.has(e))},fe=(0,r.useCallback)(async(e,l,r)=>{if(!e)return;const n=String(e),o=(s.current[n]||0)+1;s.current[n]=o,S(e=>(0,a.A)((0,a.A)({},e),{},{[n]:!0}));try{const r=(c=l,(Array.isArray(c)?c:[]).map(e=>({userId:e.userId,role:e.role,modules:v(e.modules)}))),i=await t.FH.managerSetSchoolAssignments(e,{assignments:r});if(s.current[n]!==o)return;const d=Array.isArray(i)?i:(null===i||void 0===i?void 0:i.assignments)||r,u=g(d);f(e=>(0,a.A)((0,a.A)({},e),{},{[n]:u}))}catch(d){if(console.error(d),s.current[n]!==o)return;f(e=>(0,a.A)((0,a.A)({},e),{},{[n]:r})),i.oR.error((null===d||void 0===d?void 0:d.message)||"Failed to save assignments")}finally{s.current[n]===o&&S(e=>{const s=(0,a.A)({},e);return delete s[n],s})}var c},[]),ye=(0,r.useCallback)((e,s)=>{if(!e)return;const l=String(e),r=Array.isArray(y.current[l])?y.current[l]:[],n=s(r);n!==r&&(f(e=>(0,a.A)((0,a.A)({},e),{},{[l]:n})),fe(e,n,r))},[fe]),Ne=(0,r.useMemo)(()=>{if(!he)return[];const e=new Set(ve.map(e=>e.userId));return l.filter(s=>!e.has(s.id))},[ve,he,l]),be=(0,r.useMemo)(()=>I&&l.find(e=>String(e.id)===String(I))||null,[I,l]),Ae="accountant"===(null===be||void 0===be?void 0:be.role);(0,r.useEffect)(()=>{be&&("accountant"===be.role&&"accountant"!==H?E("accountant"):"accountant"!==be.role&&"accountant"===H&&E("principal"))},[be,H]);const Se=(0,r.useMemo)(()=>["user","principal","hr"],[]);return(0,c.jsx)("div",{className:"permissions-page",children:(0,c.jsxs)("div",{className:"container permissions-page-content",style:{padding:"1rem"},children:[(0,c.jsx)("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:(0,c.jsxs)("div",{className:"access-hub-tabs",children:[(0,c.jsx)("div",{className:"access-hub-tab ".concat("assignments"===R?"is-active":""),onClick:()=>{F("assignments"),C(null)},children:"School assignments"}),(0,c.jsx)("div",{className:"access-hub-tab ".concat("createUser"===R?"is-active":""),onClick:()=>{F("createUser"),C(null)},children:"Create user"}),(0,c.jsx)("div",{className:"access-hub-tab ".concat("createSchool"===R?"is-active":""),onClick:()=>{F("createSchool"),C(null)},children:"Create school"})]})}),"assignments"===R&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"school-assignments-page",style:{paddingTop:24},children:[(0,c.jsx)("div",{className:"school-assignments-header",children:(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{children:"School assignments"}),(0,c.jsx)("p",{children:"Assign principals, HR users, and module responsibility by school."})]})}),(0,c.jsx)("div",{className:"school-assignments-table-wrap",children:(0,c.jsxs)("table",{className:"table school-assignments-table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"School"}),(0,c.jsx)("th",{children:"Principals"}),(0,c.jsx)("th",{children:"HR Users"}),(0,c.jsx)("th",{children:"Accountants"}),(0,c.jsx)("th",{children:"Missing Modules"})]})}),(0,c.jsx)("tbody",{children:oe?(0,c.jsx)("tr",{children:(0,c.jsx)("td",{colSpan:5,children:"Loading schools..."})}):0===p.length?(0,c.jsx)("tr",{children:(0,c.jsx)("td",{colSpan:5,children:"No schools found."})}):p.map(e=>{const s=String(e.id),l=x[s],a=Array.isArray(l),r=a?l.filter(e=>"principal"===e.role).map(e=>je(pe(e.userId))):[],n=a?l.filter(e=>"hr"===e.role).map(e=>je(pe(e.userId))):[],i=a?l.filter(e=>"accountant"===e.role).map(e=>je(pe(e.userId))):[],t=a?xe(l):[];return(0,c.jsxs)("tr",{className:"school-assignments-row",onClick:()=>C(e.id),children:[(0,c.jsx)("td",{children:(0,c.jsx)("div",{className:"school-assignments-name",children:e.name})}),(0,c.jsx)("td",{children:a?r.length>0?r.join(", "):"None":N?"Loading...":"None"}),(0,c.jsx)("td",{children:a?n.length>0?n.join(", "):"None":N?"Loading...":"None"}),(0,c.jsx)("td",{children:a?i.length>0?i.join(", "):"None":N?"Loading...":"None"}),(0,c.jsx)("td",{className:"school-assignments-missing",children:a?t.length>0?t.join(", "):"None":N?"Loading...":"None"})]},e.id)})})]})})]}),(0,c.jsx)("div",{className:"school-assignments-overlay ".concat(he?"is-open":""),onClick:()=>C(null),role:"button","aria-label":"Close school assignments",tabIndex:-1}),(0,c.jsxs)("aside",{className:"school-assignments-drawer ".concat(he?"is-open":""),children:[(0,c.jsxs)("div",{className:"school-assignments-drawer-header",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"school-assignments-drawer-title",children:"School assignments"}),(0,c.jsx)("div",{className:"school-assignments-drawer-subtitle",children:he?he.name:"Select a school"})]}),(0,c.jsx)("button",{className:"btn school-assignments-close",onClick:()=>C(null),"aria-label":"Close drawer",type:"button",children:"\xd7"})]}),(0,c.jsx)("div",{className:"school-assignments-drawer-body",children:he?Array.isArray(x[String(he.id)])?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"school-assignments-section-title",children:"Assigned users"}),0===ve.length?(0,c.jsx)("div",{className:"school-assignments-empty",children:"No users assigned yet."}):ve.map(e=>{const s=pe(e.userId),l=d.length>0&&d.every(s=>(e.modules||[]).includes(s));return(0,c.jsxs)("div",{className:"school-assignments-card",children:[(0,c.jsxs)("div",{className:"school-assignments-card-header",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"school-assignments-card-name",children:je(s)}),(0,c.jsx)("div",{className:"school-assignments-card-role",children:m[e.role]||e.role})]}),(0,c.jsx)("button",{className:"btn btn-sm danger",onClick:()=>{return s=he.id,l=e.userId,void ye(s,e=>e.filter(e=>e.userId!==l));var s,l},type:"button",disabled:ge,children:"Remove"})]}),(0,c.jsxs)("div",{className:"school-assignments-modules",children:[(0,c.jsxs)("label",{className:"school-assignments-module-item",children:[(0,c.jsx)("input",{type:"checkbox",checked:l,onChange:s=>{return l=he.id,r=e.userId,n=e.role,i=s.target.checked,void ye(l,e=>e.map(e=>e.userId!==r||e.role!==n?e:(0,a.A)((0,a.A)({},e),{},{modules:i?[...d]:[]})));var l,r,n,i},disabled:ge}),(0,c.jsx)("span",{children:"Select all"})]}),d.map(s=>(0,c.jsxs)("label",{className:"school-assignments-module-item",children:[(0,c.jsx)("input",{type:"checkbox",checked:(e.modules||[]).includes(s),onChange:()=>((e,s,l,r)=>{ye(e,e=>e.map(e=>{if(e.userId!==s||e.role!==l)return e;const n=Array.isArray(e.modules)?e.modules:[],i=n.includes(r)?n.filter(e=>e!==r):[...n,r];return(0,a.A)((0,a.A)({},e),{},{modules:i})}))})(he.id,e.userId,e.role,s),disabled:ge}),(0,c.jsx)("span",{children:s})]},s))]})]},e.userId)}),(0,c.jsx)("div",{className:"school-assignments-section-title",children:"Add user"}),(0,c.jsxs)("div",{className:"school-assignments-add-card",children:[(0,c.jsxs)("div",{className:"school-assignments-add-row",children:[(0,c.jsxs)("select",{className:"input",value:I,onChange:e=>k(e.target.value),disabled:0===Ne.length||ge||ie,children:[(0,c.jsx)("option",{value:"",children:"Select user"}),Ne.map(e=>(0,c.jsx)("option",{value:e.id,children:je(e)},e.id))]}),(0,c.jsx)("select",{className:"input",value:H,onChange:e=>E(e.target.value),disabled:ge||Ae,children:(Ae?[{value:"accountant",label:"Accountant"}]:h).map(e=>(0,c.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,c.jsx)("button",{className:"btn primary",onClick:()=>{if(!he||!I)return;const e=Number(I);if(!Number.isFinite(e))return;const s="accountant"===(null===be||void 0===be?void 0:be.role)?"accountant":H;ye(he.id,l=>l.some(s=>s.userId===e)?l:[...l,{userId:e,role:s,modules:[]}]),k("")},disabled:!I||ge,type:"button",children:"Add"})]}),!ie&&0===Ne.length&&(0,c.jsx)("div",{className:"small",children:"All users are already assigned."}),ie&&(0,c.jsx)("div",{className:"small",children:"Loading users..."})]}),(0,c.jsxs)("div",{className:"school-assignments-missing-line",children:[(0,c.jsx)("span",{className:"school-assignments-missing-label",children:"Missing modules:"})," ",xe(ve).length>0?xe(ve).join(", "):"None",ge&&(0,c.jsx)("span",{className:"small",children:"Saving..."})]})]}):(0,c.jsx)("div",{className:"school-assignments-empty",children:"Loading assignments..."}):(0,c.jsx)("div",{className:"school-assignments-empty",children:"Select a school to start editing."})})]})]}),"createUser"===R&&(0,c.jsxs)("div",{className:"access-hub-grid",style:{marginTop:16},children:[(0,c.jsxs)("div",{className:"left-pane",children:[(0,c.jsx)("div",{style:{marginBottom:12,fontWeight:700},children:"Create a new user"}),(0,c.jsx)("div",{className:"small",style:{marginBottom:12},children:"Fill out the form to create a new Principal or HR user. You can optionally assign the user to a school in your country."})]}),(0,c.jsxs)("div",{className:"right-pane",children:[(0,c.jsxs)("form",{onSubmit:async e=>{var s;null===e||void 0===e||null===(s=e.preventDefault)||void 0===s||s.call(e);const l=L.trim();if(l&&P)if(P.length<8)i.oR.error("Password must be at least 8 characters");else if(["principal","hr"].includes(K)){W(!0);try{const e={full_name:U?U.trim():null,email:l,password:P,role:K},s=await t.FH.managerCreateUser(e);i.oR.success("User created"),await de();const a=_;if(a){const e=null===s||void 0===s?void 0:s.id;if(e){const s=String(a),l=Array.isArray(y.current[s])?y.current[s]:[],r=[...l,{userId:e,role:K,modules:[]}];fe(a,r,l)}}q(""),M(""),B(""),T("principal"),D("")}catch(a){console.error(a),i.oR.error((null===a||void 0===a?void 0:a.message)||"Failed to create user")}finally{W(!1)}}else i.oR.error("Role must be Principal or HR");else i.oR.error("Email and password are required")},className:"create-user-form",children:[(0,c.jsxs)("div",{className:"row",style:{flexDirection:"column",gap:8,marginBottom:12},children:[(0,c.jsx)("input",{className:"input full",placeholder:"Full name",value:U,onChange:e=>q(e.target.value)}),(0,c.jsx)("input",{className:"input full",placeholder:"Email",type:"email",value:L,onChange:e=>M(e.target.value)}),(0,c.jsx)("input",{className:"input full",placeholder:"Temporary password",type:"password",value:P,onChange:e=>B(e.target.value)}),(0,c.jsxs)("select",{className:"input full",value:K,onChange:e=>T(e.target.value),children:[(0,c.jsx)("option",{value:"principal",children:"Principal"}),(0,c.jsx)("option",{value:"hr",children:"HR"})]}),(0,c.jsxs)("select",{className:"input full",value:_,onChange:e=>D(e.target.value),children:[(0,c.jsx)("option",{value:"",children:"Unassigned to school"}),p.map(e=>(0,c.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,c.jsx)("div",{className:"row",style:{justifyContent:"flex-end",gap:8},children:(0,c.jsx)("button",{type:"submit",className:"btn primary",disabled:G,children:G?"Creating...":"Create user"})})]}),(0,c.jsxs)("div",{className:"user-management-section",children:[(0,c.jsx)("div",{className:"user-management-title",children:"Users in your country"}),ie?(0,c.jsx)("div",{className:"small",children:"Loading users..."}):0===l.length?(0,c.jsx)("div",{className:"small",children:"No users found."}):(0,c.jsxs)("div",{className:"user-management-list",children:[(0,c.jsxs)("div",{className:"user-management-header",children:[(0,c.jsx)("div",{children:"User"}),(0,c.jsx)("div",{children:"Email"}),(0,c.jsx)("div",{children:"Role"}),(0,c.jsx)("div",{children:"Actions"})]}),l.map(e=>{var s,l,r,n;const o=e.id,d=null!==(s=null!==(l=X[o])&&void 0!==l?l:e.email)&&void 0!==s?s:"",u=null!==(r=null!==(n=Q[o])&&void 0!==n?n:e.role)&&void 0!==r?r:"user",m=Se.includes(e.role),h=Boolean($[o]),v=Boolean(se[o]);return(0,c.jsxs)("div",{className:"user-management-row",children:[(0,c.jsxs)("div",{className:"user-management-name",children:[(0,c.jsx)("div",{children:je(e)}),(0,c.jsx)("div",{className:"small",children:e.email})]}),(0,c.jsx)("div",{children:(0,c.jsx)("input",{className:"input full",value:d,onChange:e=>((e,s)=>{Z(l=>(0,a.A)((0,a.A)({},l),{},{[e]:s}))})(o,e.target.value),disabled:h})}),(0,c.jsx)("div",{children:m?(0,c.jsxs)("select",{className:"input full",value:u,onChange:e=>((e,s)=>{V(l=>(0,a.A)((0,a.A)({},l),{},{[e]:s}))})(o,e.target.value),disabled:h,children:[(0,c.jsx)("option",{value:"user",children:"User"}),(0,c.jsx)("option",{value:"principal",children:"Principal"}),(0,c.jsx)("option",{value:"hr",children:"HR"})]}):(0,c.jsx)("div",{className:"user-management-role",children:e.role})}),(0,c.jsxs)("div",{className:"user-management-actions",children:[(0,c.jsx)("button",{type:"button",className:"btn",onClick:()=>(async e=>{var s,l,r,n;if(!e)return;const o=e.id,c=String(null!==(s=null!==(l=X[o])&&void 0!==l?l:e.email)&&void 0!==s?s:"").trim(),d=String(null!==(r=null!==(n=Q[o])&&void 0!==n?n:e.role)&&void 0!==r?r:"").trim().toLowerCase(),u=Se.includes(e.role)||Se.includes(d),m=[];if(c&&c!==e.email&&m.push(()=>t.FH.managerUpdateUserEmail(o,{email:c})),u&&d&&d!==e.role&&m.push(()=>t.FH.managerUpdateUserRole(o,{role:d})),0!==m.length){ee(e=>(0,a.A)((0,a.A)({},e),{},{[o]:!0}));try{for(const e of m)await e();i.oR.success("User updated"),await de(),V(e=>{const s=(0,a.A)({},e);return delete s[o],s}),Z(e=>{const s=(0,a.A)({},e);return delete s[o],s})}catch(h){console.error(h),i.oR.error((null===h||void 0===h?void 0:h.message)||"Failed to update user")}finally{ee(e=>{const s=(0,a.A)({},e);return delete s[o],s})}}else i.oR.info("No changes to save")})(e),disabled:h,children:h?"Saving...":"Save"}),(0,c.jsx)("button",{type:"button",className:"btn",onClick:()=>(async e=>{if(!e)return;const s=e.id;le(e=>(0,a.A)((0,a.A)({},e),{},{[s]:!0}));try{const e=await t.FH.managerResetUserPassword(s),l=null===e||void 0===e?void 0:e.temporary_password;l&&re(e=>(0,a.A)((0,a.A)({},e),{},{[s]:l})),i.oR.success("Temporary password generated")}catch(l){console.error(l),i.oR.error((null===l||void 0===l?void 0:l.message)||"Failed to reset password")}finally{le(e=>{const l=(0,a.A)({},e);return delete l[s],l})}})(e),disabled:v,children:v?"Resetting...":"Reset password"})]}),ae[o]&&(0,c.jsxs)("div",{className:"user-management-temp",children:["Temporary password:"," ",(0,c.jsx)("span",{className:"user-management-temp-value",children:ae[o]})]})]},o)})]})]})]})]}),"createSchool"===R&&(0,c.jsxs)("div",{className:"access-hub-grid",style:{marginTop:16},children:[(0,c.jsxs)("div",{className:"left-pane",children:[(0,c.jsx)("div",{style:{marginBottom:12,fontWeight:700},children:"Create a new school"}),(0,c.jsx)("div",{className:"small",style:{marginBottom:12},children:"Add a school in your country to start assigning users and modules."})]}),(0,c.jsx)("div",{className:"right-pane",children:(0,c.jsxs)("form",{onSubmit:async e=>{var s;null===e||void 0===e||null===(s=e.preventDefault)||void 0===s||s.call(e);const l=Y.trim();if(l){O(!0);try{await t.FH.createSchool({name:l}),i.oR.success("School created"),z(""),await ue()}catch(a){console.error(a),i.oR.error((null===a||void 0===a?void 0:a.message)||"Failed to create school")}finally{O(!1)}}else i.oR.error("School name is required")},className:"create-school-form",children:[(0,c.jsx)("div",{className:"row",style:{flexDirection:"column",gap:8,marginBottom:12},children:(0,c.jsx)("input",{className:"input full",placeholder:"School name",value:Y,onChange:e=>z(e.target.value)})}),(0,c.jsx)("div",{className:"row",style:{justifyContent:"flex-end",gap:8},children:(0,c.jsx)("button",{type:"submit",className:"btn primary",disabled:J,children:J?"Creating...":"Create school"})})]})})]})]})})}}}]);
//# sourceMappingURL=203.ed7ef394.chunk.js.map