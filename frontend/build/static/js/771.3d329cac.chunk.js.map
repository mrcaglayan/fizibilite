{"version":3,"file":"static/js/771.3d329cac.chunk.js","mappings":"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","sources":["components/CapacityEditor.jsx","pages/school/KapasitePage.jsx","components/NumberInput.jsx","utils/kademe.js","components/ui/TabProgressHeatmap.jsx","utils/programType.js"],"sourcesContent":["//frontend/src/components/CapacityEditor.jsx\r\n\r\nimport React, { useMemo } from \"react\";\r\nimport NumberInput from \"./NumberInput\";\r\nimport {\r\n  formatKademeLabel,\r\n  getKademeDefinitions,\r\n  normalizeKademeConfig,\r\n  summarizeGradesByKademe,\r\n} from \"../utils/kademe\";\r\nimport { isKademeKeyVisible, mapBaseKademeToVariant, PROGRAM_TYPES } from \"../utils/programType\";\r\n\r\nconst n0 = (v) => {\r\n  const n = Number(v);\r\n  return Number.isFinite(n) ? n : 0;\r\n};\r\n\r\nconst fmt0 = (v) => {\r\n  const n = Number(v);\r\n  return Number.isFinite(n)\r\n    ? n.toLocaleString(undefined, { maximumFractionDigits: 0 })\r\n    : \"0\";\r\n};\r\n\r\nconst fmtPct = (v) => {\r\n  if (!Number.isFinite(v)) return \"\";\r\n  return `${(v * 100).toFixed(1)}%`;\r\n};\r\n\r\nfunction normalizePlanningGrades(input) {\r\n  if (Array.isArray(input)) return { y1: input, y2: input, y3: input };\r\n  if (input && typeof input === \"object\") {\r\n    const years = input.years && typeof input.years === \"object\" ? input.years : input;\r\n    const y1 = Array.isArray(years?.y1) ? years.y1 : [];\r\n    const y2 = Array.isArray(years?.y2) ? years.y2 : y1;\r\n    const y3 = Array.isArray(years?.y3) ? years.y3 : y1;\r\n    return { y1, y2, y3 };\r\n  }\r\n  return { y1: [], y2: [], y3: [] };\r\n}\r\n\r\nfunction getYearLabel(baseYear, offset) {\r\n  const y = Number.isFinite(Number(baseYear)) ? Number(baseYear) : null;\r\n  if (y == null) return `${offset + 1}. YIL`;\r\n  const a = y + offset;\r\n  const b = y + offset + 1;\r\n  return `${offset + 1}. YIL (${a}-${b})`;\r\n}\r\n\r\nfunction safeDiv(a, b) {\r\n  const A = Number(a);\r\n  const B = Number(b);\r\n  if (!Number.isFinite(A) || !Number.isFinite(B) || B === 0) return null;\r\n  return A / B;\r\n}\r\n\r\nexport default function CapacityEditor({\r\n  school,\r\n  me,\r\n  baseYear,\r\n  kapasite,\r\n  plannedGrades,\r\n  currentGrades,\r\n  kademeConfig,\r\n  programType,\r\n  onChange,\r\n  dirtyPaths,\r\n  onDirty,\r\n}) {\r\n  const cap = kapasite && typeof kapasite === \"object\" ? kapasite : {};\r\n  const kademeler = useMemo(() => normalizeKademeConfig(kademeConfig), [kademeConfig]);\r\n  const resolvedProgramType = programType || PROGRAM_TYPES.LOCAL;\r\n\r\n  const kademeDefs = useMemo(() => getKademeDefinitions(), []);\r\n  const activeKademeler = kademeDefs.filter((d) => kademeler?.[d.key]?.enabled);\r\n  const variantCandidates = activeKademeler.length ? activeKademeler : kademeDefs;\r\n  let visibleKademeler = variantCandidates.filter((d) => {\r\n    const variantKey = mapBaseKademeToVariant(d.key, resolvedProgramType);\r\n    return isKademeKeyVisible(variantKey, resolvedProgramType);\r\n  });\r\n  if (!visibleKademeler.length) visibleKademeler = variantCandidates;\r\n\r\n  // Students (derived from Norm/Grades)\r\n  const planningByYear = useMemo(() => normalizePlanningGrades(plannedGrades), [plannedGrades]);\r\n\r\n  const plannedByYear = useMemo(\r\n    () => ({\r\n      y1: summarizeGradesByKademe(planningByYear.y1, kademeler),\r\n      y2: summarizeGradesByKademe(planningByYear.y2, kademeler),\r\n      y3: summarizeGradesByKademe(planningByYear.y3, kademeler),\r\n    }),\r\n    [planningByYear, kademeler]\r\n  );\r\n\r\n  const current = useMemo(\r\n    () => summarizeGradesByKademe(currentGrades, kademeler),\r\n    [currentGrades, kademeler]\r\n  );\r\n\r\n  // Capacity storage: cap.byKademe[rowKey].caps = { cur, y1, y2, y3 }\r\n  const byKademe = useMemo(() => {\r\n    const src = cap.byKademe && typeof cap.byKademe === \"object\" ? cap.byKademe : {};\r\n    const next = {};\r\n    for (const lvl of visibleKademeler) {\r\n      const row = src[lvl.key] && typeof src[lvl.key] === \"object\" ? src[lvl.key] : {};\r\n      const caps = row.caps && typeof row.caps === \"object\" ? row.caps : row; // legacy-friendly\r\n      next[lvl.key] = {\r\n        caps: {\r\n          cur: n0(caps?.cur),\r\n          y1: n0(caps?.y1),\r\n          y2: n0(caps?.y2),\r\n          y3: n0(caps?.y3),\r\n        },\r\n      };\r\n    }\r\n    return next;\r\n  }, [cap.byKademe, visibleKademeler]);\r\n\r\n  const makePath = (suffix) => `inputs.kapasite.${suffix}`;\r\n  const isDirty = (suffix) => (dirtyPaths ? dirtyPaths.has(makePath(suffix)) : false);\r\n  const inputClass = (base, suffix) => base + (isDirty(suffix) ? \" input-dirty\" : \"\");\r\n\r\n  const sumCap = (periodKey, srcByKademe = byKademe) => {\r\n    let t = 0;\r\n    for (const lvl of visibleKademeler) {\r\n      t += n0(srcByKademe?.[lvl.key]?.caps?.[periodKey]);\r\n    }\r\n    return t;\r\n  };\r\n\r\n  const totals = {\r\n    cur: sumCap(\"cur\"),\r\n    y1: sumCap(\"y1\"),\r\n    y2: sumCap(\"y2\"),\r\n    y3: sumCap(\"y3\"),\r\n  };\r\n\r\n  const studentsTotals = {\r\n    cur: n0(current?.total),\r\n    y1: n0(plannedByYear?.y1?.total),\r\n    y2: n0(plannedByYear?.y2?.total),\r\n    y3: n0(plannedByYear?.y3?.total),\r\n  };\r\n\r\n  // Growth calculations (TOTAL)\r\n  const delta = {\r\n    y1: studentsTotals.y1 - studentsTotals.cur,\r\n    y2: studentsTotals.y2 - studentsTotals.y1,\r\n    y3: studentsTotals.y3 - studentsTotals.y2,\r\n  };\r\n  const growthRate = {\r\n    y1: safeDiv(delta.y1, studentsTotals.cur),\r\n    y2: safeDiv(delta.y2, studentsTotals.y1),\r\n    y3: safeDiv(delta.y3, studentsTotals.y2),\r\n  };\r\n\r\n  const setCapCell = (lvlKey, periodKey, value) => {\r\n    const nextVal = n0(value);\r\n\r\n    const prevRow = byKademe?.[lvlKey] || { caps: { cur: 0, y1: 0, y2: 0, y3: 0 } };\r\n    const prevCaps = prevRow.caps || {};\r\n    const nextCaps = { ...prevCaps, [periodKey]: nextVal };\r\n\r\n    // Autofill future years when current is entered/updated, but keep them editable.\r\n    if (periodKey === \"cur\") {\r\n      const prevCur = n0(prevCaps?.cur);\r\n      const shouldFollowCur = (pk) => {\r\n        if (isDirty(`byKademe.${lvlKey}.caps.${pk}`)) return false;\r\n        const prev = n0(prevCaps?.[pk]);\r\n        // Fill if empty or still matching the previous cur (tracks cur until user overrides).\r\n        return prev === 0 || prev === prevCur;\r\n      };\r\n      const maybeFill = (pk) => {\r\n        if (!shouldFollowCur(pk)) return;\r\n        nextCaps[pk] = nextVal;\r\n      };\r\n      if (maybeFill(\"y1\")) nextCaps.y1 = nextVal;\r\n      if (maybeFill(\"y2\")) nextCaps.y2 = nextVal;\r\n      if (maybeFill(\"y3\")) nextCaps.y3 = nextVal;\r\n    }\r\n\r\n    const nextRow = { ...prevRow, caps: nextCaps };\r\n\r\n    const nextByKademe = { ...(byKademe || {}), [lvlKey]: nextRow };\r\n\r\n    const nextTotals = {\r\n      cur: sumCap(\"cur\", nextByKademe),\r\n      y1: sumCap(\"y1\", nextByKademe),\r\n      y2: sumCap(\"y2\", nextByKademe),\r\n      y3: sumCap(\"y3\", nextByKademe),\r\n    };\r\n\r\n    const next = {\r\n      ...cap,\r\n      byKademe: nextByKademe,\r\n      totals: nextTotals,\r\n      years: { ...(cap.years || {}), y1: nextTotals.y1, y2: nextTotals.y2, y3: nextTotals.y3 },\r\n    };\r\n\r\n    onChange(next);\r\n    onDirty?.(makePath(`byKademe.${lvlKey}.caps.${periodKey}`), nextVal);\r\n  };\r\n\r\n  const region = me?.region || \"\";\r\n  const countryName = school?.country_name || me?.country_name || \"\";\r\n  const campusName = school?.name || \"\";\r\n\r\n  const headerCellStyle = {\r\n    fontSize: 11,\r\n    lineHeight: 1.1,\r\n    fontWeight: 700,\r\n    verticalAlign: \"top\",\r\n    paddingTop: 4,\r\n    paddingBottom: 4,\r\n    paddingLeft: 6,\r\n    paddingRight: 6,\r\n  };\r\n\r\n  const groupThStyle = {\r\n    textAlign: \"center\",\r\n    fontWeight: 800,\r\n    fontSize: 12,\r\n    paddingTop: 4,\r\n    paddingBottom: 4,\r\n  };\r\n\r\n  const subThStyle = {\r\n    textAlign: \"center\",\r\n    fontWeight: 700,\r\n    fontSize: 11,\r\n    paddingTop: 3,\r\n    paddingBottom: 3,\r\n    lineHeight: 1.1,\r\n  };\r\n\r\n  const grayRowStyle = {\r\n    fontSize: 11,\r\n    background: \"rgba(28, 93, 223, 0.16)\",\r\n    fontWeight: 700,\r\n  };\r\n\r\n  const renderPeriodCells = (lvlKey, periodKey, students) => {\r\n    const capVal = n0(byKademe?.[lvlKey]?.caps?.[periodKey]);\r\n    const util = capVal > 0 ? students / capVal : null;\r\n\r\n    return (\r\n      <>\r\n        <td className=\"cell-count\">\r\n          <NumberInput\r\n            className={inputClass(\"input xs kapInput\", `byKademe.${lvlKey}.caps.${periodKey}`)}\r\n            min=\"0\"\r\n            step=\"1\"\r\n            value={capVal}\r\n            onChange={(value) => setCapCell(lvlKey, periodKey, value)}\r\n          />\r\n        </td>\r\n        <td className=\"cell-count\">{fmt0(students)}</td>\r\n        <td className=\"cell-num\">{util == null ? \"\" : fmtPct(util)}</td>\r\n      </>\r\n    );\r\n  };\r\n\r\n  const renderTotalsPeriod = (periodKey, students) => {\r\n    const capVal = n0(totals?.[periodKey]);\r\n    const util = capVal > 0 ? students / capVal : null;\r\n    return (\r\n      <>\r\n        <td className=\"cell-count\" style={{ fontWeight: 800 }}>\r\n          {fmt0(capVal)}\r\n        </td>\r\n        <td className=\"cell-count\" style={{ fontWeight: 800 }}>\r\n          {fmt0(students)}\r\n        </td>\r\n        <td className=\"cell-num\" style={{ fontWeight: 800 }}>\r\n          {util == null ? \"\" : fmtPct(util)}\r\n        </td>\r\n      </>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <div className=\"table-scroll\">\r\n        <style>{`\r\n          .kapasiteExcelTable{\r\n            width:100%;\r\n            table-layout:fixed;\r\n            border-collapse:collapse;\r\n          }\r\n\r\n          .kapasiteExcelTable th, .kapasiteExcelTable td{\r\n            padding:3px 4px;\r\n          }\r\n\r\n          .kapasiteExcelTable thead th{\r\n            white-space:normal;\r\n            line-height:1.1;\r\n            word-break:break-word;\r\n          }\r\n\r\n          .kapasiteExcelTable tbody td:first-child{\r\n            white-space:nowrap;\r\n          }\r\n\r\n          /* center helper */\r\n          .kapasiteExcelTable .center{\r\n            text-align:center;\r\n          }\r\n\r\n          /* force override any global .num { text-align:right } */\r\n          .kapasiteExcelTable td.center,\r\n          .kapasiteExcelTable th.center,\r\n          .kapasiteExcelTable td.num.center,\r\n          .kapasiteExcelTable th.num.center {\r\n            text-align: center !important;\r\n          }\r\n\r\n          /* keep numbers compact but centered */\r\n          .kapasiteExcelTable td.num{\r\n            white-space:nowrap;\r\n          }\r\n\r\n          .kapasiteExcelTable .kapInput{\r\n            width:62px;\r\n            max-width:62px;\r\n            padding:2px 4px;\r\n            text-align:center !important;\r\n          }\r\n\r\n          .kapasiteExcelTable tbody td:not(:first-child){\r\n            text-align:center !important;\r\n          }\r\n\r\n          /* ===== Group separators (vertical) ===== */\r\n          :root{\r\n            --kap-sep: rgba(15, 23, 42, 0.22);\r\n            --kap-band: rgba(2, 6, 23, 0.028); /* very light */\r\n          }\r\n\r\n          /* BODY has 13 columns: 1 label + 12 data\r\n             groups: (2-4), (5-7), (8-10), (11-13) */\r\n\r\n          /* group borders */\r\n          .kapasiteExcelTable tbody td:nth-child(2),\r\n          .kapasiteExcelTable tbody td:nth-child(5),\r\n          .kapasiteExcelTable tbody td:nth-child(8),\r\n          .kapasiteExcelTable tbody td:nth-child(11){\r\n            border-left: 2px solid var(--kap-sep);\r\n          }\r\n\r\n          .kapasiteExcelTable tbody td:nth-child(4),\r\n          .kapasiteExcelTable tbody td:nth-child(7),\r\n          .kapasiteExcelTable tbody td:nth-child(10),\r\n          .kapasiteExcelTable tbody td:nth-child(13){\r\n            border-right: 2px solid var(--kap-sep);\r\n          }\r\n\r\n          /* HEADER 2nd row: 12 cells (because first col is rowSpan)\r\n             groups: (1-3), (4-6), (7-9), (10-12) */\r\n          .kapasiteExcelTable thead tr:nth-child(2) th:nth-child(1),\r\n          .kapasiteExcelTable thead tr:nth-child(2) th:nth-child(4),\r\n          .kapasiteExcelTable thead tr:nth-child(2) th:nth-child(7),\r\n          .kapasiteExcelTable thead tr:nth-child(2) th:nth-child(10){\r\n            border-left: 2px solid var(--kap-sep);\r\n          }\r\n\r\n          .kapasiteExcelTable thead tr:nth-child(2) th:nth-child(3),\r\n          .kapasiteExcelTable thead tr:nth-child(2) th:nth-child(6),\r\n          .kapasiteExcelTable thead tr:nth-child(2) th:nth-child(9),\r\n          .kapasiteExcelTable thead tr:nth-child(2) th:nth-child(12){\r\n            border-right: 2px solid var(--kap-sep);\r\n          }\r\n\r\n          /* ===== Alternating banding by group (very light) =====\r\n             Apply to columns of groups 2 and 4 only (like Excel banding) */\r\n          .kapasiteExcelTable tbody td:nth-child(5),\r\n          .kapasiteExcelTable tbody td:nth-child(6),\r\n          .kapasiteExcelTable tbody td:nth-child(7),\r\n          .kapasiteExcelTable tbody td:nth-child(11),\r\n          .kapasiteExcelTable tbody td:nth-child(12),\r\n          .kapasiteExcelTable tbody td:nth-child(13){\r\n            background: var(--kap-band);\r\n          }\r\n\r\n          /* Header banding too (2nd row) */\r\n          .kapasiteExcelTable thead tr:nth-child(2) th:nth-child(4),\r\n          .kapasiteExcelTable thead tr:nth-child(2) th:nth-child(5),\r\n          .kapasiteExcelTable thead tr:nth-child(2) th:nth-child(6),\r\n          .kapasiteExcelTable thead tr:nth-child(2) th:nth-child(10),\r\n          .kapasiteExcelTable thead tr:nth-child(2) th:nth-child(11),\r\n          .kapasiteExcelTable thead tr:nth-child(2) th:nth-child(12){\r\n            background: var(--kap-band);\r\n          }\r\n\r\n          /* Growth rows: because we use colSpan=3, nth-child borders won't apply.\r\n             Re-add group borders on the merged group-cells. */\r\n          .kapasiteExcelTable tbody tr.kapGrowth td.kapG{\r\n            border-left: 2px solid var(--kap-sep);\r\n            border-right: 2px solid var(--kap-sep);\r\n          }\r\n        `}</style>\r\n\r\n        <table className=\"table data-table kapasiteExcelTable\">\r\n          <colgroup>\r\n            <col style={{ width: 210 }} />\r\n            {Array.from({ length: 12 }).map((_, i) => (\r\n              <col key={i} style={{ width: i % 3 === 0 ? 70 : i % 3 === 1 ? 78 : 70 }} />\r\n            ))}\r\n          </colgroup>\r\n\r\n          <thead>\r\n            <tr className=\"row-group-start\">\r\n              <th rowSpan={2} style={headerCellStyle}>\r\n                <div>BÖLGE: {region || \"-\"}</div>\r\n                <div>ÜLKE: {countryName || \"-\"}</div>\r\n                <div>KAMPÜS: {campusName || \"-\"}</div>\r\n              </th>\r\n\r\n              <th\r\n                colSpan={3}\r\n                style={{ ...groupThStyle, borderLeft: \"2px solid rgba(15,23,42,0.22)\" }}\r\n              >\r\n                Mevcut veya Ön Kayıt\r\n              </th>\r\n              <th\r\n                colSpan={3}\r\n                style={{ ...groupThStyle, borderLeft: \"2px solid rgba(15,23,42,0.22)\" }}\r\n              >\r\n                {getYearLabel(baseYear, 0)}\r\n              </th>\r\n              <th\r\n                colSpan={3}\r\n                style={{ ...groupThStyle, borderLeft: \"2px solid rgba(15,23,42,0.22)\" }}\r\n              >\r\n                {getYearLabel(baseYear, 1)}\r\n              </th>\r\n              <th\r\n                colSpan={3}\r\n                style={{\r\n                  ...groupThStyle,\r\n                  borderLeft: \"2px solid rgba(15,23,42,0.22)\",\r\n                  borderRight: \"2px solid rgba(15,23,42,0.22)\",\r\n                }}\r\n              >\r\n                {getYearLabel(baseYear, 2)}\r\n              </th>\r\n            </tr>\r\n\r\n            <tr>\r\n              <th style={subThStyle}>Kapasite</th>\r\n              <th style={subThStyle}>Öğrenci Sayısı</th>\r\n              <th style={subThStyle}>Kapasite Kullanım Oranı</th>\r\n\r\n              <th style={subThStyle}>Kapasite</th>\r\n              <th style={subThStyle}>Öğrenci Sayısı</th>\r\n              <th style={subThStyle}>Kapasite Kullanım Oranı</th>\r\n\r\n              <th style={subThStyle}>Kapasite</th>\r\n              <th style={subThStyle}>Öğrenci Sayısı</th>\r\n              <th style={subThStyle}>Kapasite Kullanım Oranı</th>\r\n\r\n              <th style={subThStyle}>Kapasite</th>\r\n              <th style={subThStyle}>Öğrenci Sayısı</th>\r\n              <th style={subThStyle}>Kapasite Kullanım Oranı</th>\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            {/* Growth rows (TOTAL) */}\r\n            <tr className=\"kapGrowth row-group-start\" style={grayRowStyle}>\r\n              <td className=\"cell-count\">Bir Önceki Yıla Göre Öğrenci Artışı</td>\r\n\r\n              <td colSpan={3} className=\"cell-count kapG kapG0\"></td>\r\n              <td colSpan={3} className=\"cell-count kapG kapG1\">{fmt0(delta.y1)}</td>\r\n              <td colSpan={3} className=\"cell-count kapG kapG2\">{fmt0(delta.y2)}</td>\r\n              <td colSpan={3} className=\"cell-count kapG kapG3\">{fmt0(delta.y3)}</td>\r\n            </tr>\r\n\r\n            <tr className=\"kapGrowth\" style={grayRowStyle}>\r\n              <td className=\"cell-count\">1&apos;nci Yıla Göre Öğrenci Artış Oranı</td>\r\n\r\n              <td colSpan={3} className=\"cell-pct kapG kapG0\"></td>\r\n              <td colSpan={3} className=\"cell-pct kapG kapG1\">\r\n                {growthRate.y1 == null ? \"\" : fmtPct(growthRate.y1)}\r\n              </td>\r\n              <td colSpan={3} className=\"cell-pct kapG kapG2\">\r\n                {growthRate.y2 == null ? \"\" : fmtPct(growthRate.y2)}\r\n              </td>\r\n              <td colSpan={3} className=\"cell-pct kapG kapG3\">\r\n                {growthRate.y3 == null ? \"\" : fmtPct(growthRate.y3)}\r\n              </td>\r\n            </tr>\r\n\r\n            {/* Kademe rows */}\r\n            {visibleKademeler.map((lvl, idx) => {\r\n              const label = formatKademeLabel(lvl.label, kademeler, lvl.key);\r\n\r\n              const studentsCur = n0(current?.[lvl.key]);\r\n              const studentsY1 = n0(plannedByYear?.y1?.[lvl.key]);\r\n              const studentsY2 = n0(plannedByYear?.y2?.[lvl.key]);\r\n              const studentsY3 = n0(plannedByYear?.y3?.[lvl.key]);\r\n\r\n              return (\r\n                <tr key={lvl.key} className={idx === 0 ? \"row-group-start\" : \"\"}>\r\n                  <td className=\"nowrap\">{label}</td>\r\n\r\n                  {renderPeriodCells(lvl.key, \"cur\", studentsCur)}\r\n                  {renderPeriodCells(lvl.key, \"y1\", studentsY1)}\r\n                  {renderPeriodCells(lvl.key, \"y2\", studentsY2)}\r\n                  {renderPeriodCells(lvl.key, \"y3\", studentsY3)}\r\n                </tr>\r\n              );\r\n            })}\r\n\r\n            {/* TOTAL */}\r\n            <tr>\r\n              <td style={{ fontWeight: 800, textAlign:\"left\" }}>TOPLAM</td>\r\n\r\n              {renderTotalsPeriod(\"cur\", studentsTotals.cur)}\r\n              {renderTotalsPeriod(\"y1\", studentsTotals.y1)}\r\n              {renderTotalsPeriod(\"y2\", studentsTotals.y2)}\r\n              {renderTotalsPeriod(\"y3\", studentsTotals.y3)}\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      <div className=\"small\" style={{ marginTop: 8 }}>\r\n        Not: “Mevcut Öğrenci Sayısı” otomatik olarak Norm/Mevcut Dönem verilerinden hesaplanır.\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useOutletContext } from \"react-router-dom\";\r\nimport CapacityEditor from \"../../components/CapacityEditor\";\r\nimport TabProgressHeatmap from \"../../components/ui/TabProgressHeatmap\";\r\n\r\nfunction pctValue(tab) {\r\n  const n = Number(tab?.pct);\r\n  return Number.isFinite(n) ? n : 0;\r\n}\r\n\r\nexport default function KapasitePage() {\r\n  const {\r\n    inputs,\r\n    setField,\r\n    school,\r\n    me,\r\n    baseYear,\r\n    programType,\r\n    dirtyPaths,\r\n    markDirty,\r\n    progMap,\r\n\r\n  } = useOutletContext();\r\n\r\n  if (!inputs) return null;\r\n\r\n\r\n\r\n  return (\r\n    <div style={{ marginTop: 12 }}>\r\n\r\n      <TabProgressHeatmap\r\n        pct={pctValue(progMap?.kapasite)}\r\n        title=\"Kapasite\"\r\n        missingLines={progMap?.kapasite?.missingLines}\r\n        missingPreview={progMap?.kapasite?.missingPreview}\r\n      >\r\n        <CapacityEditor\r\n          school={school}\r\n          me={me}\r\n          baseYear={baseYear}\r\n          kapasite={inputs.kapasite}\r\n          plannedGrades={inputs.gradesYears || inputs.grades}\r\n          currentGrades={inputs.gradesCurrent}\r\n          kademeConfig={inputs.temelBilgiler?.kademeler}\r\n          programType={programType}\r\n          onChange={(v) => {\r\n            setField(\"kapasite\", v);\r\n          }}\r\n          dirtyPaths={dirtyPaths}\r\n          onDirty={markDirty}\r\n        />\r\n      </TabProgressHeatmap>\r\n    </div>\r\n  );\r\n}\r\n","// frontend/src/components/NumberInput.jsx\r\n\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\n\r\nconst DEFAULT_LOCALE = \"tr-TR\";\r\n\r\nconst separatorsCache = new Map();\r\n\r\nfunction getSeparators(locale) {\r\n  if (separatorsCache.has(locale)) return separatorsCache.get(locale);\r\n  const parts = new Intl.NumberFormat(locale).formatToParts(1000.1);\r\n  const group = parts.find((p) => p.type === \"group\")?.value || \",\";\r\n  const decimal = parts.find((p) => p.type === \"decimal\")?.value || \".\";\r\n  const next = { group, decimal };\r\n  separatorsCache.set(locale, next);\r\n  return next;\r\n}\r\n\r\nfunction countStepDecimals(step) {\r\n  if (step == null) return 2;\r\n  const s = String(step).trim();\r\n  if (!s || s === \"any\") return 6;\r\n  const dot = s.indexOf(\".\");\r\n  if (dot === -1) return 0;\r\n  return Math.max(0, s.length - dot - 1);\r\n}\r\n\r\nfunction parseFlexibleNumber(input) {\r\n  const raw = String(input ?? \"\").trim();\r\n  if (!raw) return { value: null, empty: true };\r\n\r\n  // Remove spaces and keep only digits/separators/sign.\r\n  const cleaned = raw.replace(/\\s+/g, \"\");\r\n  const hasDot = cleaned.includes(\".\");\r\n  const hasComma = cleaned.includes(\",\");\r\n\r\n  let decimalSep = null;\r\n  let thousandSep = null;\r\n\r\n  if (hasDot && hasComma) {\r\n    const lastDot = cleaned.lastIndexOf(\".\");\r\n    const lastComma = cleaned.lastIndexOf(\",\");\r\n    decimalSep = lastDot > lastComma ? \".\" : \",\";\r\n    thousandSep = decimalSep === \".\" ? \",\" : \".\";\r\n  } else if (hasDot || hasComma) {\r\n    const sep = hasDot ? \".\" : \",\";\r\n    const count = (cleaned.match(new RegExp(`\\\\${sep}`, \"g\")) || []).length;\r\n    if (count > 1) {\r\n      thousandSep = sep;\r\n    } else {\r\n      const idx = cleaned.lastIndexOf(sep);\r\n      const digitsAfter = cleaned.length - idx - 1;\r\n      if (digitsAfter >= 1 && digitsAfter <= 2) {\r\n        decimalSep = sep;\r\n      } else {\r\n        thousandSep = sep;\r\n      }\r\n    }\r\n  }\r\n\r\n  let normalized = cleaned;\r\n  if (thousandSep) normalized = normalized.split(thousandSep).join(\"\");\r\n  if (decimalSep) normalized = normalized.replace(decimalSep, \".\");\r\n  if (!decimalSep) normalized = normalized.replace(/[.,]/g, \"\");\r\n\r\n  // Keep a single leading minus.\r\n  normalized = normalized.replace(/(?!^)-/g, \"\");\r\n  normalized = normalized.replace(/[^0-9.-]/g, \"\");\r\n\r\n  const value = Number(normalized);\r\n  if (!Number.isFinite(value)) return { value: null, empty: false };\r\n  return { value, empty: false };\r\n}\r\n\r\nexport default function NumberInput({\r\n  value,\r\n  onChange,\r\n  onBlur,\r\n  onFocus,\r\n  className,\r\n  step,\r\n  disabled,\r\n  placeholder,\r\n  title,\r\n  name,\r\n  id,\r\n  inputMode,\r\n  ...rest\r\n}) {\r\n  const decimals = useMemo(() => countStepDecimals(step), [step]);\r\n  const locale = DEFAULT_LOCALE;\r\n  const { decimal } = useMemo(() => getSeparators(locale), [locale]);\r\n\r\n  const formatter = useMemo(\r\n    () =>\r\n      new Intl.NumberFormat(locale, {\r\n        useGrouping: true,\r\n        maximumFractionDigits: decimals,\r\n      }),\r\n    [locale, decimals]\r\n  );\r\n\r\n  const rawFormatter = useMemo(\r\n    () =>\r\n      new Intl.NumberFormat(locale, {\r\n        useGrouping: false,\r\n        maximumFractionDigits: decimals,\r\n      }),\r\n    [locale, decimals]\r\n  );\r\n\r\n  const [editing, setEditing] = useState(false);\r\n  const [draft, setDraft] = useState(\"\");\r\n\r\n  const numericValue = Number(value);\r\n  const hasValue = value !== \"\" && value != null && Number.isFinite(numericValue);\r\n\r\n  useEffect(() => {\r\n    if (editing) return;\r\n    if (!hasValue) {\r\n      setDraft(\"\");\r\n      return;\r\n    }\r\n    setDraft(formatter.format(numericValue));\r\n  }, [editing, formatter, hasValue, numericValue]);\r\n\r\n  const handleFocus = (event) => {\r\n    setEditing(true);\r\n    if (hasValue) {\r\n      setDraft(rawFormatter.format(numericValue));\r\n    } else {\r\n      setDraft(\"\");\r\n    }\r\n    onFocus?.(event);\r\n  };\r\n\r\n  const handleChange = (event) => {\r\n    const next = event.target.value;\r\n    setDraft(next);\r\n\r\n    const parsed = parseFlexibleNumber(next);\r\n    if (parsed.empty) {\r\n      onChange?.(\"\");\r\n      return;\r\n    }\r\n    if (parsed.value == null) return;\r\n    onChange?.(parsed.value);\r\n  };\r\n\r\n  const handleBlur = (event) => {\r\n    setEditing(false);\r\n\r\n    const parsed = parseFlexibleNumber(draft);\r\n    if (parsed.empty) {\r\n      setDraft(\"\");\r\n      onChange?.(\"\");\r\n      onBlur?.(event);\r\n      return;\r\n    }\r\n    if (parsed.value != null) {\r\n      const rounded = Number(parsed.value);\r\n      setDraft(formatter.format(rounded));\r\n      onChange?.(rounded);\r\n    }\r\n    onBlur?.(event);\r\n  };\r\n\r\n  return (\r\n    <input\r\n      {...rest}\r\n      id={id}\r\n      name={name}\r\n      className={className}\r\n      value={editing ? draft : draft || \"\"}\r\n      onChange={handleChange}\r\n      onFocus={handleFocus}\r\n      onBlur={handleBlur}\r\n      disabled={disabled}\r\n      placeholder={placeholder}\r\n      title={title}\r\n      inputMode={inputMode || \"decimal\"}\r\n      autoComplete=\"off\"\r\n      aria-invalid={rest[\"aria-invalid\"]}\r\n      data-decimal-separator={decimal}\r\n    />\r\n  );\r\n}\r\n","const GRADES = [\"KG\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"];\r\n\r\nconst KADEME_DEFS = [\r\n  { key: \"okulOncesi\", label: \"Okul Öncesi\", defaultFrom: \"KG\", defaultTo: \"KG\" },\r\n  { key: \"ilkokul\", label: \"İlkokul\", defaultFrom: \"1\", defaultTo: \"5\" },\r\n  { key: \"ortaokul\", label: \"Ortaokul\", defaultFrom: \"6\", defaultTo: \"9\" },\r\n  { key: \"lise\", label: \"Lise\", defaultFrom: \"10\", defaultTo: \"12\" },\r\n];\r\n\r\nfunction normalizeGrade(value) {\r\n  const v = String(value || \"\").trim().toUpperCase();\r\n  if (v === \"KG\") return \"KG\";\r\n  if (!/^\\d{1,2}$/.test(v)) return null;\r\n  const n = Number(v);\r\n  if (!Number.isFinite(n) || n < 1 || n > 12) return null;\r\n  return String(n);\r\n}\r\n\r\nfunction gradeIndex(value) {\r\n  const g = normalizeGrade(value);\r\n  if (!g) return -1;\r\n  return GRADES.indexOf(g);\r\n}\r\n\r\nfunction normalizeRange(fromValue, toValue, def) {\r\n  const from = normalizeGrade(fromValue) ?? def.defaultFrom;\r\n  const to = normalizeGrade(toValue) ?? def.defaultTo;\r\n  const fromIdx = gradeIndex(from);\r\n  const toIdx = gradeIndex(to);\r\n  if (fromIdx < 0 || toIdx < 0) return { from: def.defaultFrom, to: def.defaultTo };\r\n  if (fromIdx <= toIdx) return { from, to };\r\n  return { from: to, to: from };\r\n}\r\n\r\nexport function getKademeDefinitions() {\r\n  return KADEME_DEFS.map((d) => ({ ...d }));\r\n}\r\n\r\nexport function getDefaultKademeConfig() {\r\n  const out = {};\r\n  KADEME_DEFS.forEach((d) => {\r\n    out[d.key] = { enabled: true, from: d.defaultFrom, to: d.defaultTo };\r\n  });\r\n  return out;\r\n}\r\n\r\nexport function normalizeKademeConfig(config) {\r\n  const cfg = config && typeof config === \"object\" ? config : {};\r\n  const out = {};\r\n  KADEME_DEFS.forEach((d) => {\r\n    const row = cfg[d.key] && typeof cfg[d.key] === \"object\" ? cfg[d.key] : {};\r\n    const enabled = row.enabled !== false;\r\n    const range = normalizeRange(row.from, row.to, d);\r\n    out[d.key] = { enabled, ...range };\r\n  });\r\n  return out;\r\n}\r\n\r\nexport function getKademeRangeLabel(config, key) {\r\n  const def = KADEME_DEFS.find((d) => d.key === key);\r\n  if (!def) return \"\";\r\n  const cfg = normalizeKademeConfig(config)[key];\r\n  if (!cfg?.enabled) return \"\";\r\n  return cfg.from === cfg.to ? cfg.from : `${cfg.from}-${cfg.to}`;\r\n}\r\n\r\nexport function formatKademeLabel(label, config, key) {\r\n  const range = getKademeRangeLabel(config, key);\r\n  if (!range) return label;\r\n  return `${label} (${range})`;\r\n}\r\n\r\nexport function getKademeForGrade(grade, config) {\r\n  const idx = gradeIndex(grade);\r\n  if (idx < 0) return null;\r\n  const cfg = normalizeKademeConfig(config);\r\n  for (const def of KADEME_DEFS) {\r\n    const row = cfg[def.key];\r\n    if (!row?.enabled) continue;\r\n    const fromIdx = gradeIndex(row.from);\r\n    const toIdx = gradeIndex(row.to);\r\n    if (fromIdx <= idx && idx <= toIdx) return def.key;\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function summarizeGradesByKademe(grades, config) {\r\n  const rows = Array.isArray(grades) ? grades : [];\r\n  const out = { okulOncesi: 0, ilkokul: 0, ortaokul: 0, lise: 0, total: 0 };\r\n\r\n  for (const r of rows) {\r\n    // studentsPerBranch now represents TOTAL students for the grade (not per-branch).\r\n    const students = Number(r?.studentsPerBranch || 0);\r\n    if (!Number.isFinite(students)) continue;\r\n    out.total += students;\r\n    const key = getKademeForGrade(r?.grade, config);\r\n    if (key && Object.prototype.hasOwnProperty.call(out, key)) out[key] += students;\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\nexport function getGradeOptions() {\r\n  return GRADES.map((g) => g);\r\n}\r\n","import React from \"react\";\r\nimport { FaInfoCircle } from \"react-icons/fa\";\r\n\r\nfunction clampPct(value) {\r\n  const n = Number(value);\r\n  if (!Number.isFinite(n)) return 0;\r\n  return Math.max(0, Math.min(100, n));\r\n}\r\n\r\nfunction buildTitle({ pct, title, missingPreview, missingLines }) {\r\n  const lines = Array.isArray(missingLines)\r\n    ? missingLines.map((line) => String(line)).filter(Boolean).slice(0, 15)\r\n    : [];\r\n  if (lines.length) return lines.join(\"\\n\");\r\n  if (missingPreview) return String(missingPreview);\r\n  if (title) return `${title}: ${pct}%`;\r\n  return `${pct}%`;\r\n}\r\n\r\nexport default function TabProgressHeatmap({\r\n  pct = 0,\r\n  title = \"\",\r\n  missingPreview = \"\",\r\n  missingLines = [],\r\n  children,\r\n}) {\r\n  const clamped = clampPct(pct);\r\n  const mask = `linear-gradient(90deg, #000 0%, #000 ${clamped}%, transparent ${clamped}%, transparent 100%)`;\r\n  const tooltipText = buildTitle({\r\n    pct: Math.round(clamped),\r\n    title,\r\n    missingPreview,\r\n    missingLines,\r\n  });\r\n  const showInfo = clamped < 100;\r\n\r\n  return (\r\n    <div style={{ position: \"relative\", overflow: \"hidden\", borderRadius: 12 }}>\r\n      <div\r\n        aria-hidden=\"true\"\r\n        style={{\r\n          position: \"absolute\",\r\n          inset: 0,\r\n          pointerEvents: \"none\",\r\n          zIndex: 0,\r\n          backgroundImage:\r\n            \"linear-gradient(90deg, rgba(16,185,129, 0.05) 0%, rgba(16,185,129, 0.10) 30%, rgba(16,185,129, 0.16) 70%, rgba(16,185,129, 0.10) 100%), radial-gradient(circle at 20% 45%, rgba(16,185,129, 0.14) 0%, rgba(16,185,129, 0.00) 65%)\",\r\n          WebkitMaskImage: mask,\r\n          maskImage: mask,\r\n        }}\r\n      />\r\n\r\n      {showInfo ? (\r\n        <button\r\n          type=\"button\"\r\n          title={tooltipText}\r\n          aria-label=\"Progress details\"\r\n          style={{\r\n            position: \"absolute\",\r\n            top: 12,\r\n            right: 12,\r\n            zIndex: 20,\r\n            width: 26,\r\n            height: 26,\r\n            borderRadius: 999,\r\n            border: \"1px solid rgba(15, 23, 42, 0.15)\",\r\n            background: \"rgba(255, 255, 255, 0.9)\",\r\n            color: \"#0f172a\",\r\n            display: \"inline-flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            cursor: \"help\",\r\n            boxShadow: \"0 6px 16px rgba(15, 23, 42, 0.08)\",\r\n          }}\r\n        >\r\n          <FaInfoCircle size={12} />\r\n        </button>\r\n      ) : null}\r\n\r\n      <div style={{ position: \"relative\", zIndex: 1 }}>{children}</div>\r\n    </div>\r\n  );\r\n}\r\n","const PROGRAM_TYPES = {\r\n  LOCAL: \"local\",\r\n  INTERNATIONAL: \"international\",\r\n};\r\n\r\nconst ALLOWED_PROGRAM_TYPES = new Set(Object.values(PROGRAM_TYPES));\r\n\r\nfunction normalizeProgramType(value) {\r\n  const raw = String(value || \"\").trim().toLowerCase();\r\n  if (ALLOWED_PROGRAM_TYPES.has(raw)) return raw;\r\n  return PROGRAM_TYPES.LOCAL;\r\n}\r\n\r\nfunction getProgramType(inputs = {}, scenario = null) {\r\n  const programFromInputs =\r\n    inputs?.temelBilgiler?.programType ?? inputs?.programType ?? inputs?.program_type;\r\n  if (programFromInputs) {\r\n    return normalizeProgramType(programFromInputs);\r\n  }\r\n  const programFromScenario = scenario?.program_type || scenario?.programType;\r\n  if (programFromScenario) return normalizeProgramType(programFromScenario);\r\n  return PROGRAM_TYPES.LOCAL;\r\n}\r\n\r\nfunction isKademeKeyVisible(key, programType = PROGRAM_TYPES.LOCAL) {\r\n  const type = normalizeProgramType(programType);\r\n  if (!key) return true;\r\n  if (key === \"okulOncesi\") return true;\r\n  if (key.endsWith(\"Yerel\")) return type === PROGRAM_TYPES.LOCAL;\r\n  if (key.endsWith(\"Int\")) return type === PROGRAM_TYPES.INTERNATIONAL;\r\n  return true;\r\n}\r\n\r\nfunction mapBaseKademeToVariant(baseKademe, programType = PROGRAM_TYPES.LOCAL) {\r\n  const type = normalizeProgramType(programType);\r\n  if (baseKademe === \"okulOncesi\") return \"okulOncesi\";\r\n  const suffix = type === PROGRAM_TYPES.INTERNATIONAL ? \"Int\" : \"Yerel\";\r\n  return `${baseKademe}${suffix}`;\r\n}\r\n\r\nfunction getVariantKeysForProgramType(programType = PROGRAM_TYPES.LOCAL) {\r\n  const type = normalizeProgramType(programType);\r\n  return new Set([\r\n    \"okulOncesi\",\r\n    `ilkokul${type === PROGRAM_TYPES.INTERNATIONAL ? \"Int\" : \"Yerel\"}`,\r\n    `ortaokul${type === PROGRAM_TYPES.INTERNATIONAL ? \"Int\" : \"Yerel\"}`,\r\n    `lise${type === PROGRAM_TYPES.INTERNATIONAL ? \"Int\" : \"Yerel\"}`,\r\n  ]);\r\n}\r\n\r\nexport {\r\n  PROGRAM_TYPES,\r\n  ALLOWED_PROGRAM_TYPES,\r\n  getProgramType,\r\n  normalizeProgramType,\r\n  isKademeKeyVisible,\r\n  mapBaseKademeToVariant,\r\n  getVariantKeysForProgramType,\r\n};\r\n"],"names":["n0","v","n","Number","isFinite","fmt0","toLocaleString","undefined","maximumFractionDigits","fmtPct","concat","toFixed","getYearLabel","baseYear","offset","y","a","b","safeDiv","A","B","CapacityEditor","_ref","_plannedByYear$y","_plannedByYear$y2","_plannedByYear$y3","school","me","kapasite","plannedGrades","currentGrades","kademeConfig","programType","onChange","dirtyPaths","onDirty","cap","kademeler","useMemo","normalizeKademeConfig","resolvedProgramType","PROGRAM_TYPES","LOCAL","kademeDefs","getKademeDefinitions","activeKademeler","filter","d","_kademeler$d$key","key","enabled","variantCandidates","length","visibleKademeler","variantKey","mapBaseKademeToVariant","isKademeKeyVisible","planningByYear","input","Array","isArray","y1","y2","y3","years","normalizePlanningGrades","plannedByYear","summarizeGradesByKademe","current","byKademe","src","next","lvl","row","caps","cur","makePath","suffix","isDirty","has","sumCap","periodKey","srcByKademe","arguments","t","_srcByKademe$lvl$key","_srcByKademe$lvl$key$","totals","studentsTotals","total","delta","growthRate","region","countryName","country_name","campusName","name","groupThStyle","textAlign","fontWeight","fontSize","paddingTop","paddingBottom","subThStyle","lineHeight","grayRowStyle","background","renderPeriodCells","lvlKey","students","_byKademe$lvlKey","_byKademe$lvlKey$caps","capVal","util","_jsxs","_Fragment","children","_jsx","className","NumberInput","base","min","step","value","setCapCell","nextVal","prevRow","prevCaps","nextCaps","_objectSpread","prevCur","shouldFollowCur","pk","prev","maybeFill","nextRow","nextByKademe","nextTotals","inputClass","renderTotalsPeriod","style","width","from","map","_","i","rowSpan","verticalAlign","paddingLeft","paddingRight","colSpan","borderLeft","borderRight","idx","_plannedByYear$y4","_plannedByYear$y5","_plannedByYear$y6","label","formatKademeLabel","studentsCur","studentsY1","studentsY2","studentsY3","marginTop","pctValue","tab","pct","KapasitePage","_progMap$kapasite","_progMap$kapasite2","_inputs$temelBilgiler","inputs","setField","markDirty","progMap","useOutletContext","TabProgressHeatmap","title","missingLines","missingPreview","gradesYears","grades","gradesCurrent","temelBilgiler","separatorsCache","Map","parseFlexibleNumber","raw","String","trim","empty","cleaned","replace","hasDot","includes","hasComma","decimalSep","thousandSep","lastIndexOf","sep","match","RegExp","digitsAfter","normalized","split","join","onBlur","onFocus","disabled","placeholder","id","inputMode","rest","_objectWithoutProperties","_excluded","decimals","s","dot","indexOf","Math","max","countStepDecimals","locale","decimal","_parts$find","_parts$find2","get","parts","Intl","NumberFormat","formatToParts","group","find","p","type","set","getSeparators","formatter","useGrouping","rawFormatter","editing","setEditing","useState","draft","setDraft","numericValue","hasValue","useEffect","format","event","target","parsed","rounded","autoComplete","GRADES","KADEME_DEFS","defaultFrom","defaultTo","normalizeGrade","toUpperCase","test","gradeIndex","g","getDefaultKademeConfig","out","forEach","to","config","cfg","range","fromValue","toValue","def","_normalizeGrade","_normalizeGrade2","fromIdx","toIdx","normalizeRange","getKademeRangeLabel","getKademeForGrade","grade","rows","okulOncesi","ilkokul","ortaokul","lise","r","studentsPerBranch","Object","prototype","hasOwnProperty","call","getGradeOptions","_ref2","clamped","clampPct","mask","tooltipText","lines","line","Boolean","slice","buildTitle","round","showInfo","position","overflow","borderRadius","inset","pointerEvents","zIndex","backgroundImage","WebkitMaskImage","maskImage","top","right","height","border","color","display","alignItems","justifyContent","cursor","boxShadow","FaInfoCircle","size","INTERNATIONAL","ALLOWED_PROGRAM_TYPES","Set","values","normalizeProgramType","toLowerCase","getProgramType","_inputs$temelBilgiler2","scenario","programFromInputs","program_type","programFromScenario","endsWith","baseKademe"],"ignoreList":[],"sourceRoot":""}