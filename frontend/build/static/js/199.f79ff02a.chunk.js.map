{"version":3,"file":"static/js/199.f79ff02a.chunk.js","mappings":"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","sources":["components/ui/Button.jsx","pages/SchoolsPage.jsx","components/ui/Tooltip.jsx","components/ui/ProgressBar.jsx"],"sourcesContent":["// frontend/src/components/ui/Button.jsx\r\n\r\nimport React from \"react\";\r\n\r\nconst Button = React.forwardRef(\r\n  (\r\n    {\r\n      variant = \"primary\",\r\n      size = \"md\",\r\n      loading = false,\r\n      disabled = false,\r\n      className = \"\",\r\n      as: Component = \"button\",\r\n      onClick,\r\n      type,\r\n      children,\r\n      ...rest\r\n    },\r\n    ref\r\n  ) => {\r\n    const isButton = Component === \"button\";\r\n    const isDisabled = disabled || loading;\r\n    const classes = [\"btn\", `btn-${variant}`, `btn-${size}`, className]\r\n      .filter(Boolean)\r\n      .join(\" \");\r\n    const content = loading ? \"Yukleniyor...\" : children;\r\n\r\n    if (isButton) {\r\n      return (\r\n        <Component\r\n          ref={ref}\r\n          type={type || \"button\"}\r\n          className={classes}\r\n          disabled={isDisabled}\r\n          onClick={onClick}\r\n          {...rest}\r\n        >\r\n          {content}\r\n        </Component>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Component\r\n        ref={ref}\r\n        className={classes}\r\n        aria-disabled={isDisabled ? true : undefined}\r\n        onClick={(event) => {\r\n          if (isDisabled) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            return;\r\n          }\r\n          onClick?.(event);\r\n        }}\r\n        {...rest}\r\n      >\r\n        {content}\r\n      </Component>\r\n    );\r\n  }\r\n);\r\n\r\nButton.displayName = \"Button\";\r\n\r\nexport default Button;\r\n","//frontend/src/pages/SchoolsPage.jsx\r\n\r\n\r\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { useQueryClient } from \"@tanstack/react-query\";\nimport { api } from \"../api\";\nimport { Link, useOutletContext } from \"react-router-dom\";\nimport { useAuth } from \"../auth/AuthContext\";\nimport Button from \"../components/ui/Button\";\nimport { FaFolderOpen as FaOpen } from \"react-icons/fa\";\nimport ProgressBar from \"../components/ui/ProgressBar\";\n\nconst SCENARIO_PREFETCH_PARAMS = {\n  limit: 50,\n  offset: 0,\n  fields: \"brief\",\n  order: \"created_at:desc\",\n};\n\nexport default function SchoolsPage() {\n  const auth = useAuth();\n  const outlet = useOutletContext();\n  const queryClient = useQueryClient();\n  const prefetchedFirstRef = useRef(false);\n  const [schools, setSchools] = useState([]);\n  const [err, setErr] = useState(\"\");\n  const [schoolProgress, setSchoolProgress] = useState({});\n  const [progressLoading, setProgressLoading] = useState(false);\n  const isAssigned = auth.user?.country_id != null;\n\r\n  useEffect(() => {\r\n    document.title = \"Schools · Feasibility Studio\";\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!outlet?.setHeaderMeta) return;\r\n    // Ensure the header layout matches the school pages (e.g. Temel Bilgiler) by centering\r\n    // the title and placing the \"Okul / Senaryo Değiştir\" button consistently.\r\n    // Without the `centered` flag the top bar uses a left‑aligned layout which causes\r\n    // the switch button to appear misaligned on the dashboard compared to other pages.\r\n    outlet.setHeaderMeta({\r\n      title: \"Okullar\",\r\n      subtitle: \"Atanan okullarınız listelenir.\",\r\n      centered: true,\r\n    });\r\n    return () => outlet.clearHeaderMeta?.();\r\n  }, [outlet]);\r\n\r\n  const loadProgress = useCallback(async (rows) => {\n    if (!Array.isArray(rows) || !rows.length) {\n      setSchoolProgress({});\n      return;\n    }\n    setProgressLoading(true);\n    try {\n      const ids = rows.map((s) => s.id);\n      const data = await api.getSchoolsProgressBulk(ids);\n      const map = data?.progressBySchoolId && typeof data.progressBySchoolId === \"object\"\n        ? data.progressBySchoolId\n        : {};\n      setSchoolProgress(map);\n    } catch (_) {\n      const fallback = {};\n      rows.forEach((s) => {\n        fallback[s.id] = { state: \"error\", label: \"İlerleme hesaplanamadı\" };\n      });\n      setSchoolProgress(fallback);\n    } finally {\n      setProgressLoading(false);\n    }\n  }, []);\n\n  const prefetchScenarios = useCallback(\n    (schoolId) => {\n      if (!schoolId) return;\n      queryClient.prefetchQuery({\n        queryKey: [\"scenarios\", schoolId, SCENARIO_PREFETCH_PARAMS],\n        queryFn: () => api.listScenarios(schoolId, SCENARIO_PREFETCH_PARAMS),\n        staleTime: 60_000,\n      });\n    },\n    [queryClient]\n  );\n\n  const load = useCallback(async () => {\n    setErr(\"\");\n    try {\n      const data = await api.listSchools({\n        limit: 50,\n        offset: 0,\n        fields: \"brief\",\n        order: \"name:asc\",\n      });\n      const rows = Array.isArray(data?.items) ? data.items : [];\n      setSchools(rows);\n    } catch (e) {\n      setErr(e.message || \"Failed to load schools\");\n    }\n  }, []);\n\r\n  useEffect(() => {\r\n    if (!auth.user) return;\r\n    if (!isAssigned) {\n      setSchools([]);\n      setErr(\"\");\n      setSchoolProgress({});\n      setProgressLoading(false);\n      return;\n    }\n    load();\n  }, [auth.user, isAssigned, load]);\n\n  useEffect(() => {\n    if (!schools.length) return;\n    loadProgress(schools);\n  }, [schools, loadProgress]);\n\n  useEffect(() => {\n    if (!schools.length || prefetchedFirstRef.current) return;\n    prefetchScenarios(schools[0]?.id);\n    prefetchedFirstRef.current = true;\n  }, [schools, prefetchScenarios]);\n\n  return (\n    <div className=\"container\">\n      {err ? <div className=\"card\" style={{ marginTop: 10, background: \"#fff1f2\", borderColor: \"#fecaca\" }}>{err}</div> : null}\r\n\r\n      {!isAssigned && auth.user ? (\r\n        <div className=\"card\" style={{ marginTop: 12 }}>\r\n          <div style={{ fontWeight: 700 }}>Ülke ataması yapılması gerekir.</div>\r\n          <div className=\"small\" style={{ marginTop: 6 }}>\r\n            Okul oluşturmanız için hesabınız ülke ataması yapılması gerekir. Lütfen yöneticiniz ile iletişime geçin.\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n\r\n\r\n      {isAssigned ? (\r\n        <div className=\"card\" style={{ marginTop: 12 }}>\r\n          <table className=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Okul/Kampüs Adı</th>\r\n                <th>Ilerleme</th>\r\n                <th>Oluşturma Tarihi</th>\r\n                <th>En son guncelleme</th>\r\n                <th></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {schools.length === 0 ? (\r\n                <tr><td colSpan=\"5\" className=\"small\">Henuz okul tanimlanmamis. Lutfen yoneticiniz ile iletisime gecin.</td></tr>\r\n              ) : schools.map(s => (\r\n                <tr key={s.id}>\r\n                  <td><b>{s.name}</b></td>\r\n                  <td style={{ minWidth: 180 }}>\r\n                    {schoolProgress[s.id] ? (\r\n                      schoolProgress[s.id].state === \"active\" ? (\r\n                        <ProgressBar\r\n                          value={schoolProgress[s.id].pct}\r\n                          tooltipLines={schoolProgress[s.id].tooltipLines}\r\n                        />\r\n                      ) : (\r\n                        <div className=\"small\">{schoolProgress[s.id].label || \"-\"}</div>\r\n                      )\r\n                    ) : (\r\n                      <div className=\"small\">{progressLoading ? \"Hesaplaniyor...\" : \"-\"}</div>\r\n                    )}\r\n                  </td>\r\n                  <td className=\"small\">{new Date(s.created_at).toLocaleString()}</td>\r\n                  <td className=\"small\">{new Date(s.updated_at || s.created_at).toLocaleString()}</td>\r\n                  <td>\n                    <div className=\"row\">\n                      <Button\n                        as={Link}\n                        variant=\"primary\"\n                        size=\"sm\"\n                        to={`/select?schoolId=${s.id}`}\n                        onMouseEnter={() => prefetchScenarios(s.id)}\n                      >\n                        <FaOpen /> Aç\n                      </Button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      ) : null}\r\n\r\n      {auth.user?.role === \"admin\" ? (\r\n        <div className=\"card\" style={{ marginTop: 12 }}>\r\n          <div className=\"small\">\r\n            Okullari ulkelere gore Admin panelinden yonetebilirsiniz.\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nfunction normalizeLines(lines, text) {\r\n  if (Array.isArray(lines)) {\r\n    return lines.map((line) => String(line)).filter((line) => line.trim().length > 0);\r\n  }\r\n  if (typeof text === \"string\") {\r\n    return text\r\n      .split(\"\\n\")\r\n      .map((line) => line.trim())\r\n      .filter(Boolean);\r\n  }\r\n  return [];\r\n}\r\n\r\nexport default function Tooltip({ text, lines, children, className = \"\" }) {\r\n  const resolved = normalizeLines(lines, text);\r\n  if (!resolved.length) return children;\r\n\r\n  return (\r\n    <span className={`tooltip-wrap ${className}`.trim()}>\r\n      {children}\r\n      <span className=\"tooltip-bubble\" role=\"tooltip\">\r\n        {resolved.map((line, idx) => (\r\n          <div key={`${idx}-${line}`} className=\"tooltip-line\">\r\n            {line}\r\n          </div>\r\n        ))}\r\n      </span>\r\n    </span>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Tooltip from \"./Tooltip\";\r\n\r\nfunction normalizeLines(lines) {\r\n  if (!lines) return [];\r\n  if (Array.isArray(lines)) return lines.map((line) => String(line));\r\n  if (typeof lines === \"string\") return lines.split(\"\\n\");\r\n  return [];\r\n}\r\n\r\nexport default function ProgressBar({ value = 0, label = \"\", tooltipLines }) {\r\n  const numeric = Number(value);\r\n  const pct = Number.isFinite(numeric) ? Math.max(0, Math.min(100, numeric)) : 0;\r\n  const lines = normalizeLines(tooltipLines).filter((line) => String(line).trim().length > 0);\r\n\r\n  const track = (\r\n    <div className=\"progress-track\">\r\n      <div className=\"progress-bar\" role=\"progressbar\" aria-valuenow={pct} aria-valuemin={0} aria-valuemax={100}>\r\n        <div className=\"progress-bar-fill\" style={{ width: `${pct}%` }} />\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"progress-row\">\r\n      {label ? <div className=\"progress-label\">{label}</div> : null}\r\n      {lines.length ? (\r\n        <Tooltip lines={lines} className=\"progress-tooltip\">\r\n          {track}\r\n        </Tooltip>\r\n      ) : (\r\n        track\r\n      )}\r\n      <div className=\"progress-value\">{Math.round(pct)}%</div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["Button","React","_ref","ref","variant","size","loading","disabled","className","as","Component","onClick","type","children","rest","_objectWithoutProperties","_excluded","isButton","isDisabled","classes","concat","filter","Boolean","join","content","_jsx","_objectSpread","undefined","event","preventDefault","stopPropagation","displayName","SCENARIO_PREFETCH_PARAMS","limit","offset","fields","order","SchoolsPage","_auth$user","_auth$user2","auth","useAuth","outlet","useOutletContext","queryClient","useQueryClient","prefetchedFirstRef","useRef","schools","setSchools","useState","err","setErr","schoolProgress","setSchoolProgress","progressLoading","setProgressLoading","isAssigned","user","country_id","useEffect","document","title","setHeaderMeta","subtitle","centered","_outlet$clearHeaderMe","clearHeaderMeta","call","loadProgress","useCallback","async","Array","isArray","rows","length","ids","map","s","id","data","api","getSchoolsProgressBulk","progressBySchoolId","_","fallback","forEach","state","label","prefetchScenarios","schoolId","prefetchQuery","queryKey","queryFn","listScenarios","staleTime","load","listSchools","items","e","message","_schools$","current","_jsxs","style","marginTop","background","borderColor","fontWeight","colSpan","name","minWidth","ProgressBar","value","pct","tooltipLines","Date","created_at","toLocaleString","updated_at","Link","to","onMouseEnter","FaOpen","role","Tooltip","text","lines","resolved","line","String","trim","split","normalizeLines","idx","numeric","Number","isFinite","Math","max","min","track","width","round"],"ignoreList":[],"sourceRoot":""}